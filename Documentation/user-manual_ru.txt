// Subsurface 4.5 User Manual
// ==========================
// :author: Manual authors: Jacco van Koll, Dirk Hohndel, Reinout Hoornweg,
// Linus Torvalds, Miika Turkia, Amit Chaudhuri, Jan Schubert, Willem
// Ferguson, Salvador Cuñat, Pedro Neves
// :revnumber: 4.5
// :revdate: October 2015
:icons:
:toc2:
:toc-placement: manual
:numbered:
:lang: ru
// :website: http://subsurface-divelog.org

image::images/Subsurface4Banner.jpg["Banner",align="center"]

[big]#Руководство пользователя#

*Авторы документа*: Willem Ferguson, Jacco van Koll, Dirk Hohndel, Reinout Hoornweg,
Linus Torvalds, Miika Turkia, Amit Chaudhuri, Jan Schubert, Salvador Cuñat, Pedro Neves

[blue]#_Версия 4.5, Октябрь 2015_#


Вас приветствует _Subsurface_, современная программа для ведения журнала
погружений с возможностями организации, документирования, анализа и печати
погружений для SCUBA и фридайверов. _Subsurface_ предлагает множество
преимуществ по сравнению с другими решениями:

 - Вам нужен удобный инструмент для ведения журнала рекреационных погружений
   даже без использования дайв-компьютера?
 - Вы используете два дайв-компьютера различных производителей, каждый со
   своим программным обеспечением, для загрузки профилей? Вы ныряете с
   ребризером и на открытом цикле? Используете Reefnet Sensus ботом-таймер
   совместно с дайв-компьютером? _Subsurface_ предоставляет общий
   унифицированный интерфейс для загрузки журналов со всех этих устройств,
   хранения и анализа профилей.
 - Вы используете более одной операционной системы? _Subsurface_ полностью
   совместим с Mac, Linux и Windows, позволяя вам получить доступ к журналу
   на любой операционной системе одинаковым способом.
 - Вы используете Linux или Mac, а для вашего дайв-компьютер есть программное
   обеспечение только для Windows (например, Mares)? _Subsurface_ дает вам
   возможность работать с профилями погружения на других операционных системах.
 - Вам нужен интуитивно понятный графический планировщик погружений, который
   принимает во внимание ранее выполненные погружения?
 - Вам нужно хранить или создавать резервные копии журнала погружения в Интернет, с
   возможностью доступа к журналу откуда угодно, используя веб-броузер?

Установочные образы _Subsurface_ доступны для Windows PC (Win XP и позже),
Intel Mac (OS/X) и множества дистрибутивов Linux. _Subsurface_ может быть
также скомпилирован на множестве других платформ, где доступны Qt и
libdivecomputer.

Этот документ описывает использование программы _Subsurface_. Для установки
обратитесь к странице _Downloads_ на http://subsurface-divelog.org/[веб-сайте
_Subsurface_].  Вы можете обсудить эту программу, отправив email на адрес
mailto:subsurface@subsurface-divelog.org[списка рассылки] и сообщить об ошибках на сайте
http://trac.hohndel.org[треккера ошибок]. Инструкции по самостоятельной сборке
_Subsurface_ и, если необходимо, зависимостей, описаны в файле INSTALL, распространяемом
вместе с исходными текстами.


*Аудитория*: Рекреационные, технические и коммерческие дайверы, фридайверы


toc::[]


Работа с этим руководством
--------------------------
Если руководство открыто из _Subsurface_, то вы не увидите никаких элементов
управления. Однако вам доступны две удобных функции:

- _ПОИСК_ активируется нажатием комбинации клавиш control-F или command-F.
  Используйте текстовое поле в нижней части экрана для поиска нужной информации
  в руководстве.  Справа от поля поиска кнопки с изображением стрелок вверх и
  вниз позволяют перемещаться по результатам поиска.



image::images/usermanualfunctions.jpg["Руководство пользователя",align="center"]


- _ИСТОРИЯ ПЕРЕХОДОВ_. Как и в случае работы с веб-браузером, вы можете
  переходить по ссылкам в руководстве. Контекстное меню (его вы можете вызвать
  правым щелчком мыши) позволяет вам перемещаться по истории переходов вперед и
  назад.





[[S_UserSurvey]]
Опрос пользователей
-------------------
Для того, чтобы _Subsurface_ удовлетворял всем потребностям наших пользователей,
нам важно знать о вас. После нескольких дней использования _Subsurface_ предложит
вам заполнить опросник. Вы сами решаете заполнять ли его и какую информацию вы готовы
предоставить. Эта информация помогает развивать проект в правильном направлении.
Если вы отправите анкету или решите отказаться, в обоих случаях _Subsurface_ больше
не будет надоедать вам. Если в будущем ваши привычки или пожелания изменятся,
вы можете вызвать опросник, запустив _Subsurface_ с параметром
командной строки _--survey_.




[[S_StartUsing]]
Начало работы с программой
--------------------------

Окно _Subsurface_ обычно разделено на четыре панели с *Главным меню* (Файл
Импорт Журнал Вид Помощь) в верхней части окна (Windows и Linux) или в верхней
части экрана (Mac и Ubuntu Unity).  Эти четыре панели:

1. *Список погружений* в левой нижней части, в котором отображаются все
погружения из журнала. Погружение можно выбрать и подсветить нажав на нем
мышкой. В большинстве случаев между погружениями можно перемещаться клавишами
вверх/вниз. Список погружений - важный инструмент управления журналом.


2. *Карта погружений* в правой нижней части. В ней показываются места
погружений на карте мира. Карта отцентрирована по местоположению последнего
выбранного погружения в *Списке погружений*

3. *Информация о погружении* в левой верхней части. Предоставляет наиболее
полную информацию о дайве, выбранном в *Списке погружений*, включая статистику
одного или всех выбранных погружений.

4. *Профиль погружения* в правой верхней части. Показывает графический профиль
выбранного погружения.

Разделители панелей можно двигать для того, чтобы изменить их размер.
_Subsurface_ запоминает положение разделителей так, что при следующем запуске
программы размер панелей будет таким же, как и в предыдущий раз.


Если в *Списке погружений* выбран дайв, то в соответствующих панелях
отображается местоположение, подробная информация и профиль этого погружения.
Если же подсвечено более одного погружения, то последнее подсвеченное
считается выбранным, но на вкладке *Статистика* информационной панели
показывается сводная информация _всех подсвеченных_ дайвов (минимальная,
максимальная и средняя глубина, длительность, температура воды и SAC;
общее время на дне и количество погружений).

[[S_ViewPanels]]

image::images/main_window_f22.jpg["Главное окно",align="center"]

Вы можете выбрать какие из панелей показывать на главном экране.  Для этого
перейдите в пункт меню *Вид* и выберите один из вариантов отображения:


*Все*: показываются все четыре панели, как на картинке выше.

*Список*: показать только список погружений.

*Профиль*: отобразить только профиль выбранного погружения.

*Информация*: показать только информацию о выбранном дайве и статистику по
подсвеченным погружениям.

*Карта*: показать карту, отцентрированную по последнему выбранному погружению.

Как и большинство других функций, доступных из главного меню, вид главного
экрана  можно переключать комбинацией клавиш. Эти комбинации указаны рядом с
соответствующими пунктами меню. В зависимости от операционной системы и
выбранного языка интерфейса эти комбинации могут различаться, поэтому они не
перечислены в данном руководстве.

При первом запуске программы главное окно не отображает вообще никакой
информации. Дело в том, что в этот момент еще нет данных о погружениях. В
следующих главах будут описаны шаги по созданию нового журнала погружений.

[[S_NewLogbook]]
Создание нового журнала
-----------------------
В главном меню выберите _Файл -> Новый журнал_. Все существующие данные
очищаются чтобы можно было добавлять новую информацию. Если в открытом журнале
были сделаны изменения, вам будет предложено сохранить данные перед
созданием нового журнала.

[[S_GetInformation]]
== Сохранение погружений в журнале

Теперь, когда создан новый журнал, очень просто добавить погружения к нему.
_Subsurface_ предлагает несколько способов добавления погружений, которые подробно
описаны далее:

1) Если вы ведете бумажный журнал, храните информацию в электронной таблице или
используете другой ручной способ, данные о погружениях могут быть добавлены с
помощью одного из перечисленных вариантов:

 - Ввод данных о погружении вручную. Это может оказаться полезным, если вы не
 используете дайв-компьютер и погружения были записаны в бумажном журнале. Смотрите:
 xref:S_EnterData[Ввод данных о погружении вручную]

 - Импорт данных из журнала, который велся в электронной таблице или в виде CSV-файла.
 Обратитесь к главам xref:S_Appendix_D[ПРИЛОЖЕНИЕ Г: Экспорт таблиц в CSV формат] и
 xref:S_ImportingCSVDives[Импорт погружений в CSV формате].

2) Если ваши погружения записаны в дайв-компьютере, вы можете получить значительное
 количество информации, включая профиль погружения. Погружения могут быть импортированы
 из:

 - Непосредственно дайв-компьютера. Смотрите главу xref:S_ImportDiveComputer[Импорт данных нового погружения из дайв-компьютера] или

 - Стороннего программного обеспечения, распространяемого производителями дайв-компьютеров.
 Обратитесь к xref:S_ImportingAlienDiveLogs[Импорт погружений из других источников и форматов данных].

 - Импорт из электронных таблиц и CSV-файлов, содержащих профили погружений. Смотрите
 xref:S_ImportingCSVDives[Импорт погружений в CSV-формате из дайв-компьютеров и другого ПО для ведения журналов].


[[S_EnterData]]
=== Ввод данных о погружении вручную

Этот способ обычно используется для погружений без дайв-компьютера. Основная
учетная запись в _Subsurface_ - это дайв. В простом журнале погружений обычно
фиксируется только наиболее важная информация: тип дайва, дата, время,
длительность, глубина, имена напарников, дайв-мастера или гида, возможно
некоторые заметки о погружении. _Subsurface_ может хранить гораздо больше
информации о каждом отдельном дайве. Чтобы добавить новый дайв в журнал
выберите в главном меню _Журнал -> Добавить погружение_. Программа при этом
покажет три области, доступных для ввода данных: две вкладки на информационной
панели (*Примечания* и *Снаряжение*) и панель *Профиль* с графиком погружения.
Эти области отмечены соответственно как [red]#A#, [red]#B# и [red]#C# на
картинке ниже. Далее будет пояснено как вводить данные.


image::images/AddDive1_f22.jpg["Рисунок: Добавление погружения",align="center"]

Когда вы щелкаете мышью в одном из полей указанных панелей, вы переходите в
режим редактирования. Об этом свидетельствует сообщение на синем фоне в
верхней части.

image::images/BlueEditBar_f22.jpg["Синяя полоса редактирования",align="center"]

Не нажимайте на кнопку _Применить изменения_ до тех пор, пока вы не ввели все данные.
При ручном вводе вам нужно заполнить поля на вкладках _Примечания_, _Снаряжение_ и
_Профиль_ перед сохранением. При нажатии кнопки _Применить изменения_, информация о
погружении сохраняется в памяти. При закрытии _Subsurface_ вам будет предложено
сохранить весь журнал на диск.

[[S_CreateProfile]]
==== Создание профиля погружения

*Профиль погружения* (графическое представление глубины дайва как функции
от времени) отображается в правой верхней панели окна _Subsurface_. В случае
ручного добавления погружения в журнал, _Subsurface_ предлагает начальный
профиль дайва, который необходимо изменить, чтобы он соответствовал реальному
погружению:

image::images/DiveProfile1_f20.jpg["Рисунок: Начальный профиль погружения",align="center"]

_Изменение профиля погружения_: при перемещении курсора по профилю погружения,
его положение показывается двумя красными линиями. Глубина
и время, соответствующие положению курсора, отображаются на координатных осях
слева и внизу. Единицы измерения (имперская или метрическая система мер)
берутся из _Настроек_ приложения. Профиль дайва состоит из нескольких
сегментов, определенных путевыми точками (белые точки, как показано на рисунке
выше). Глубина по умолчанию составляет 15м. Если погружение было совершено на
глубину 21м, вам необходимо передвинуть соответствующие точки вниз к нужной
глубине. Для добавления новой точки, дважды щелкните на линии любого сегмента.
Чтобы переместить точку, нажмите на нее мышкой и перетаскивайте. Для удаления
путевой точки, нажмите на ней правой кнопкой мыши и во всплывающем меню
выберите пункт "Удалить эту точку". Добавляйте и перемещайте точки до тех пор,
пока профиль не будет соответствовать реальному погружению (глубина и время).
Ниже приведен пример погружения на 20м в течение 30 минут с последующей
остановкой безопасности на 5м на 5 минут.


image::images/DiveProfile2_f20.jpg["Рисунок: Отредактированный профиль погружения",align="center"]

_Редактирование газовой смеси:_  Название используемой газовой смеси
отображается на профиле рядом с каждым сегментом погружения. По умолчанию
используется первая смесь из списка газов, указанных на вкладке
*Снаряжение*. В предыдущем примере это воздух. Чтобы изменить газ для отдельно
взятого сегмента, нажмите правой кнопкой мыши на путевой точке и выберите
смесь из выпадающего контекстного меню. Изменение газа в путевой точке
изменяет сегмент _слева_ от этой точки. Обратите также внимание, что в
контекстном меню доступны только газы, определенные на вкладке *Снаряжение*.



image::images/DiveProfile3_f20.jpg["Рисунок: Меню выбора газовой смеси",align="center"]

После того, как профиль погружения был задан, необходимо указать дополнительные детали.
Используйте для этого вкладки *Примечания* и *Снаряжение*, находящиеся в верхней левой
части окна _Subsurface_. Перейдите по xref:S_Notes_dc[этой ссылке] для получения более
подробной информации.


[[S_ImportDiveComputer]]
=== Импорт новых погружений из дайв-компьютера

==== Подсоединение дайв-компьютера и импорт данных

Использование дайв-компьютеров позволяет получить большое количество подробной
информации о погружении, например, точные значения глубин, длительности,
скорости погружения и всплытия, парциального давления газов. _Subsurface_
поддерживает множество моделей дайв-компьютеров,
link:http://subsurface-divelog.org/documentation/supported-dive-computers/[
актуальный список] доступен на веб-сайте.




[icon="images/icons/warning2.png"]
[WARNING]
Некоторые модели дайв-компьютеров потребляют значительное количество энергии,
будучи переведенным в режим обмена данными с компьютером. **Это может привести
к быстрому разряду батареи**. Поэтому мы рекомендуем предварительно проверить
уровень заряда батареи перед подключением к USB-порту вашего персонального
компьютера. Так, некоторые модели Suunto и Mares не заряжаются, будучи
подключенными к ПК. Советуем вам обратиться к руководству по использованию
вашего дайв-компьютера, чтобы выяснить, заряжается ли его батарея при
подключении к USB-порту.


Для переноса данных из дайв-компьютера в ваш ПК необходимо установить
соединение между ними. Для этого вам нужно выяснить порт или точку
монтирования и сообщить эту информацию _Subsurface_. В
xref:APPENDIX_A[Приложении А] приведена техническая информация,
специфичная для различных операционных систем, а в
xref:APPENDIX_B[Приложении Б] для отдельных моделей дайв-компьютеров.










Когда у вас есть необходимая информация, можно подключить дайв-компьютер к ПК,
выполнив следующие шаги:

1. Интерфейсный кабель должен быть подключен к свободному USB-порту
   (подключение через ИК-порт и Bluetooth рассматривается далее)

2. Дайв-компьютер должен быть переведен в режим передачи данных
   (Обратитесь к руководству пользователя вашего дайв-компьютера)

3. В главном меню _Subsurface_ выберите _Импорт -> Импорт из дайв-компьютера_.
   Вам будет представлено следующее диалоговое окно *A*:



image::images/DC_import_f20.jpg["Рисунок: Загрузка из дайв-компьютера 1",align="center"]

Дайв-компьютеры обычно хранят в своей памяти информацию о нескольких последних
погружениях, даже не смотря на то, что они уже были загружены в _Subsurface_.
По этой причине _Subsurface_ импортирует только те дайвы, которые еще не были
загружены ранее. Это значительно ускоряет процесс импорта из большинства
дайв-компьютеров, а также предохраняет батарею от разряда (если конечно ваш
дайв-компьютер не заряжается, будучи подключенным к USB-порту).

- В диалоговом окне присутствуют два выпадающих списка: *Производитель* и
  *Модель*. Сначала выберите производителя, например, Suunto, Oceanic, Uwatec
  или Mares. Затем в списке *Модель* выберите марку вашего дайв-компьютера,
  например, D4 (Suunto), Veo200 (Oceanic) или Puck (Mares).



- Поле *Устройство или точка монтирования* содержит список USB или Bluetooth
  портов, необходимых для связи _Subsurface_ с вашим дайв-компьютером. Вы
  должны выбрать порт, соответствующий вашему устройству. Обратитесь к
  xref:APPENDIX_A[Приложению А] и
  xref:APPENDIX_B[Приложению Б] для получения технической информации о том,
  как выяснить название порта связи для определенного дайв-компьютера,
  а в некоторых случаях, как настроить операционную систему ПК, на котором
  запущен _Subsurface_.



- Если необходимо загрузить все дайвы, поставьте галочку в поле
  _Принудительная загрузка всех погружения_. Обычно _Subsurface_ импортирует
  только погружения новее самого последнего в вашем журнале. Эта функция вам
  также может понадобиться, если вы случайно удалили погружения из журнала.
  Некоторые модели дайв-компьютеров (например, Mares Puck) не предоставляют
  список погружения в своей памяти перед импортом, поэтому _Subsurface_ не
  может определить какие из дайвов являются новыми и загружает все погружения
  не зависимо от состояния этого поля.


- Если в поле *Предпочтение загруженным* стоит галочка,и во время импорта
  будут существовать погружения с одинаковой датой в журнале и в
  дайв-компьютере, _Subsurface_ перезапишет данные такого дайва данными из
  дайв-компьютера.


- Если напротив поля _Загружать в новую поездку" стоит галочка, то после загрузки все
  новые погружения будут сгруппированы в одну поездку в *Списке погружений*

- *Не выбирайте* поля _Сохранить журнал libdivecomputer_ и _Сохранить
  дамп-файл libdivecomputer_. Они используются для диагностики в случае
  возникновения проблем с импортом из дайв-компьютера (см. ниже).

- Нажмите кнопку _Загрузить_. При установленном соединении вы можете наблюдать
  как загружаются данные из дайв-компьютера. В зависимости от модели компьютера
  и количества погружений в памяти последнего, импорт может занять довольно долгое время,
  будьте терпеливы. Бегущая полоса, показывающая процесс загрузки, может не совсем
  точно отражать скорость загрузки, так как зачастую _Subsurface_ не знает
  точно сколько погружений будет загружено до тех пор, пока импорт не завершен.
  После загрузки погружений они отобразятся в в виде таблицы в правой части окна
  (как показано на рисунке *В* выше). Проставьте галочки напротив тех погружений,
  которые должны быть перенесены в *Список погружений* и нажмите кнопку *OK*.
  Окно загрузки будет закрыто, а выбранные погружения появятся в списке.
  После окончания загрузки отключите дайв-компьютер и выключите его
  для экономии заряда батареи.













- В случае возникновения проблем связи с дайв-компьютером показывается
  информационное сообщение вида "Невозможно открыть /dev/ttyUSB0 Mares (Puck
  Pro)". Внимательно прочитайте следующую главу.


****
*Проблемы импорта из дайв-компьютера*
[icon="images/icons/important.png"]
[IMPORTANT]
Проверьте следующее:

 - Дайв-компьютер все еще находится в режиме передачи данных?


 - Полностью ли заряжена батарея дайв-компьютера? Если нет, то следует ее
   зарядить или заменить.

 - Рабочий ли интерфейсный кабель? Работает ли этот кабель при использовании
   других программ? Работал ли этот кабель ранее или вы используете его в
   первый раз?

 - Обратитесь к
   xref:APPENDIX_A[Приложению А] и убедитесь что правильно указано устройство
   или точка монтирования (см. выше).

 - На Unix-подобных операционных системах убедитесь что у вас есть права на
   открытие порта USB. Если нет, прочитайте
   xref:APPENDIX_A[Приложение А].


Если _Subsurface_ не распознает USB адаптер, не показывая при правильное
название устройства в поле _Устройство или точка монтирования_, велика
вероятность, что кабель нерабочий. Это наиболее часто встречающаяся причина
ошибок при импорте. Также существует вероятность того, что _Subsurface_ не может
распознать данные, полученные с дайв-компьютера. В этом случае выполните
необходимо выполнить диагностическую загрузку, пометив галочками следующие два
поля:

    Сохранить журнал libdivecomputer
    Сохранить дамп-файл libdivecomputer

*Важно*: эти поля используются только для диагностики ошибок, возникших при
импорте данных из дайв-компьютера, в обычной ситуации галочки в этих полях
должны быть сняты. Когда они выбраны, вам при импорте будет предложено выбрать
папку для сохранения диагностической информации. По умолчанию используется
папка, в которой хранится журнал погружений.

*Важно*: При импорте в диагностическом режиме, погружения в журнал не
добавляются. Вместо этого в указанной вами папке будут созданы два файла:


    subsurface.log
    subsurface.bin

Эти файлы следует отправить разработчикам в mailto:subsurface@subsurface-divelog.org
[список рассылки] с просьбой проанализировать проблему. Необходимо указать
производителя и модель дайв-компьютера и дать словесное описание загружаемых
погружений.

****

[[S_Bluetooth]]
==== Подключение _Subsurface_ к дайв-компьютеру через Bluetooth
[icon="images/icons/bluetooth.jpg"]

Bluetooth все чаще встречается в качестве интерфейса для взаимодействия с дайв-компьютерами,
например Shearwater Petrel Mk2 и OSTC Mk3. _Subsurface_ предоставляет интерфейс взаимодействия
с Bluetooth, слабо зависящий от операционной системы. Нестройка Bluetooth-соединения в _Subsurface_
требует выполнения четырех шагов:


- Удостоверьтесь, что Bluetooth активирован на вашем персональном компьютере.
- Убедитесь, что _Subsurface_ распознает адаптер Bluetooth на этом компьютере.
- Проверьте, что дайв-компьютер переведен в режим связи с ПК и его можно обнаружить через Bluetooth.
- Проверьте, чтобы _Subsurface_ был сопряжен с дайв-компьютером.

Перейдите в окно "Загрузка из дайв-компьютера", выбрав в *Главном меню* _Импорт -> Импорт из
дайв-компьютера_. Если поставить галочку напротив пункта _Загрузка через Bluetooth_,
вам будет представлено следующее окно:

===== Linux или MacOS:

image::images/DC_import_Bluetooth.jpg["Рисунок: Сопряжение устройств Bluetooth",align="center"]

На платформах _Linux_ и _MacOS_ в правой части окна показывается название
компьютера, на котором запущен _Subsurface_, и его адрес Bluetooth. Если на
компьютере найдено более одного локального Bluetooth-адаптера, то они будут
представлены в выпадающем списке и вы можете указать тот, который необходимо
использовать. Кнопка ниже позволяет включить ии выключить питание локального
Bluetooth-адаптера.

Если Bluetooth-адрес не указан, это означает, что _Subsurface_ не может распознать локальное
Bluetooth-устройство. Убедитесь, что на компьютере установлен драйвер адаптера и проверьте, что
он может использоваться другими программами для работы с Bluetooth (_bluetoothctl_ или _bluemoon_).
Эти шаги покрывают первые два из из перечисленных выше.

Проверьте, что дайв-компьютер переведен в режим связи с ПК и его можно обнаружить через Bluetooth.
Обратитесь к руководству пользователя вашего дайв-компьютера, чтобы сделать это. Это действие
завершает третий шаг.

Нажмите на кнопку _Сканировать_ в левой нижней части окна. Спустя небольшое
время поиска, ваш дайв-компьютер должен появиться в списке обнаруженных
устройств (возможно наряду с другими найденными устройствами) в левой части
диалогового окна (см. картинку выше). Если компьютер в списке не появился,
нажмите кнопку _Очистить_ и повторите процедуру сканирования. В итоге
_Subsurface_ должен обнаружить дайв-компьютер. В списке обнаруженных устройств
показывается их название, адрес и статус сопряжения. Если устройство не
сопряжено и подсвечено красным цветом, щелкните на нем правой кнопкой мыши и из
контекстного меню выберите пункт _Сопряжение_. Дождитесь окончания этого
действия. Если сопряжение с этим устройством производится впервые, _Subsurface_
может запросить пароль или PIN-код. Наиболее часто используется код 0000 (например,
это работает с Shearwater Petrel). При необходимости обратитесь к руководству
пользователя вашего дайв-компьютера.


****
[icon="images/icons/important.png"]
[IMPORTANT]
В настоящий момент _Subsurface_ не поддерживает сопряжение с дайв-компьютерами, которые требуют
собственный PIN-код. В этом случае для сопряжения используйте другие утилиты операционной системы
так, как это предложено ниже.

Один и способов сопряжения - использование утилиты +bluetoothctl+:

	$ bluetoothctl
	[bluetooth]# agent KeyboardOnly
	Agent registered
	[bluetooth]# default-agent
	Default agent request successful
	[bluetooth]# pair 00:80:25:49:6C:E3
	Attempting to pair with 00:80:25:49:6C:E3
	[CHG] Device 00:80:25:49:6C:E3 Connected: yes
	Request PIN code
	[agent] Enter PIN code: 0000
****

После сопряжения устройств можно нажать на кнопку _Сохранить_. Окно выбора
Bluetooth-устройства будет закрыто. Теперь в окне _Загрузка из дайв-компьютера_
нажмите кнопку _Загрузить_. Загруженные погружения будут показаны в списке в
правой части окна.

===== Windows
image::images/DC_import_Bluetooth_Windows.png["Рисунок: Сопряжение устройств Bluetooth в Windows",align="center"]

На платформе _Windows_ детали локального Bluetooth-адаптера не отображаются как в
случае Mac и Linux.
Для успешного обнаружения дайв-компьютера убедитесь, что на вашем компьютере
включен Bluetooth. Используйте кнопку _Сканировать_ для обнаружения устройств.
Если сопряжение устройства производится впервые, вам возможно придется указать
PIN-код. Обычно это 0000; при необходимости обратитесь к руководству пользователя
вашего дайв-компьютера.


Сопряжение устройств происходит автоматически при загрузке погружений. Если до
этого устройства никогда не были сопряжены, операционная система запросит
подтверждение и выведет уведомление в правой части экрана: _Добавление устройства,
нажмите чтобы настроить ваш дайв-компьютер_. Вам необходимо подтвердить сопряжение.
Выберите устройство из списка обнаруженных и нажмите  кнопку _Сохранить_. В окне
_Загрузка из дайв-компьютера_ нажмите кнопку _Загрузить_ и дождитесь окончания процесса.

[icon="images/icons/important.png"]
[IMPORTANT]
Учтите, что в настоящий момент _Subsurface_ работает только с локальными Bluetooth-адаптерами
и Bluetooth-брелками, использующими стэк Microsoft Bluetooth (например, iSonic).
Прочие, использующие драйверы _Widcomm_, _Stonestreet One Bluetopia Bluetooth_ или
_BlueSolei_, заведомо работать не будут.


Информационное сообщение в левой нижней части окна выбора Bluetooth-устройства
показывает текущее состояние агента Bluetooth. Для выбора другого устройства,
вызовите окно выбора Bluetooth-устройства нажатием на кнопку с троеточием
справа от галочки _Загрузка через Bluetooth_

[icon="images/icons/important.png"]
[IMPORTANT]

*В случае возникновения проблем*: Если локальный Bluetooth-адаптер на компьютере с _Subsurface_
"завис" и загрузка погружений постоянно завершается с ошибкой, _удалите_ сопряжение с устройством
и повторите шаги, перечисленные выше. Если и это не помогло, в
xref:S_HowFindBluetoothDeviceName[_Приложении А_] вы сможете найти информацию о том, как вручную
настроить и проверить соединение с _Subsurface_.



[[S_DeviceNames]]
==== Изменение названия дайв-компьютера

Может возникнуть ситуация, когда вам будет необходимо каким-то образом
различать дайв-компьютеры, используемые совместно с _Subsurface_. Например,
если у вас с напарником одинаковые дайв-компьютеры и вы их используете для
импорта данных на одном ПК, то вы возможно захотите назвать один из
компьютеров как "Suunto D4 Ивана", а другой как "Suunto D4 Петра". Или же
вы технический дайвер и используете два или более дайв-компьютеров одной
модели. В этом случае мы можете назвать их "Suunto D4 (1)" и "Suunto D4 (2)".
_Subsurface_ позволяет вам легко это сделать. В *Главном меню* выберите
_Журнал -> Мои дайв-компьютеры_. В открывшемся окне вам будет представлен
список всех компьютеров, использовавшихся для импорта погружений.
Отредактируйте название соответствующего устройства. После сохранения
в журнале будет отображаться это название вместо его модели.



[[S_EditDiveInfo]]
==== Редактирование погружения, загруженного из компьютера

Информация из дайв-компьютера может быть неполной и вам потребуется ее
отредактировать. Для этого вам предоставляется две вкладки *Примечания* и
*Снаряжение* в верхней левой панели _Subsurface_.



[[S_Notes_dc]]
===== Примечания

Вам возможно придется указать дополнительную информацию, чтобы иметь более полную
запись о погружении. Нижеописанная процедура одинакова как для погружений, введенных
вручную, так и для загруженных из дайв-компьютера.

Дата и время погружения, газовая смесь и (обычно) температура присутствуют в
импортированных дайвах, но вам может понадобиться дополнить
информацию вручную. Если вы начнете менять какие-то данные на этой вкладке,
сообщение на голубом фоне в верхней части окна будет уведомлять вас, что
погружение редактируется.
На вкладке *Примечания* вам доступны следующие поля
для редактирования (картинка слева):



image::images/AddDive3_f22.jpg["Рисунок: Вкладка Примечания",align="center"]

На картинке справа показана заполненная вкладка *Примечания*.
Поля *Дата* и *Время* соответствуют дате и времени дайва.  При нажатии мышкой
на поле даты отображается выпадающий календарь, в котором можно выбрать
необходимую дату.  Нажмите ESC чтобы закрыть календарь. Значение времени (часы
и минуты) можно также непосредственно поменять, для чего необходимо нажать
мышкой в нужном месте текстового поля и ввести цифры.


*Температура воды и воздуха* во время дайва. Зачастую дайв-компьютеры
записывают эту информацию и вам не нужно ее редактировать. Если же вы решите
их заполнить вручную,единицы измерения заполнять не нужно, они будут автоматически
подставлены программой (единицы, выбранные в *Настройках* указывают будет ли
использоваться метрическая или имперская система мер).






*Местоположение*:
[icon="images/icons/warning2.png"]
[WARNING]
Управление дайв-сайтами выполняется отдельно от журнала погружений. Поэтому информация погружения
на вкладках *Примечания* и *Снаряжение* не может быть отредактирована одновременно с данными
дайв-сайта. Сохраните прочую информацию (партнеры, дайв-мастер, костюм) нажатием на кнопку
*Применить изменения*. Только после этого укажите название местоположения в поле _Местоположение_.



Укажите название дайв-сайта, например, «Эль-Мина рэк, Хургада, Египет».
Если была указана информация для одного дайв-сайта, и у вас есть несколько погружений
в этом же месте, то эта информация может быть использована без необходимости повторного ввода
данных. Информация дайв-сайта может быть отредактирована в любой момент. Для этого выберите
в списке любое погружение, выполнявшееся на этом сайте, и нажмите кнопку с изображением глобуса,
которая находится справа от поля *Местоположение* (см. картинку справа выше). При вводе названия
дайв-сайта _Subsurface_ автоматически предложит вам список сайтов с похожими именами. Если сайт
уже существует, выберите его из списка. Справа от названия сайта в выпадающем списке находится
картинка либо с изображением глобуса (означает, что в базе данных _Subsurface_ есть погружения
на этом сайте), либо со значком *+* (сайты с похожим названием, которые еще не были добавлены
в базу сайтов).







Если сайт ранее не существовал, вы увидите следующее сообщение (рисунок *А* ниже)

image::images/Locations1_f22.jpg["FIGURE:Редактирование дайв-сайта",align="center"]

Дважды щелкните мышью на наовом дайв-сайте. Вам будет представлена панель, на которой можно ввести
координаты и прочую информацию о сайте (рисунок *В* выше). Наиболее важными являются географические
координаты сайта. Их можно указать тремя способами:

а. Выбрать на карте, которая находится в правой нижней части окна
_Subsurface_. На карте отображается оранжевая полоса с надписью «Выберите место
на карте двойным щелчком мыши». При двойном нажатии в соответствующем месте
карты, оранжевая полоса исчезнет и координаты точки будут заполнены в поле.

б. Координаты могут быть получены с помощью вспомогательного приложения
_Subsurface_, если у вас есть устройство Android с GPS-датчиком и координаты
дайв-сайта были сохранены в этом устройстве.  xref:S_Companion[Нажмите, чтобы
узнать больше]

в. Если вам известны координаты, их можно ввести вручную в одном из четырех
форматов, сначала широта, потом долгота:

	ISO 6709 Приложение D, например 30°13'28.9"Ю 30°49'1.5"В
	Градусы и десятичные минуты, например, Ю30° 13.49760' , В30° 49.30788'
	Градусы минуты секунды, например, Ю30° 13' 29.8" , В30° 49' 1.5"
	Десятичные градусы, например, 30.22496 , 30.821798

Широта южного полушария указывается с буквой *Ю*, например, Ю30°, или со знаком минус,
например, -30.22496. Аналогично, долгота западного полушария указывается с буквой *З*,
например, З07°, или со знаком минус, например,-7.34323. На некоторых клавиатурах отсутствует
символ градусов ((°). Его можно заменить на *d*, например: С30d З20d.
Если вы указали название дайв-сайта и его координаты, сохраните информацию, нажав на кнопку
_Сохранить изменения_ в верхней части панели.


*Важно* координаты GPS привязаны к названию дайв-сайта, поэтому
указание координат для погружений, у которых не указано местоположение, может
привести к непредсказуемым результатам (_Subsurface_ будет предлагать, что все
эти погружения были в одном месте и имеют одинаковые координаты).


*Геопоиск дайв-сайтов:* Если были указаны географические координаты сайта,
вы можете выполнить автоматический поиск его названия. Для этого _Subsurface_ требуется
подключение к Интернет. Найденая информация будет отображаться в метках рядом с названием
дайв-сайта. Список _Дайв-сайты с такими же координатами_ в нижней части панели отображает сайты,
находящиеся по соседству.





Укажите прочую текстовую информацию о дайв-сайте (Описание и Примечания) и нажмите кнопку
_Применить изменения_, чтобы сохранить информацию и сайте. В дальнейшем информация о сайте может
быть отредактирована нажатием на кнопку с изображением глобуса справа от поля Местоположение на
вкладке *Примечания*.

*Режим погружения*: С помощью выпадающего списка вы можете выбрать режим погружения. Вам
предоставляются следующие варианты: OC (открытый цикл, значение по умолчанию, подходит для большинства рекреационных дайверов),
Freedive (погружение без дыхательного аппарата), CCR (ребризер замкнутого цикла) и pSCR (
пассивный полу-замкнутый ребризер).

*Инструктор*: Имя гида или дайв-мастера, с которым производилось это
погружение. Это поле также производит автодополнение на основании списка всех
инструкторов в текущем журнале.


*Партнер*: Имя buddy или имена партнеров (разделенные запятой), с которыми
выполнялось данное погружение. Это поле делает автодополнение на основании
списка всех партнеров в текущем журнале.


*Костюм*: Тип костюма в котором осуществлялось погружение. Как и с другими
полями, для него доступно автодополнение.  Если вы ныряете в сухом костюме, то
можете также указать тип утеплителя и его теплозащиту.


*Оценка*: Ваша субъективная оценка этого погружения по 5-ти бальной шкале.
Укажите рейтинг, нажав на соответствующей звездочке.

*Видимость*: Видимость под водой, как и в предыдущем случае, оценивается по
5-ти бальной шкале.


*Метки*: Набор меток (разделенных запятой), описывающих это погружение,
например: ночное, пещера, течение и т.п. _Subsurface_ предоставляет также
набор встроенных меток. Автодополнение доступно для этого поля. Например,
набрав +cav+, вам предложат на выбор метки *cave* и *cavern*.





*Примечания*: В это поле можно ввести любую дополнительную информацию.

Кнопка *Применить изменения* используются для сохранения информации на всех
вкладках информационной панели и профиля погружения, поэтому нет необходимости
нажимать ее до тех пор, пока вы не заполнили ВСЮ информацию. Картинка, помещенная
xref:S_Notes_dc[в начале главы], представляет пример полностью заполненной информационной панели.

==== Снаряжение

Вкладка Снаряжение позволяет ввести информацию об используемых баллонах и
газах, а также грузовых системах. Голубая полоса в верхней части панели с
сообщением:

image::images/BlueEditBar_f22.jpg["Голубая полоса редактирования",align="center"]

информирует о том, что в данный момент вы редактируете погружение. Эта часть
_Subsurface_  очень интерактивная и информация о баллонах и смесях влияет на
поведение профиля погружения (верхняя правая панель).


[[cylinder_definitions]]
*Баллоны*: Ввод информации о баллонах осуществляется с помощью диалога,
изображенного на следующей картинке:

image::images/DC_gas-dialogue1_f20.jpg["Рисунок: Начальный вид диалога редактирования баллонов",align="center"]

В большинстве случаев _Subsurface_ получает информацию о смесях из
дайв-компьютера и подставляет ее в таблицу. Кнопка + в правом верхнем углу
позволяет добавить новый баллон к текущему погружению. Темная иконка с
изображением мусорной корзины удаляет выбранный баллон, однако
только в том случае, если этот баллон уже не используется в погружении.
Баллон может неявно использоваться даже в отсутствие событий смены газа.

Начните с выбора типа баллона из выпадающего списка в левой части таблицы. Для
этого нажмите на ячейке в колонке *Тип*:




image::images/DC_gas-dialogue2_f20.jpg["Рисунок: Список типов баллонов",align="center"]

Вы можете использовать выпадающий список для выбора типа баллона для
погружения, а можете начать вводить название типа с помощью клавиатуры. В этом
случае вам будут предложены совпадающие типы. Поля *Объем* и *Рабочее
давление* будут заполнены автоматически. Если баллон отсутствует в списке,
укажите его название и описание в поле *Тип*

Далее укажите начальное и конечное давление газа в баллоне. Единицы измерения
давления (метрическая/имперская система мер) будут взяты из _Настроек_.


Наконец, укажите состав используемой смеси в поле *O₂%*. Если используется
воздух, то можно указать значение 21% или вовсе оставить это поле пустым. В
случае использования Nitrox или Trmix, необходимо указать процентное
содержание кислорода и гелия в соответствующих полях.
Прочие ненужные поля следует оставить незаполненными. После ввода всей
необходимой информации нажмите клавишу _ENTER_ либо щелкните курсором мыши вне
ячейки, в которой находится курсор. Информация о дополнительных баллонах может
быть добавлена нажатием на кнопку + в правом верхнем углу. Ниже приведен
пример погружения с двумя баллонами (воздух и EAN50):


image::images/CylinderDataEntry3_f20.jpg["Рисунок: заполненная таблица баллонов",align="center"]

*Грузы*: Информация о грузовых системах, используемых во время погружения,
вводится таким же образом, как и информация о баллонах. Если нажать на кнопку
+ в правом верхнем углу, таблица будет выглядеть приблизительно так:



image::images/WeightsDataEntry1_f20.jpg["Рисунок: Редактирование грузовых систем",align="center"]

При нажатии мышкой в поле *Тип*, выпадающий список можно вызвать, нажав
клавишу вниз:

image::images/WeightsDataEntry2_f20.jpg["Рисунок: Список типов грузов",align="center"]

Вы можете использовать выпадающий список для выбора типа груза, либо начать
вводить название с помощью клавиатуры. В этом случае вам будут предложены
совпадающие типы. После выбора типа груза, укажите его вес в поле *Вес*.
Нажмите клавишу _ENTER_ либо щелкните курсором мыши вне ячейки, в которой
находится курсор. Если вам нужно добавить дополнительную грузовую систему,
нажмите на кнопке + в правом верхнем углу. Чтобы удалить груз, нажмите на
иконку с изображением мусорной корзины.
Вот пример заполненной таблицы с двумя грузовыми системами: интегрированная и
пояс:




image::images/WeightsDataEntry3_f20.jpg["Рисунок: Заполненная таблица грузов",align="center"]

==== Одновременное редактирование нескольких погружений

_СПОСОБ 1_: После загрузки данных из дайв-компьютера вы можете видеть профили погружений,
дату и время, возможно температуру, но многие поля на вкладках *Погружение* и *Снаряжение*
будут пустыми. И может оказаться очень удобным отредактировать эти поля у нескольких погружений
одновременно. Например, вы совершили несколько последовательных погружений на одном дайв-сайте,
в одной и той же конфигурации оборудования и с одним и тем же партнером. Вместо заполнения этой
информации для каждого дайва, вы можете выбрать несколько погружений в списке и отредактировать
необходимые поля для всех сразу.







Одновременное редактирование работает только для полей, которые не заполнены. Т.е. если
у одного погружения среди нескольких выбранных были изменены какие-то поля, они не будут
изменены при множественном редактировании. Технически правило одновременного редактирования
звучит так: если редактируемое поле содержит _одинаковое_ значение для всех выделенных
погружений, только в этом случае новое значение будет сохранено для всех выделенных дайвов.
В противном случае будет изменено только текущее редактируемое погружение.




[[S_CopyComponents]]
_СПОСОБ 2_: Существует альтернативный способ выполнить поставленную задачу. Выберите
подходящее погружение с заполненными полями на вкладках *Погружение* и *Снаряжение*. Затем
в главном меню выберите _Журнал -> Копировать параметры погружения_. В появившемся окне
проставьте галочки напротив полей, которые необходимо скопировать и нажмите _OK_. Теперь
в списке погружений выберите дайвы, в которые нужно скопировать поля и в главном меню
выберите _Журнал -> Вставить параметры погружения_.


==== Добавление закладок к погружению

Многие дайверы комментируют свои погружения, добавляя закладки, отмечающие
какие-то события по время дайва, например: "Встретили дельфинов", "Выпустили
буй". Это легко сделать в _Subsurface_:

- Нажмите правой кнопкой мыши в нужной точке профиля погружения. В появившемся
контекстном меню выберите пункт _Добавить закладку_. На профиле в указанной
точке времени появится иконка с изображением дайв-флага (рисунок *А* ниже).

- Нажмите правой кнопкой мыши на флаге. В появившемся контекстном меню
(рисунок *В*) выберите _Изменить закладку_.
- В появившемся окне введите название закладки (рисунок *С*) и нажмите _ОК_
чтобы сохранить изменения.

- При наведении курсора мыши на изображение флага, в нижней части
информационного окна будет отображаться название закладки (рисунок *D* ниже).

image::images/Bookmarks.jpg["Рисунок: Добавление закладки",align="center"]


==== Сохранение измененного погружения

Вы можете сохранить информацию со вкладок *Погружение* и *Снаряжение*, нажав
кнопку _Применить изменения_. При нажатии кнопки _Отменить изменения_, введенные вами
данные будут утеряны, но информация, загруженная из дайв-компьютера, будет сохранена.
При закрытии _Subsurface_ вам будет предложено сохранить данные журнала.






[[S_ImportingAlienDiveLogs]]
==== Импорт данных из других источников и файлов


Если вы ныряете уже достаточно долго, вероятно ваши погружения уже сохранены в
какой-то другой программе для ведения журнала погружений. Вам не потребуется
вводить ее заново, потому что с большой долей вероятности _Subsurface_ сможет
импортировать эти данные. _Subsurface_ поддерживает множество форматов данных.
Некоторые форматы поддерживаются непосредственно, для других программ может
понадобиться сделать экспорт в промежуточный формат, для последующего импорта
в _Subsurface_.
В настоящий момент _Subsurface_ поддерживает импорт из CSV-файлов нескольких
форматов. Для файлов APD LogViewer, XP5 и Sensus подготовлены шаблоны, но вы
можете создать и свой шаблон импорта.
Файлы журнала погружений, которые вы ведете вручную (в электронной таблице)
также могут быть загружены с помощью CSV-импорта.



_Subsurface_ также поддерживает импорт файлов с расширением UDDF и UDCF,
которые используются некоторыми дайв-компьютерами, такими, как Heinrichs &
Weikamp DR5. Наконец, для некоторых сторонних программ, например, Mares Dive
Organiser, мы рекомендуем сначала экспортировать журнал в сторонний веб-сервис
типа _divelogs.de_, а затем импортировать в _Subsurface_, так как
_divelogs.de_ поддерживает еще несколько других форматов, которые _Subsurface_
в данный момент не распознает.

Если _Subsurface_ поддерживает формат файла или стороннее программное обеспечение, то для
импорта такого файла достаточно в главном меню выбрать _Файл -> Открыть журнал_ или
_Импорт -> Импорт журналов_. _Subsurface_ поддерживает импорт с сторонних SQL баз данных
Suunto Dive Manager и Shearwater. При импорте _Subsurface_ пытается определить
множественные записи относящиеся к одному погружению и объединить их. Если не
обнаружено проблем (разница во временной зоне или значительная разница во времени),
_Subsurface_ не создаст дубликатов погружений.



[[Unified_import]]
==== Использование универсального импорта

Импорт погружений из сторонних форматов выполняется с помощью универсального
диалога, который вы можете вызвать из Главного меню _Импорт -> Импорт
журналов_. Вам будет представлено диалоговое окно *А*:

image::images/Import1_f20.jpg["Рисунок: Импорт журналов: шаг 1",align="center"]

В нижней части окна находится выпадающий список типов файлов (как показано на
рисунке В):


 - XML-файлы журналов ((Divinglog 5.0, MacDive и другие программы)
 - Журналы Cochran
 - UDDF журналы (например, Kenozoooid)
 - UDCF журналы
 - Журналы Poseidon MKVI CCR
 - Журналы APD Inspiration/Evolution CCR
 - Журналы LiquiVision
 - Журналы divelog.de
 - Журналы OSTC Tools
 - JDiveLog
 - Suunto Dive Manager (DM3 и DM4)
 - CSV файлы (текстовые файлы и электронные таблицы), включая журналы APD CCR

Выберите необходимый файл в списке и погружения будут добавлены в текущий
журнал. Прочие форматы, которые не поддерживаются _Subsurface_, можно
импортировать другим способом, который описан ниже.


==== Импорт из OSTC Tools

_OSTC Tools_ - набор программ для платформы Microsoft Windows для семейства дайв-компьютеров OSTC.
, позволяющий загружать и организовывать погружения. _OSTC Tools_ загружает данные погружений из
дайв-компьютера и сохраняет их в файле с расширением _.dive_. Эти файлы могут быть загружены в
_Subsurface_ напрямую, используя диалог универсального импорта. В выпадающем списке в правой нижней
части окна выберите __Файлы OSTCTools (.dive .DIVE)_. Это действие отобразит файлы данного типа
в панели выбора файлов. Выберите одно или несколько погружений и нажмите кнопку _Открыть_. Погружения
будет отображены в *Списке погружений*.

Фактически, все устройства H&W, поддерживаемые OSTCTools, могут быть импортированы в _Subsurface_.
Этот список включает в себя OSTC, OSTC Mk2, OSTC 2N/2C, OSTC3, OSTC Sport и, возможно, непроверенные
Frog, OSTC2 и OSTC CR.

Помните, однако, что OSTCTools *не является* полноценным журналом погружений, а только набором
инструментов для анализа и управления дайв-компьютерами OSTC. Поэтому только данные непосредственно
из дайв-компьютера могут быть импортированы в _Subsurface_; остальную информация (партнеры,
снаряжение, и т.д.) вам придется внести вручную.


==== Импорт из Mares Dive Organiser V2.1

Так как Mares использует несвободное программное обеспечение для Microsoft,
эти журналы не могут быть импортированы в _Subsurface_ напрямую. Вместо этого
вам придется выполнить процедуру, состоящую из трех шагов, и использовать
веб-сайт _www.divelogs.de_ для извлечения информации о погружениях.

1. Данные журнала необходимо экспортировать на ваш ПК в файл с расширением
_.sdf_. Подробнее об этом написано в xref:Mares_Export[Приложении В]



2. Выгрузить данные на веб-сайт _www.divelogs.de_. Вам будет необходимо
создать учетную запись на сайте и войти под ней. После этого выберите
_Import Logbook -> Mares Dive Organizer_. Внимательно следуйте инструкциям
и выгрузите файл с расширением _.sdf_ в на сайт.


3. Наконец, импортируйте журнал с веб-сайта _divelogs.de_ в _Subsurface_
используя следующие инструкции.


[[S_ImportingDivelogsDe]]
==== Импорт с веб-сайта *divelogs.de*

Импорт журнала с сайта _divelogs.de_ очень простой и использует одно
диалоговое окно. Для начала в Главном меню выберите _Импорт -> Импорт с сайта
divelogs.de). В появившемся окне (рисунок *А* слева ниже) введите свои имя
пользователя и пароль для сайта _divelogs.de_ и нажмите кнопку _Загрузить_.
После нажатия кнопки в окне будет отображаться прогресс импорта, а в случае
успешного окончания будет показано уведомление (рисунок *В* справа ниже). Вам
необходимо нажать кнопку _Применить_, чтобы загруженные погружения появились в
*Списке погружений*.




image::images/Divelogs1.jpg["Рисунок:Импорт с сайта Divelogs.de",align="center"]

[[S_ImportingCSVData]]
==== Импорт погружений в формате CSV

Файл со значениями, разделенными запятой (.csv) может использоваться как для импорта
профиля погружения (в случае ребризеров замкнутого цикла APD Inspiration и Evolution), так
и для загрузки общей информации о дайвах (если вы вели учет в электронной таблице). CSV
является универсальным и простым форматом для обмена данными между компьютерам и программами.
Более подробно об этом формате рассказывается в главе xref:S_CSV_Intro[Формат CSV для дайверов].
_Subsurface_ позволяет также выгружать журнал погружений для дальнейшей загрузки в другие программы.
Обратитесь к главе xref:S_Appendix_D[ПРИЛОЖЕНИЕ Г: Экспорт электронных таблиц в формат CSV]
за информацией по загрузке данных из электронных таблиц в _Subsurface_.


[[S_ImportingCSVDives]]
==== Импорт погружений в CSV-формате из дайв-компьютеров и других программ

Для просмотре и редактирования CSV-файлов подойдет обычный текстовый редактор.
Данные в CSV-файле обычно организованы следующим образом: одна строка
заголовка и затем строки данных, по одной на каждую запись.

В _Subsurface_ может быть импортировано два вида CSV-файлов:

1. _Общая информация о погружении_: в этом случае файл содержит обычную для журнала информацию,
   например, дату и время, глубину, длительность, имена партнеров и дайв-мастера, возможно
   данные об баллонах и давлении до и после погружения, примечания. Все данные для одного
   погружения хранятся в одной строке, а порядке определенном в заголовке.

2. _Профиль погружения_: журнал этого вида содержит гораздо больше информации об отдельно
   взятом погружении. Например, он может включать данные с 30-ти секундным интервалом о
   времени, глубине, температуре и давлении в баллоне в конкретный момент времени. Каждая строчка
   в таком файле является выборкой параметров погружения в определенный момент. Для описание профиля
   одного погружения необходимо много информации. Этот формат зачастую используется ребризерами
   закрытого цикла и многочисленными программами для работы с дайв-компьютерами и ведения журналов.




Перед импортом CSV-файла в _Subsurface_ вам *необходимо выяснить некоторые свойства этого
файла*:

а. Какой символ служит разделителем колонок в одной строке данных? Этот символ должен быть
   запятой (,) или табуляцией? Вы можете определить это, открыв файл в текстовом редакторе.
   Если разделителем служит запятая, то она хорошо заметна между полями данных в строке. Если
   запятых не и числа выровнены в колонки, то с большей долей вероятности можно утверждать, что
   разделителем служит символ табуляции.



б. Данные из каких колонок должны быть импортированы в _Subsurface_? Содержит файл _Общую
   информацию_ или _Профиль погружения_? Откройте файл, использую текстовый редактор, и
   отметьте для себя название колонок в заголовке и их позиционный номер.

в. В какой системе мер (имперской или метрической_ записаны данные (например, глубина)?

Вооружившись этой информацией, импорт данных в _Subsurface_ не будет для вас проблемой.
В Главном меню выберите _Импорт -> Импорт журналов_. В окне выбора файлов выберите тип
_CSV файлы_ (в правом нижнем углу). Вам будет представлен список CSV-файлов в текущей
директории. Выберите файл, который необходимо импортировать, после чего вы увидите окно
конфигурации импорта:


image::images/csv_import1_f20.jpg["Рисунок: Диалог 1 импорт CSV",align="center"]

Обратите внимание на выпадающий список в левом верхнем углу. Он содержит настройки для
часто встречающихся дайв-компьютеров и программ. Если ваш CSV-файл есть в этом списке,
используйте его. В противном случае следует выбрать _Импорт вручную_. В окне конфигурации
также есть выпадающие список для указания символа-разделителя, формата даты и длительности
погружения, а также используемой системы мер. Для успешного импорта очень важно задать
правильные значения в этих списках.




На последнем шаге вы должны сопоставить поля данных в файле их названиям. Первая белая
строка таблицы данных содержит заголовки, найденные в CSV-файле. Голубая строка таблицы,
находящаяся непосредственно на ней, содержит названия _Subsurface_. В белой области,
находящейся сразу под выпадающими списками, представлены поля-метки, которые могут быть
импортированы в _Subsurface_. Эти метки, заключенные в овалы голубого цвета, необходимо
с помощью мыши перетащить на голубую полосу таблицы в соответствующую колонку.
Например, для того, чтобы импортировать номер погружения ("Dive # " в английской версии,
"№" в русской) _Subsurface_, перетащите метку "№" в ячейку над заголовком " # ", как показано
на рисунке ниже:



image::images/csv_import2_f20.jpg["Рисунок: Диалог 2 импорт CSV",align="center"]

Продолжайте до тех пор, пока не сопоставите всем заголовкам соответствующие метки. После
этого нажмите клавишу _ОК в нижней части окна. Данные будут импортированы и погружения
будут отображены в панели *Список погружений*.


[[S_CSV_Intro]]
****
*Формат CSV для дайверов*
[icon="images/icons/important.png"]
[IMPORTANT]

Аббревиатура _CSV_ происходит от английского _Comma-Separated Values_, что означает
_значения, разделенные запятой_. Файлы этого формата можно отредактировать с помощь текстового
редактора, например Notepad (Windows), gedit (Linux) или TextWrangler(OS/X). Преимущества
этого формата заключаются в том, что а) для его редактирования не нужно никакого специализированного
программного обеспечения, и б) в нем нет ничего лишнего и он может легко быть
отредактирован человеком.
Благодаря своей простоте, CSV-формат широко используется для обмена данными между различными
программами, например между электронными таблицами, базами данных и программами для дайвинга.
В _Subsurface_ этот формат используется для импорта из других источников, таких как электронные
таблицы, и даже некоторых дайв-компьютеров.


_CSV_ файлы могут быть созданы и отредактированы с помощью обычного текстового редактора.
Самым важным атрибутом таких файлов является символ, разделяющий поля в одной строке данных.
Чаще всего таким символом является запятая, точка с запятой или табуляция. При экспорте из
электронной таблицы вам необходимо указать какой символ-разделитель использовать. CSV-файлы
обычно организованы следующим образом: в первой строке указаны заголовки (или _имена полей_),
а в последующих строках находятся данные, по одной строке на запись. Обратите внимание, что название
поля может состоять из нескольких слов, разделенных пробелами; "Дата дайва". Ниже приведен пример файла для четырех погружений
с использованием запятой в качестве символа-разделителя:

	Место,Дата дайва,Время_дайва,Длительность, Глубина,Напарник
	Illovo Beach,2012-11-23,10:45,46:15,18.4,John Smith
	Key Largo,2012-11-24,09:12,34:15,20.4,Jason McDonald
	Wismar Baltic,2012-12-01,10:13,35:27,15.4,Dieter Albrecht
	Pulau Weh,2012-12-20,09:46,55:56,38.6,Karaeng Bontonompo

В таком виде его не так просто прочитать человеку. Вот эти же данные с использованием символа табуляции:

	Место	Дата дайва	Время_дайва	Длительность	Глубина	Напарник
	Illovo Beach	2012-11-23	10:45	46:15	18.4	John Smith
	Key Largo	2012-11-24	09:12	34:15	20.4	Jason McDonald
	Wismar Baltic	2012-12-01	10:13	35:27	15.4	Dieter Albrecht
	Pulau Weh	2012-12-20	09:46	55:56	38.6	Karaeng Bontonompo

Понятно, почему большинство людей предпочитает использовать табуляцию как разделитель.
Недостаток же в том, что мы не можете отличить табуляцию от пробела, как в заголовке _Дата дайва_
(на самом деле между словами стоит пробел, а табуляция находится после заголовка).
Также при слишком длинных названиях не всегда удается достичь выравнивания. Ниже приведен
урезанный пример профиля погружения с ребризера замкнутого цикла APD, в котором используется
табуляция в качестве разделителя:


	Dive Time (s)	Depth (m)	pO₂ - Setpoint (Bar) 	pO₂ - C1 Cell 1 (Bar)	Ambient temp. (Celsius)
	0       0.0     0.70    0.81    13.1
	0       1.2     0.70    0.71    13.1
	0       0.0     0.70    0.71    13.1
	0       1.2     0.70    0.71    13.2
	0       1.2     0.70    0.71    13.1
	10      1.6     0.70    0.72    12.7
	20      1.6     0.70    0.71    12.6
	30      1.7     0.70    0.71    12.6
	40      1.8     0.70    0.68    12.5

При импорте _CSV_ файлов _Subsurface_ показывает не только заголовки, но и несколько первых
строк данных, что значительно упрощает работу. Обладая базовыми знаниями о формате _CSV_,
вы сможете без проблем импортировать свои данные в _Subsurface_.



****


[icon="images/icons/important.png"]
[IMPORTANT]
При импорте _CSV_ есть несколько предостережений. Избегайте использования некоторых специальных
символов, таких амперсанд (&), меньше (<), больше (>) и двойной кавычки (") в значениях ячеек.
Файл должен быть сохранен в кодировке UTF-8, если вы используете символы отличные от латинских.
Размер файла также может быть причиной определенных проблем. Импорт 100 погружений за раз
(_Общая информация о погружениях_) вряд ли будет проблемой, но файлы большего размера могут.
При возникновении проблем с _Импортом CSV_ попробуйте для начала уменьшить размер файла.




[[S_Companion]]
=== Импорт GPS координат из _вспомогательного приложения Subsurface_ для мобильных телефонов

Используя *вспомогательное приложение Subsurface* на устройствах Android с GPS
датчиком или xref:S_iphone[_iPhone_], координаты дайв-сайтов могут быть автоматически
переданы в журнал _Subsurface_. Вспомогательное приложение сохраняет координаты на
выделенном сервере в Интернет. _Subsurface_ в свою очередь умеет подгружать координаты
погружений с этого сервера.



Чтобы воспользоваться этой функцией, вам необходимо:

==== Создать учетную запись для вспомогательного приложения

- Зарегистрируйтесь на http://api.hohndel.org/login/[странице вспомогательного
  приложения]. Вам будет прислано письмо-подтверждение с вашим персональным
  *КЛЮЧОМ*. Этот ключ используется для авторизации на сервере и работы приложения.

- Загрузите вспомогательное приложение с сайта
  https://play.google.com/store/apps/details?id=org.subsurface[Google Play
  Store] или с сайта
  http://f-droid.org/repository/browse/?fdfilter=subsurface&fdid=org.subsurface[F-Droid].

==== Использование приложения на Android-смартфоне

При первом запуске приложения у вас есть три возможности:

* _Создать учетную запись._ Это эквивалентно созданию учетной записи с помощью
  интернет-броузера. Вы можете запросить *КЛЮЧ*, который будет прислан на вашу
  электронную почту, но затем вам будет нужно активировать учетную запись на
  http://api.hohndel.org/login/[странице вспомогательного приложения].


* _Получить учетную запись._ С помощью этого варианта вы можете восстановить
  забытый ключ.

* _Использовать учетную запись_. Вам нужно ввести ваш персональный ключ.
  Приложение сохранит ключ и больше не будет его запрашивать, если только вы
  не выберите в меню пункт _Отключиться_.

[icon="images/icons/important.png"]
[IMPORTANT]
В программе _Subsurface_ нужно также ввести ваш персональный *КЛЮЧ* в
настройках приложения. Для этого выберите в меню _Файл -> Настройки_ и на
вкладке _Общие_ введите *КЛЮЧ* в поле _ID пользователя_ веб-сервиса
_Subsurface_. Это обеспечит синхронизацию между приложениями.


===== Создание нового места погружения

Теперь вы готовы получить координаты места погружения и отправить их на
сервер. Экран смартфона выглядит как на левой картинке (*А*) ниже, но без
погружений.

Нажмите на значок со знаком "+" в правом верхнем углу, чтобы добавить новый
дайв-сайт. Отобразится выпадающее меню с тремя вариантами:

* Текущее положение: вам будет предложено ввести название места (и возможно
  потребуется включить GPS, если он был выключен), после чего текущее
  положение будет сохранено.
* Выбрать на карте: этот вариант позволяет выбрать интересующее вас
  местоположение на карте (см. рисунок *В*). Выбор точки осуществляется долгим
  нажатием на сенсорном экране. Если место выбрано неправильно, выберите
  другое, после чего нажмите на галочку в правом верхнем углу экрана. Укажите
  название точки и дату и время погружения (рисунок *С*). Для корректного
  импорта местоположения в _Subsurface_ мы рекомендуем, чтобы время совпадало
  со временем дайва.


image::images/Companion_5.jpg["Рисунок: Добавление погружения",align="center"]


* Импорт GPX-файла: Ваше Android-устройство просканирует карту памяти и
  покажет найденные GPX-файлы. Нажмите на выбранном файле, выберите
  необходимые точки погружений и нажмите на галочку в правом верхнем углу
  экрана. После этого выбранные места погружений будут отправлены на сервер в
  Интернете и добавлены к списку дайвов в вашем смартфоне.

==== Список мест погружений

На главном экране приложения отображается список мест погружений с
названиями, датой и временем. Слева от названия над полем выбора может
показываться значок с изображением стрелки, указывающей вверх, означающий, что
этот дайв ожидает отправки на сервер. Вы можете выбрать одно или несколько
погружений, проставив галочки в поле рядом с названием. Групповые операции
(_Отправить_ и _Удалить_) применяются к выбранным погружениям.

Погружения можно просматривать двумя способами: текстовый список и карта.
Режим отображения переключается нажатием на на текстовом поле _Погружения_ в
левой верхней части экрана (см. рисунок *А* ниже). Находясь в режиме карты, вы
также можете нажать на текстовом поле _Карта_ в левом верхнем углу (рисунок
*В*) и выбрать другой режим. При выборе погружения на карте или в списке, вам
будет представлен экран редактирования места дайва (рисунок *С*), на котором
вы можете поменять название точки и прочие детали.

image::images/Companion_4.jpg["Рисунок: Просмотр и редактирование мест погружений",align="center"]


На экране редактирование вам доступно два инструмента (в правом верхнем углу
экрана):


- Редактировать (карандаш): для изменения названия и прочих параметров

- Карта: отобразить положение дайва на карте

После редактирования и сохранения (рисунок *С*) вам необходимо отправить
погружение на сервер, как объясняется ниже.

==== Отправка погружения на сервер

Существует несколько способов выгрузки координат на сервер. Самый простой - отметить
погружения в списке (см. рисунок *A* ниже) и нажать на кнопку с изображением стрелки в
правом верхнем углу экрана.

[icon="images/icons/important.png"]
[IMPORTANT]
Будьте внимательны: находящаяся рядом кнопка с изображением мусорной корзины
удаляет точки погружений.


image::images/Companion_1.jpg["Рисунок: Вспомогательное приложение Subsurface",align="center"]


После вашей поездки с использованием вспомогательного приложения,
все погружения могут быть загружены в _Subsurface_ (см. ниже).


===== Дополнительные функции вспомогательного приложения

В зависимости от размера экрана вашего Android-устройства дополнительные
возможности приложения доступны вам только после нажатия кнопки _Меню_.
Вам будет предложено на выбор 5 пунктов (рисунок *В* выше):

===== Поиск

Позволяет вам найти места погружений по названию и указанном временном
интервале.

===== Запуск фоновой службы

Вместо ручного ввода мест погружений, вы можете запустить фоновую службы
записи координат, которая автоматически будет сохранять места ваших дайвов.

Следующие _Настройки_ (см. ниже) влияют на работу этой службы:

- _Минимальный интервал_ в минутах. Приложение будет пытаться определить и
  записать координаты местоположения каждые Х минут.

- _Минимальное расстояние_ в метрах. Минимальное расстояние в метрах между
  двумя последовательными точками фиксации координат.

- _Шаблон названия_. Название автоматически создаваемых точек погружения.

[icon="images/icons/info.jpg"]
[TIP]
_Как работает фоновая служба?_ Предположим вы установили временной интервал в
5мин и минимальное расстояние равное 50 метрам. Приложение будет записывать
координаты каждые 5 минут *или* если вы переместитесь более чем на 50 метров
от предыдущей точки. Если же новая точка находится в радиусе 50м от
предыдущей, то она не будет сохранена. Если вы не двигаетесь, то будут
сохранены только координаты первой точки.

===== Отправить все местоположения

Отправляет на сервер все местоположения, которые не были выгружены ранее.

===== Отключиться

Не самое удачное название. Эта функция удаляет сохраненные *КЛЮЧ*, который вы
вводили при первом старте. Может пригодиться в том случае, если другой дайвер
пользовался вашим смартфоном для записи координат погружений.

===== Настройки

В _Настройках_ приложения вам доступны следующие параметры:

===== Сервер и учетная запись

- _URL веб-сервиса_. По умолчанию используется http://api.hohndel.org/

- _ID пользователя_. Ваш персональный ключ, полученный по email после
  регистрации на сайте. Вы можете скопировать его из письма и вставить сюда,
  либо ввести вручную.

===== Синхронизация

- _Синхронизация при старте_. Если выбран этот параметр, при каждом старте приложения погружения
на вашем Android-устройстве и веб-сервисе будут синхронизироваться.
- _Отправлять новые_. Если этот параметр установлен, добавленные точки будут
  автоматически отправляться на сервер.

===== Фоновая служба

Параметры фоновой службы уже были описаны выше.

===== Разное

- _Список рассылки_. Отсюда вы можете отправить письмо разработчикам
  _Subsurface_.
- _Веб-сайт_. Ссылка на веб-сайт _Subsurface_.
- _Версия_. Текущая версия вспомогательного приложения.

[[S_iphone]]
==== Запись координат погружений из _вспомогательного приложения Subsurface_ для _iPhone_

Интерфейс приложения для iPhone крайне прост. Необходимо ввести ключ, полученный при
регистрации, в соответствующее поле, затем нажать "Dive in" (см. левую картинку на рисунке
ниже), после чего можно приступать к сбору информации о местоположении погружений.

image::images/iphone.jpg["Рисунок: Использование вспомогательного приложения на iPhone",align="center",width=640]

Погружения могут быть добавлены автоматически или вручную. В ручном режиме, служба получения
координат запускается автоматически, а в нижней части экрана появляется красная полоса. После
завершения погружения вам нужно нажать на красной области, чтобы остановить службу
позиционирования. При запущенной службе позиционирования вы можете добавлять погружения
только в ручном режиме.

Позже вы можете отредактировать название места погружения, выбрав и нажав на него в списке.
Другие поля для редактирования недоступны. Список дайвов автоматически выгружается на сервер,
возможно вручную синхронизировать погружения отсутствует.




==== Загрузка координат погружений в журнал _Subsurface_

Перед получением GPS-координат с сервера, погружения должны быть загружены в
журнал из дайв-компьютера или введены вручную. Для загрузки координат выберите
в главном меню _Импорт -> Импорт координат_ или нажмите комбинацию клавиш
Ctrl-G. Вам будет представлено окно, как показано на рисунке *А* ниже. При
первом импорте необходимо указать ключ, после чего нажмите кнопку _Загрузить_.
Окно примет следующий вид (рисунок *В*):


image::images/DownloadGPS.jpg["Рисунок: Импорт координат погружений",align="center"]

Обратите внимание, что теперь кнопка _Применить_ доступна. Нажатие на нее обновит
названия мест и координаты недавно загруженных или введенных вручную погружений, у
которых дата и время совпадают с временем фиксации на смартфоне. Если вы уже
указали название дайв-сайта перед импортом координат, _Subsurface_ отдаст
предпочтение этим данных и не будет их перезаписывать.


Важно, чтобы часы на вашем смартфоне и дайв-компьютере были синхронизированы,
так как _Subsurface_ сопоставляет погружения именно по дате-времени, хотя и
допускает некоторую погрешность. В случае большого разбега в показаниях
времени координаты не будут обновлены.



Сопоставление по дате-времени может не сработать и по другим причинам
например, из-за часовых поясов, или в случае нескольких повторных погружений в
одном месте (в этом случае координаты будут сопоставлены только с первым
погружением в серии). Для обхода этой проблемы мы рекомендуем вручную изменить
дату-время погружения *перед* загрузкой GPS-координат и вернуть в начальное
значение *после* импорта.


[icon="images/icons/info.jpg"]
[NOTE]
Полезные советы:

- _Фоновая служба_, будучи хорошим подспорьем, может тем не менее заполнить весь
список точками, не имеющими никакого отношения к погружениям, а отражающими
путь судна. И в настоящий момент удаление этих точек с сервера довольно
проблематично. Поэтому очень желательно удалить ненужные точки перед отправкой
их на сервер. Это необходимо, если вы хотите видеть на карте только точки погружений.

- Желательно для погружений указывать информативные названия, и как минимум
задать вразумительное название шаблона для автоматически добавляемых
погружений.


[[S_LoadImage]]
=== Добавление фотографий к погружениям

Многие (если не все) дайверы берут с собой на погружение камеру, чтобы сделать
несколько запоминающихся фото. _Subsurface_ позволяет прикрепить эти
фотографии к конкретному погружению и просматривать их на профиле погружения
и на вкладке _Фотографии_.

==== Загрузка фотографий и синхронизация времени между фотоаппаратом и дайв-компьютером

Нажмите левой кнопкой мыши на погружении в списке, чтобы выбрать его, а затем
правой кнопкой мыши и выберите из контекстного меню пункт _Загрузить фото_:

image::images/LoadImage1_f20.jpg["Рисунок: Меню загрузки фотографий",align="center"]

В системном диалоге выбора файлов выберите фотографии для загрузки в
_Subsurface_ и нажмите клавишу _Открыть_:

image::images/LoadImage2_f20.jpg["Рисунок: Выбор фотографий для загрузки",align="center"]

Вам будет представлен диалог, показанный ниже. Проблема состоит в том, что
зачастую время на дайв-компьютере и камере, используемых при погружении,
не совпадают. Разница может составлять несколько минут. Если _Subsurface_
сможет синхронизировать время между этими двумя устройствами, то сможет и
правильно расположить фотографии на профиле погружения.



Добиться такой синхронизации в _Subsurface_ можно двумя способами:

- *Вручную*: Если вы записали точное время камеры в самом начале погружения,
то вы можете вычислить смещение по времени. Если вы не меняли установки
даты-времени на своих устройствах, то вы можете это сделать в конце дня после
серии дайвов. После этого вы можете указать этот смещение в поле  _Сдвинуть
время изображений_ , как показано на рисунке *А*. Если часы камеры спешат на
7 минут от показаний часов дайв-компьютера, укажите значение смещения 00:07,
выберите в переключателе _Раньше - Позже_ значение _Раньше_ (поскольку часы
камеры спешат, нужно сдвинуть время на 7 минут раньше) и нажмите кнопку
_ОК_.





image::images/LoadImage3b_f20.jpg["Рисунок: Диалог синхронизации",align="center"]


- *По фотографии*: _Subsurface_ предлагает другой хитрый способ для синхронизации
времени. Если вы сделаете фотографию экрана дайв-компьютера с показаниями
часов, _Subsurface_ сможет получить точное время камеры из информации,
сохраняемой в каждой сделанной фотографии. Для этого используйте нижнюю часть
диалогового окна _Сдвинуть время изображений_. При этом значения сдвига
в верхней части окна игнорируются.
Нажмите на горизонтально вытянутой кнопке _Выбрать изображения отображающие
время на дайв-компьютере_. В окне выбора файлов укажите фото вашего
дайв-компьютера и нажмите _Открыть_. _Subsurface_ отобразит это фото в правой
нижней части окна и к этому моменту будет знать время, когда эта фотография
была сделана. Теперь вам только осталось в поле слева от фотографии указать
дату-время компьютера, как указано на фото. Основываясь на этой информации,
_Subsurface_ может вычислить разницу во времени между камерой и
дайв-компьютером. На рисунке *В* выше  показано загруженное изображение компьютера
и дата-время у него, перенесенные в поле слева.

Если фотография была сделана задолго до или после погружения, она не будет
показываться на профиле. _Subsurface_ допускает интервал равный 30 минутам до и после погружения.

==== Просмотр фотографий

После загрузки фотографии отображаются:

 - на вкладке _Фотографии_ информационной панели
 - в виде маленьких иконок на профиле погружения в соответствии
   со временем фото:
   Для просмотра добавленных фотографий на профиле погружений, активируйте
   переключатель _Фотографии_ на панели слева от профиля погружения:

image::images/icons/ShowPhotos_f20.png["Рисунок: Переключатель Фотографии",align="left"]

Профиль погружения при этом будет выглядеть следующим образом:

image::images/LoadImage4_f20.jpg["Рисунок: Фотографии на профиле",align="center"]

При наведении мышкой на иконку фото на профиле, будет показана миниатюрная
фотография:

image::images/LoadImage5_f20.jpg["Рисунок:Миниатюрное фото на профиле",align="center"]

Обратите внимание, что в левом верхнем углу миниатюры есть изображение
мусорной корзины, при нажатии на которое картинка будет удалена. Поэтому
будьте внимательны, кожа щелкаете мышкой на картинке. При нажатии мышкой на
миниатюрное фото (в профиле или на вкладке _Фотографии), полноразмерная
фотография откроется во внешней программе для просмотра изображений. Фотографии также могут
быть удалены на вкладке _Фотографии_ (см. ниже).


image::images/LoadImage6_f20.jpg["Рисунок: Просмотр полноразмерных фотографий",align="center"]

==== Вкладка _Фотографии_

Фотографии, добавленные к погружению, отображаются миниатюрными картинками на
вкладке _Фотографии_ в _Информационной панели_. Снимки, сделанные в серии и
имеющие короткий временной интервал, могут перекрывать друг друга на профиле,
но легко различимы на этой вкладке. Одиночный щелчок мышью на фотографии
выделяет ее, двойной щелчок мышью открывает окно просмотра фото во внешней
программе. Фотографию можно удалить на вкладке _Фотографии_, выбрав ее щелчком
мыши и нажатием клавиши _Del_ (фотография будет удалена и из профиля).



==== Фотографии на внешнем жестком диске

Многие фотографы хранят свои снимки на внешнем накопителе. Если внешний диск
подключен, то _Subsurface_ в большинстве случаев увидит его, и таким образом
будет обеспечен доступ к внешнему хранилищу фотографий. При этом вы добавляете
фото с внешнего диска так, как описан выше. Однако после того, как внешний
накопитель отключен, у _Subsurface_ не будет доступа к фотографиям. Если на
панели кнопок-переключателей (слева от профиля) нажата кнопка _Миниатюры
фотографий_, то вместо картинок на профиле буду показываться белые точки, а на
вкладке _Фотографии_ только имена файлов вместо миниатюр. После подключения
внешнего накопителя вы снова сможете увидеть фотографии.

[[S_FindMovedImages]]
==== Перенос фотографий между директориями, жесткими дисками и компьютерами

После загрузки фотографии в _Subsurface_ и ее привязки к погружению, папка, в
которой она находится, запоминается с тем, чтобы найти фото в следующий раз,
когда вы откроете погружение. Если фотография или вся коллекция переносится на
другой жесткий диск или компьютер, маловероятно что структура каталогов будет
такой же, как до переноса. _Subsurface_ попытается загрузить фотографии из их
начального местоположения и не сможет их найти. Вместо того, чтобы удалять все
фотографии и загружать их заново, _Subsurface_ предлагает механизм, который значительно
упрощает процесс обновления местоположения фотографий: обновление с помощью "отпечатков".

Когда фотография загружается в _Subsurface_, для нее вычисляется цифровой отпечаток, который
сохраняется наряду с прочей информацией о фотографии. После переноса фото-коллекции (которая уже
была загружена в _Subsurface_) в другую папку, диск или компьютер, _Subsurface_ может выполнить
следующие шаги:

- рекурсивно просканировать указанную папку и вложенные поддиректории, куда фотографии были
  перенесены,

- вычислить отпечатки для всех найденных фотографий и

- если найдено соответствие между новым отпечатком и оригинальным, вычисленным при начальной
  загрузке фотографии (даже если имена файлов изменились), то информация о новом местоположении
  будет автоматически обновлена, с тем чтобы _Subsurface_ мог найти ее в новой директории.

Это можно сделать, выбрав в *Главном меню* пункт _Файл -> Найти перемещенные фото_. Вам будет
предложено выбрать папку, куда были перенесены фотографии. Выберите директорию и нажмите кнопку
_Сканировать_. Этот процесс может занять несколько минут, после чего сможет отобразить фотографии
для выбранного погружения.


[[Image_fingerprint_upgrade]]
****
*Обновления существующих коллекций фотографий без отпечатков*
[icon="images/icons/important.png"]
[IMPORTANT]

_Subsurface_ автоматически вычисляет отпечатки всех фотографий, загруженных в него. При работе
с фото, удостоверьтесь, что они доступны для _Subsurface_.

_Subsurface_ каждый раз проверяет и, если необходимо, обновляет отпечатки фотографий в рамках отдельного погружения, если:
- Ассоциированные фото отображаются на профиле в фите миниатюр.
- Были внесены изменения на вкладке *Примечания* и была нажата кнопка _Применить изменения_.

****


=== Ведение журнала для специальных типов погружений

[[S_MulticylinderDives]]
==== Погружения с несколькими баллонами

_Subsurface_ позволяет без проблем вести учет многобаллонных погружений. Такие погружения обычно
выполняются если (а) не хватает воздуха для совершения погружения на одном баллоне; (б) нужно более
одной смеси по причине большой глубины или для выполнения декомпрессионных процедур. Поэтому
многобаллонные погружения зачастую выполняются техническими дайверами, которые ныряют дольше и глубже.
Для _Subsurface_ важна только следующая информация:

- *Описание баллонов погружения*. Это выполняется на вкладке *Снаряжение* информационной панели так,
  как описано xref:cylinder_definitions[выше]. Перечислите все баллоны, указав их характеристики и
  типы смесей.

- *Запишите время замены смесей*: некоторые дайв-компьютеры предоставляют такую информацию (при
  условии, что вы нажали соответствующую кнопку). Если же компьютер не сохраняет эту информацию,
  вы можете записать время замены на слэйте.


- *Укажите события замены смеси на профиле погружения*: если вы выполнили предыдущий пункт, то вам
  нужно отметить эти события на профиле. Для этого щелкните на нем правой кнопкой мыши в соответствующее
  время и в контекстном меню выберите пункт "Добавить замену газа" и укажите нужный баллон из списка,
  созданного на первом шаге (см. рисунок ниже). Если на панели переключателей нажата кнопка *Замена
  смесей*, то эти события будут также отображены на полосе в нижней части профиля погружения.



Если вы выполнили эти шаги, то _Subsurface_ будет отображать выбранные баллоны для соответствующих
сегментов погружения. Ниже на рисунке представлен профиль многобаллонного погружения, начинающегося
с EAN28, и дальнейшим переходом на 26 минуте на EAN50 для выполнения декомпрессии.

image::images/multicylinder_dive.jpg["Рисунок: Профиль многобаллонного погружения",align="center"]

==== Погружения в конфигурации side-mount

Погружения в конфигурации с боковой подвеской является просто еще одной из разновидностей
многобаллонных погружений, зачастую с двумя или всеми баллонами, заполненными одинаковой смесью.
Хотя эта конфигурация наиболее популяра среди пещерных дайвером, она может использоваться и для
рекреационных погружений после соответствующей подготовки. Как и в случае многобаллонных погружений,
для учета таких погружений необходимо выполнить три шага:

- *Запись событий смена баллонов во время погружения*. Поскольку сайд-маунт погружения
  обычно выполняются с двумя баллонами с воздухом или одинаковым газом, _Subsurface_
  различает баллоны между собой. Чего не скажешь о большинстве дайв-компьютеров, которые
  делают понимают переключение между разными _смесями_, а не _баллонами_. Это означает, что
  при импорте погружений с таких компьютеров события о смене баллонов с одинаковой смесью
  не будут загружены. Поэтому вам придется записывать эти события на слэйте, или, если
  ваш компьютер умеет, ставить закладки для таких событий, чтобы позже их загрузить.
  Сохранение событий замены баллонов - наиболее сложная задача при ведении журнала сайд-маунт погружений.
- *Укажите конфигурацию баллонов* на вкладке *Снаряжение* (см. рисунок ниже, на котором
  добавлено два 12-литровых баллона).
- *Укажите события смены баллонов*. После импорта погружения из дайв-компьютера в _Subsurface_,
вам необходимо проставить события замены баллонов на профиле погружения. События добавляются
щелчком правой кнопки мыши в соответствующем месте профиля и выбором пункта _Добавить замену смеси_
в выпадающем контекстном меню. В списке показывает список доступных баллонов, при этом текущий
активный баллон будет недоступен для выбора. На картинке ниже Баллон 1 недоступен, оставляя для
выбора только Баллон 2. Выберите нужный баллон из списка. Событие смены баллона будет отображено на
профиле соответствующей картинкой. Если активировано отображение *Замена смесей* (на панели
инструментов слева от профиля), то соответствующая информация будет показываться в нижней части профиля.
После добавления всех событий замены к профилю, на нем должны отображаться корректные значения
давления по всех баллонах, как показано на следующем рисунке.

image::images/sidemount1.jpg["Рисунок: Профиль погружения в конфигурации сайд-маунт",align="center"]

Эта глава демонстрирует гибкость _Subsurface_ при ведении журналов погружений.


[[S_sSCR_dives]]
==== Погружения с ребризером полузамкнутого цикла (SCR)

[icon="images/halcyon_RB80.jpg"]
[NOTE]
Пассивные ребризеры полузамкнутого цикла (pSCR) представляют собой дыхательный аппарат, рециркулирующий
дыхательную смесь, удаляя из нее выдыхаемый углекислый газ. Приблизительно десятая часть выдыхаемого
воздуха сбрасывается в воду, при этом свежая дыхательная смесь (обычно Nitrox) добавляется из баллона.
Поэтому даже на одном баллоне можно провести гораздо больше времени под водой, чем используя
рекреационную конфигурацию на открытом цикле. В случае pSCR свежая смесь подается из баллона при
каждом вдохе. Активные ребризеры (aSCR) подают свежую смесь из баллона постоянно.



Для учета погружений с использованием pSCR не требуется никаких специальных действий. Достаточно:

- Выбрать режим погружения pSCR на вкладке *Погружение*

- Погружения с использованием pSCR обычно выполняются с заменой смесей. Укажите все необходимые
  баллоны как описано выше и укажите события замены смесей на профиле, как указано выше в главе
  xref:S_MulticylinderDives[Погружения с несколькими баллонами].

При выборе режима pSCR, расчетный потолок погружения учитывает снижение уровня кислорода в области
загубника, что увеличивает время декомпрессии. Ниже приведен профиль pSCR погружения на смеси EAN36
и с одним баллоном кислорода для декомпрессии. Обратите внимание, что погружение заняло более двух
часов.

image::images/pSCR_profile.jpg["Рисунок: Профиль погружения с pSCR",align="center"]



[[S_CCR_dives]]
==== Погружения с ребризером закрытого цикла (CCR)

[icon="images/APD.jpg"]
[NOTE]
Ребризеры замкнутого цикла используют передовые технологии для рециркуляции отработанного газа,
выполняя две функции для поддержания концентрации кислорода, делая смест пригодной для дыхания:
а) удаление углекислого газа из выдыхаемого воздуха
б) поддержание концентрации кислорода в безопасных пределах.
На текущий момент _Subsurface_ обеспечивает наилучшую поддержку CCR дайв-компьютера Poseidon
MkVI Discovery. Интерфейс работы с ребризерами замнутого цикла находится в активной разработке и на
текущий момент считается экспериментальным. А отличие от рекреационных дайв-компьютеров, системы
CCR не позволяют загружать журналы нескольких погружений одномоментно. Вместо этого каждое погружение
хранится отдельно. Это означает, что _Subsurface_ не может загружать погружения непосредственно с
дайв-компьютера ребризера. Погружения должны быть импортированы таким же образом, как и из других
цифровых источников.



===== Импорт погружения с ребризером закрытого цикла

Прочитайте главу xref:S_ImportingAlienDiveLogs[Импорт погружений из других
цифровых источников].  В главном меню _Subsurface_ выберите _Импорт -> Импорт
журналов_ чтобы открыть окно xref:Unified_import[Универсальный импорт]. Как
описано в этой главе, в правой нижней части окна находится список
поддерживаемых источников, среди которых есть и файлы (Poseidon) MkVI
(поддержка другого CCR-оборудование активно развивается). Выбрав нужный формат
и директорию с файлами-журналами, вам нужно выбрать конкретный журнал
погружения (в случае MkVI это один файл с расширением .txt).  После выбора
файла нажмите на кнопку _Открыть_.




==== Информация, отображаемая для CCR-погружений

_Парциальные давления газов_: График парциального давления кислорода показывает информацию с
кислородных датчиков ребризера. В отличие от рекреационного режима, где значения pO~2~ высчитываются
исходя из состава смеси и глубины, для CCR-погружений эти значения берутся от датчиков. В этом случае
график должен быть достаточно ровным, соответствуя значению установки кислорода (set-point). Среднее значение
pO~2~ не является средним значением от датчика, а рассчитано _Subsurface_ следующим
образом:



- для двух датчиков O~2~ рассчитывается среднее значение.

- для систем с тремя датчиками (например, APD) также используется среднее значение. Однако разница
  в показаниях разных датчиков более 0,1 бар в один момент времени, такое значение  считается
  ложны. Если один из датчиков возвращает ложное значение, то он игнорируется.

- если данные от датчиков отсутствуют, то значение pO~2~ принимается равным установке.

Среднее значение pO~2~ сенсоров отображается зеленой линией.

Значения установок кислорода, а также показания индивидуальных датчиков, могут быть показаны  на
профиле. Отображение расширенной информации для CCR-погружения регулируется в _Настройках_ (доступны
в xref:S_CCR_options[_Файл -> Настройки -> Профиль_]. Вот настройки, влияющие на отображение pO~2~
на профиле погружения при нажатой на панели переключателей кнопке _График pO~2~_.




image::images/CCR_preferences_f20.jpg["Рисунок: Настройки профиля CCR-погружения",align="center"]

Первый параметр позволяет показать график значения установки (set-point), который отображается
красной линией поверх графика парциального давления и позволяет сравнить значения среднего
измеренного парциального значения с установкой, как показано на рисунке ниже:



image::images/CCR_setpoint_f20.jpg["Рисунок: Графики pO~2~ и установки CCR",align="center"]

Второй параметр позволяет вывести график от каждого сенсора ребризера. Цветовая кодировка сенсоров
следующая:

- Сенсор 1: серый
- Сенсор 2: голубой
- Сенсор 3: коричневый

Среднее значение pO~2~ показывается зеленым цветом. Такое отображение позволяет непосредственно
сравнить данные от каждого сенсора и выявить странно низкие или абсолютно неверные показания.


image::images/CCR_sensor_data_f20.jpg["Рисунок: Графики сенсоров CCR",align="center"]

График установки может быть наложен поверх графика парциальных давлений, для этого нужно поставить
галочки напротив обоих параметров. Парциальные давления азота (и гелия, если применимо) отображаются
так же, как для погружения на открытом цикле.

_События_: в случае погружений с ребризером могут быть записаны дополнительные события, например,
перевод загубника в режим открытого цикла. Такие события отображаются на профиле в виде желтых
треугольников. При наведении на него указателя мыши, в xref:S_InfoBox[плавающем информационном окне]
показывается описание события.

_Давление в баллонах:_ некоторые CCR дайв-компьютеры (например, Poseidon MkVI) сохраняют информацию
о давлении в баллонах с кислородом и дилуентом. График давлений в этих баллонах отображается
зелеными линиями поверх профиля глубины. В дополнение к этому, информация о начальном и конечном
давлениях в баллонах с дилуентом и кислородом показывается на вкладке _Снаряжение_.
Ниже представлен профиль CCR-погружения, на котором показаны графики значений установки, сенсоров и
давлений в баллонах. В этом случае мы видим согласованность показаний двух сенсоров.

image::images/CCR_dive_profile_f20.jpg["Рисунок: Профиль CCR-погружения",align="center"]

_Дополнительная информация_: Информация, специфичная для конкретного оборудования, отображается в
_Subsurface_ на вкладке xref:S_ExtraDataTab[Дополнительная информация]. Она может включать настройки
оборудования и прочие данные.

Деко-потолок, вычисленный _Subsurface_, не всегда точен, потому что зачастую невозможно узнать
точное парциальное давление азота в цикле из журнала, импортированного из ребризера. Однако, многие
дайв-компьютеры, поддерживающие ребризеры, сообщают информацию о своем вычисленном деко-потолке в
журнале, и это значение может быть более точным. Для отображения этого потолка необходимо активировать
соответствующую кнопку на панели слева от профиля погружения?

image::images/icons/cceiling.jpg["Кнопка отображения потолка дайв-компьютера"]

По умолчанию потолок дайв-компьютера отображается на профиле погружения белым цветом. Вы можете
отобразить его красным, выбрав соответствующий параметр в _Файл -> Настройки -> Профиль_. Ниже
показан профиль погружения с отображенным потолком дайв-компьютера:

image::images/CCR_dive_ceilingF22.jpg["Рисунок: Деко-потолок дайв-компьютера",align="center"]

За более детальной информацией по загрузке погружений из ребризеров Poseidon MkVI и APD обратитесь
к xref:S_PoseidonMkVI[ПРИЛОЖЕНИЮ Б].

== Подробная информация о погружениях в журнале

=== Вкладка *Информация* (для одиночного погружения)

Вкладка _Информация_ предоставляет суммарную информацию по погружению,
выбранному в *Списке погружений*. Здесь отображается такая полезная
информация, как поверхностный интервал перед погружением, максимальная и
средняя глубина дайва, объемный расход газов, расход воздуха на поверхности
(SAC) и единицы кислородного отравления (OTU).

[icon="images/icons/info.jpg"]
[NOTE]
Вычисление SAC и расхода газов:
_Subsurface_ очень точно вычисляет SAC и расход газов принимая во внимание
несжимаемость газов, что особенно важно при давлении в баллоне свыше 200 бар.
Более подробно об этом описано в xref:SAC_CALCULATION[Приложение Ж].

[[S_ExtraDataTab]]
=== Вкладка *Дополнительно* (обычно для индивидуального погружения)

При использовании дайв-компьютера он обычно сообщает дополнительную информацию, которую невозможно
отобразить единообразным образом, принимая во внимание, что эта информация различается для разных
моделей. Обычно эта информация включает в себя настройки компьютера, уровень заряда батареи,
неполетное время или установки градиент-фактора. Когда доступны, эти данные отображаются на вкладке
*Дополнительно*. На рисунке ниже приведены дополнительные данные для погружение на ребризере Poseidon.


image::images/ExtraDataTab_f20.jpg["Рисунок: Вкладка Дополнительно",align="center"]

=== Вкладка *Статистика* (для нескольких погружений)

Вкладка _Статистика_ предоставляет суммарную статистику для нескольких
погружений, предполагая, что вы выбрали несколько дайвов в *Списке погружений*
(используйте клавиши Ctrl и Shift при выборе погружений мышкой). На вкладке
отображается следующая полезная информация: количество выбранных погружений и их
суммарное время, минимальные, максимальные и средние значения длительности,
температуры воздуха и воды, SAC. Тут также отображается глубины самого
глубокого и самого мелкого погружений среди выбранных.



[[S_DiveProfile]]
=== Профиль погружения

image::images/Profile2.jpg["Рисунок: Пример профиля погружения",align="center"]

Из всех панелей _Subsurface_, профиль предоставляет наиболее детальную
информацию о погружении. Слева от профиля находится панель переключателей,
позволяющая выбрать несколько вариантов отображения. Функции этих
переключателей описаны ниже. Главным элементов профиля является график глубины
как функция времени. В дополнение к информации о глубине, график также
показывает скорость спуска/подъема относительно рекомендованной скорости. Эта
информация закодирована разными цветами:


|====================
|*Цвет*|*Скорость спуска (м/мин)*|*Скорость подъема (м/мин)*
|Красный|> 30|>18
|Оранжевый|18 - 30|9 - 18
|Желтый|9 - 18|4 - 9
|Светло-зеленый|1.5 - 9|1.5 - 4
|Темно-зеленый|< 1.5|< 1.5
|====================

Профиль также отображает глубины пиков и провалов на графике. Серая линия показывает среднюю
глубину в конкретный момент погружения.


[icon="images/icons/scale.jpg"]
[NOTE]
В некоторых случаях профиль занимает по ширине не всю панель *Профиль
погружения* Нажмите на переключатель *Альтернативный масштаб*, чтобы более
эффективно использовать пространство экрана.

*Температура воды* отображается синей линией со указанием значений температуры
в местах значительного изменения.

Профиль погружения может отображать графики парциальных давлений O₂, N₂ и He,
расчетный потолок декомпрессии и потолок, посчитанный дайв-компьютером (виден
только для глубоких, долгих или повторных погружений). Графики парциальных
давлений показываются в нижней части профиля, каждый своим цветом для
отдельного газа: кислород - зеленым, азот - черным, гелий - темно-красным.


[icon="images/icons/O2.jpg"]
[NOTE]
Переключатель отображения графика парциального давления *кислорода*.


[icon="images/icons/N2.jpg"]
[NOTE]
Переключатель отображения графика парциального давления *азота*.

[icon="images/icons/He.jpg"]
[NOTE]
Переключатель отображения графика парциального давления *гелия*. Актуально
только для дайверов, использующих Trimix, Helitrox или схожие дыхательные смеси.

График *расхода газа* показывает давление в баллоне и его изменение во время
погружения. Этот график принимает во внимание глубину, поэтому даже если вы
вручную ввели начальное и конечное давление в баллоне, линия никогда не будет
прямой. Аналогично графику глубины, график давления визуально предоставляет
информацию о моментальном расходе газа (SAC) при использовании дайв-компьютера
с интегрированным датчиком давления. Однако в этом случае цветовое кодирование
осуществляется безотносительно какой-то абсолютной величины, а относительно
усредненного расхода за время погружения. Таким образом, области красного
или оранжевого цвета указывают на повышенный расход газа, в то время, как
области темно-зеленого цвета говорят о расходе ниже среднего.



[icon="images/icons/Heartbutton.png"]
[NOTE]
Нажатие на кнопку с изображение ритма сердца показывает информацию о частоте
сердцебиения если дайв-компьютер оборудован датчиком пульса.

Вы можете менять масштаб профиля с помощью колеса мыши или соответствующего
жеста на сенсорной панели. По умолчанию _Subsurface_ масштабирует панель
профиля, так чтобы помещалось 30-минутное погружение на 30 метров. Очевидно,
что для фридайверов это не актуально.




image::images/MeasuringBar.png["Рисунок: Рулетка",align="center"]

[icon="images/icons/ruler.jpg"]
[NOTE]
С помощью рулетки вы можете измерять разницу *глубины и времени* между двумя
точками погружения. Измерение производится путем перетаскиванию мышью двух
красных точек. Результаты измерения отображаются в горизонтальной белой
области ниже линии рулетки.



[icon="images/icons/ShowPhotos.png"]
[NOTE]
Добавленные к погружению фотографии могут быть отображены нажатием на
переключатель *Миниатюры фотографий*. Положение фотографии на профиле
соответствуют времени когда она была сделана. Если этот переключатель
неактивен, фотографии не показываются.



Профиле может показывать *потолок*, рассчитанный дайв-компьютером (а
точнее, глубочайшая деко-остановка в данный момент времени). Он отображается
полупрозрачной красной областью. Потолок появляется, когда при прямом подъеме
на поверхность возникает риск возникновения декомпрессионной болезни (ДКБ) и в
этом случае необходимо либо снизить скорость всплытия, либо выполнить
несколько деко-остановок перед всплытием на поверхность. Не все
дайв-компьютеры записывают эту информацию и делают ее доступной для загрузки;
например, ни один из компьютеров Suunto не предоставляет этой информации.
_Subsurface_ независимо рассчитывает потолок и отображает его на профиле
закрашенной областью зеленого цвета.
Из-за разницы в алгоритмах, количества доступных данных и других факторов,
доступных в момент расчета, расчетный потолок _Subsurface_ и дайв-компьютера
могут не совпадать, несмотря даже на то, что _градиент-факторы_ могут
совпадать (см. ниже).
Зачастую _Subsurface_ рассчитывает потолок для бездекомпрессионных погружений,
в то время как компьютер не оставался в бездекомпрессионном режиме во все
время дайва (представлен [green]#темно-зеленой# областью на профиле в начале
этой главы). Это вызвано тем, что _Subsurface_ рассчитывает деко-обязательства
в каждый момент погружения, в то время, как дайв-компьютеры обычно принимают
во внимание и время всплытия. Во время всплытия происходит рассыщение азота (и
возможно гелия), поэтому даже технически "заработав" потолок на дне,
обязательная деко-остановка не требуется. Это позволяет дайв-компьютерам
рассчитывать большее время на дне.





[icon="images/icons/cceiling.jpg"]
[NOTE]
Если дайв-компьютер умеет рассчитывать потолок и делает эту информацию
доступной для _Subsurface_ во время импорта, вы можете отображать этот
потолок, нажать на переключатель *Потолок компьютера*.

[icon="images/icons/ceiling1.jpg"]
[NOTE]
Если переключатель *Расчетный потолок* нажат, потолок, если он существует,
рассчитанный _Subsurface_ будет показан на профиле зеленым цветом (рисунок *А*
ниже). Вы можете далее поменять его отображение следующим образом:

[icon="images/icons/ceiling2.jpg"]
[NOTE]
Если нажат переключатель *Расчет всех тканей*, показывается потолок для всех
типов тканей согласно модели Бюльмана  (рисунок *В* ниже)

[icon="images/icons/ceiling3.jpg"]
[NOTE]
Если нажат переключатель *3м шаг для расчетного потолка*, потолок отображается
ступеньками с шагом 3 метра.

image::images/Ceilings2.jpg["Рисунок: Потолок с 3м шагом",align="center"]

[icon="images/icons/ShowCylindersButton.jpg"]
[NOTE]
Если выбран этот переключатель, то баллоны, используемые в погружении, отображаются в виде цветной
полосы в нижней части профиля погружения. Кодировка цветов следующая: кислород нарисован
зеленой полосой, азот желтой, а гелий - красной. Рисунок ниже представляет профиль погружения с первой
смесью Trimix (красно-зеленая полоса), с дальнейшим переходом на Nitrox (желто-зеленая полоса) на 23
минуте. Баллоны с воздухом представлены светло-голубой полосой.

image::images/ShowCylinders_f20.jpg["Рисунок: График использования баллонов",align="center"]

[icon="images/tissues.jpg"]

[NOTE]
Показывает давление инертных газов в тканях относительно внешнего давления (горизонтальная серая
линия). Давление в тканях рассчитывается по алгоритму Бюльмана ZH-L16 и отображается линиями, цвет
которых варьируется от зеленого (самые быстрые ткани) до синего (самые медленные ткани).
Черная линия, нарисованная выше графика внешнего давления, показывает максимальное допустимое
перенасыщение согласно значений градиент-фактора, указанных в настройках. Для дайверов, планирующих
декомпрессионные погружения, эффективное скорость рассыщения достигается при давлении в тканях
большем чем окружающее давление (серая линия), но меньшем чем предельное (черная линия). Это
представление отображает давление в тканях на протяжении всего погружения. Напротив,
xref:S_gas_pressure_graph[Гистограмма давления газов] в плавающем *Информационном окне* отображает
давление в момент времени, соответствующий положению указателя мыши на оси времени.

image::images/tissuesGraph.jpg["Рисунок: График насыщения тканей инертными газами",align="center"]

Установки градиент-фактора непосредственно влияют на расчетный потолок и его глубину. Подробнее
см. главу xref:S_GradientFactors[Установки градиент-фактора]. Текущие установки градиент-фактора
(например, GF 35/75) указываются в верхней части профиля погружения.
*Обратите внимание:* значение градиент-фактора на профиле - это НЕ значение, используемое
дайв-компьютером, а установка, использующаяся самим _Subsurface_ для расчета деко-обязательств.
Более подробно по этой теме можно прочитать во внешних источниках:

    ** http://www.tek-dive.com/portal/upload/M-Values.pdf[Understanding M-values by Erik Baker, _Immersed_ Vol. 3, No. 3.]

	** link:http://www.rebreatherworld.com/general-and-new-to-rebreather-articles/5037-gradient-factors-for-dummies.html[Gradient factors for dummies, by Kevin Watts]

=== Контекстное меню профиля погружения

Доступ к контекстному меню профиля погружения осуществляется нажатием правой кнопки мыши в любом
месте графика. Меню позволяет добавлять закладки и события замены смеси или ручные установки для
CCR-погружений в дополнение к тем, что были импортированы из дайв-компьютера. Маркеры помещаются
на профиле в точках, соответствующих времени на горизонтальной оси в момент нажатия правой кнопкой
мыши. При выборе события замены газа, вы далее должны выбрать смесь из списка доступных, как задано
на вкладке Снаряжение. Добавления события смены установки CCR откроет окно, в котором можно задать
новое значение. Как и в случает *Планировщика*, добавление установки со значением ноль означает, что
дайвер перешел на открытый цикл, а ненулевое значение означает погружение на ребризере закрытого
цикла (CCR).
При щелчке правой кнопкой мыши на уже существующем
маркере, меню будет расширено, позволяя вам удалить маркер и скрыть все
маркеры данного типа. Чтобы восстановить скрытые маркеры, выберите в
контекстном меню пункт *Показывать все события*.




[[S_InfoBox]]
=== Информационное окно

Информационное окно отображает подробную информацию, относящуюся к конкретной
точке профиля погружения (рисунок *В*). Обычно это окно расположено в левой
верхней части панели, но вы можете его перетащить в любое другое место, при
этом позиция будет сохранена и не будет меняться при переключении между
погружениями. Если мышка находится вне панели, информационное окно отображает
только заголовок (рисунок *А*). Положение информационного окно запоминается между последовательными
запусками _Subsurface_.


image::images/InfoBox2.jpg["Рисунок: Информационное окно",align="center"]

В момент наведения мышкой на профиль погружения, информационное окно
распахивается и отображает различную информацию, относящуюся к той временной
точке, где находится курсор мыши (рисунок *В). Таким образом, передвигая
курсор мыши по горизонтальной оси времени, вы можете получить информацию о
любом моменте погружения.
В информационном окне представлены следующие данные: время погружения (@),
глубина (Г), давление в баллоне (Д), температура (Т), скорость спуска/подъема
(С), расход воздуха (SAC), парциальное давление кислорода, максимальная
рабочая глубина (MOD), эквивалентная глубина по воздуху (EAD), эквивалентная
наркозная глубина (END), эквивалентная глубина по плотности воздуха (EADD),
декомпрессионные обязательства в данный момент времени (Деко), время до
поверхности (TTS), расчетный потолок наряду с потолком для отдельных тканей по
Бюльману.



Вы можете контролировать отображение некоторых из этих значений,
воспользовавшись четырьмя переключателями на левой панели кнопок:

[icon="images/icons/MOD.jpg"]
[NOTE]
Если этот переключатель нажат, информационное окно показывает *максимальную
рабочую глубину (MOD)* для используемого газа. Значение MOD зависит от
процентного содержания кислорода в смеси. Для воздуха (21% кислорода) это
значение составляет около 57 метров. Погружения ниже MOD чреваты рисками,
связанными с токсичностью кислорода.



[icon="images/icons/NDL.jpg"]
[NOTE]
Если этот переключатель нажат, информационное окно показывает
*бездекомпрессионный предел (NDL)* или *время до поверхности (TTS)*. NDL
указывает время, которое дайвер может оставаться на текущей глубине, без
возникновения декомпрессионных обязательств (т.е. пока не появится потолок).
Как только NDL превышен и появляются декомпрессионные обязательства, TTS
указывает время до всплытия на поверхность, включая время всплытия и
декомпрессии. TTS рассчитывается исходя и расхода (SAC) текущего газа, даже
если на профиле указаны переходы на другие смеси.Значения TTS, превышающие 2
часа, не могут быть точно рассчитаны и _Subsurface_ отображает _TTS > 2ч_.


[icon="images/icons/SAC.jpg"]
[NOTE]
Если этот переключатель нажат, информационное окно показывает *расход воздуха
на поверхности (SAC)*. SAC - объем дыхания, нормализованный для поверхности.
Значение SAC меньше чем реальный расход газа, потому что на глубине 10м дайвер
потребляет в два раза больше газа, чем на поверхности. Значение SAC не зависит
от глубины и измеряются в литрах/мин или куб.футах/мин.



[icon="images/icons/EAD.jpg"]
[NOTE]
Если этот переключатель нажат, информационное окно показывает *эквивалентную
глубину по воздуху (EAD)* для погружений на Nitrox и *эквивалентную
наркозную глубину (END)* для Trimix. Эти значения важны для дайверов,
погружающихся на смесях, отличных от воздуха. Значение этих величин зависят от
состава газа. EAD - глубина гипотетического погружения на воздухе, в котором
парциальное значение азота такое же, как и в текущем погружении на Nitrox.
Дайв на Nitrox влечет такие же декомпрессионные обязательства, как и
погружение на воздухе на глубину EAD. END - глубина гипотетического погружения
на воздухе, в котором сумма парциальных давлений наркотических азота и
кислорода такая же, как и в текущем погружении на Trimix. Тримиксный дайвер
может ожидать такого же наркотического эффекта, погружайся он на воздухе на
глубину END.


На рисунке *В* выше показано информационное окно практически со всей доступной информацией.

[[S_gas_pressure_graph]]
==== Гистограмма давления газов

В левой части *Информационного окна* расположена вертикальная гистограмма, отображающая давление
азота (и других инертных газов, например гелия, там, где это применимо), вдыхаемых дайвером _в
определенный момент времени_, соответствующий положению указателя мыши на оси времени. Рисунок ниже
поясняет, что именно показывает гистограмма:


image::images/GasPressureBarGraph.jpg["Рисунок: Гистограмма давления газов",align="center"]

- Светло-зеленая область означает общий объем газа, а верхняя граница этой области показывает
  общее давление газа, вдыхаемого дайвером (измеренное от нижней части гистограммы). Это давление
  имеет относительную величину и не показывает абсолютное давление.


- Горизонтальная черная линия ниже светло-зеленой границы указывает уравновешенное давление
  инертных газов, вдыхаемых дайвером, обычно азота. В случае Trimix, это значение будет составной
  величиной давлений азота и гелия. В нашем примере погружение выполнялось с использованием EAN32,
  поэтому эта линия отмечает 68% от общего расстояния от нижней части гистограммы до границы светло-
  зеленой области (общее давление газа).

- Темно-зеленая область в нижней части гистограммы отображает давление инертных газов в каждой из
  16 групп тканей согласно алгоритма Бюльмана. "Быстрые" ткани расположены в левой части.


- Верхняя черная линия указывает на градиент-фактор, примененный к глубине в конкретной точке
  на *Профиле погружения*. Градиент-фактор интерполируется исходя из значений GFLow и GFHigh,
  указанных в вкладке *Профиль* в *Настройках*.


- Нижняя граница красной области на гистограмме отображает вычисленное по алгоритму Бюльмана
  M-значение, - давление инертного газа, при котором весьма вероятно формирование пузырьков,
  что в свою очередь может привести к декомпрессионной болезни.

Эти пять величин показаны на рисунке выше в левой его части. Как меняется гистограмма на протяжении
погружения, показано в правой части рисунка (погружение с использованием EAN32).

- Гистограмма *А*. Дайвер перед погружением находится на поверхности. Давление в группах тканей
  такое же, как и уравновешенное давление.

- Гистограмма *B*. Дайвер погрузился на глубину 30 метров. Лишь некоторые ткани успели частично
  насытиться за время спуска, давление в тканях гораздо ниже уравновешенного давления.

- Гистограмма *C*. Дайвер провел 30 минут на глубине 30 метров. "Быстрые" ткани насытились до
  уровня уравновешенного давления (т.е. сравнялись по высоте с черной линий). Более "медленные"
  ткани, находящиеся справа, еще только находятся в процессе насыщения.


- Гистограмма *D*. Дайвер поднялся до глубины 4.5 метра. Так как во время подъема давление вдыхаемого
  газа значительно упало с 4 бар до 1.45 бар, давление различных групп тканей теперь значительно
  превышает эту величину и приближается к значению градиент-фактора (верхняя черная линия). Дальнейший
  подъем приведет к превышению значения градиент-фактора (GFHigh) и подвергнет дайвера риску.


- Гистограмма *E*. Дайвер оставался на глубине 4.5 метра в течение 10 минут. Насыщение "быстрых"
  тканей снизилось, в то время как насыщение "медленных тканей изменилось ожидаемо мало. Давление
  в "быстрых" тканях уже не приближается опасно близко к значению GFHigh и дайвер находится в более
  безопасной ситуации нежели чем случае *D*.



== Ведение журнала (работа с группами погружений)

=== Контекстное меню списка погружений

Многие действия _Subsurface_, связанные с группами погружений, находятся в контекстном меню,
которое вы можете вызвать, нажав правой кнопкой мыши на дайве или группе погружений.

// TODO: NEEDS REPLACEMENT
image::images/ContextMenu.jpg["Рисунок: Контекстное меню",align="center"]

Это меню используется во многих сценариях, которые описаны ниже:

==== Выбор колонок списка погружений

image::images/DiveListOptions.jpg["Пример: Возможные колонки списка погружений",align="left"]

По умолчанию в таблице *списка погружений* показывается следующая информация:
номер, дата, рейтинг, глубина, длительность и местоположение. Вы можете
изменить набор колонок, нажав правой кнопкой мыши на заголовке таблицы. Ниже
приведен пример контекстного меню при нажатии правой кнопкой на заголовке
'Дата'. Поставьте или удалите галочки чтобы показать или скрыть поля. _Subsurface_
запоминает ваши предпочтения, так что при следующим запуске набор полей останется прежним.

[[S_Renumber]]
=== Перенумерация погружений

Погружения обычно пронумерованы последовательно от более старых к более новым.
Однако эта нумерация может быть нарушена. Например, при добавлении давних
погружений, нумерация не будет последовательной, потому что существуют более
поздние дайвы, нежели только что добавленные ранние погружения. В связи с этим
вам может понадобиться перенумеровать погружения, для чего в главном меню
выберите _Журнал -> Перенумеровать_. Вам будет предоставлена возможность
указать начальный номер, после чего погружения будут перенумерованы в
соответствии с хронологическим порядком.



Вы также можете перенумеровать только избранные погружения. Для это выберите те, для которых
необходимо изменить нумерацию. Щелкните правой кнопкой мыши на выделенных погружениях и используйте
появившееся контекстное меню, чтобы выполнить перенумерацию. В появившемся окне вам будет необходимо
указать начальный номер.

[[S_Group]]
=== Группировка погружений и работа с поездками

Если вы регулярно ныряете, журнал может очень быстро распухнуть. _Subsurface_
позволяет группировать погружения в _поездки_. Это выполняется для погружений,
у которых разрыв по времени не превышает двух дней. При этом для всех таких
дайвов создается один заголовок в журнале. Ниже представлен несгруппированный
список погружений (рисунок *А* слева) и тот же список,
сгруппированный в пять поездок (рисунок *В* справа):

image::images/Group2.jpg["Рисунок: Группировка погружений",align="center"]

Группировка в поездки обеспечивает более быстрый доступ к отдельному
погружения без необходимости просматривать длинный список. Для группировки
погружений в главном меню выберите _Журнал -> Авто-группировка_. Теперь список
показывает только заголовки поездок.

==== Редактирование поездки

Обычно в списке погружения для поездки показывается только ее название. Чтобы
расширить эту информацию, выберите поездку в списке. после чего перейдите на
вкладку *Поездка* в информационной панели. Здесь вы можете добавить информацию,
касающуюся поездки в целом: дату и время, местоположение, название дайв-центра,
погодные условия и т.п. Сохраните данные, нажав на кнопку *Сохранить* (на
голубом фоне в верхней части панели).






==== Просмотр погружений из поездки

Чтобы получить доступ к индивидуальным погружения в группе, распахните поездку
нажатием кнопки мыши на значок слева от названия поездки.


==== Сворачивание/разворачивание поездок

При щелчке правой кнопкой мыши на поездке, контекстное меню предлагает
несколько вариантов просмотра поездок: свернуть все, развернуть все, свернуть
остальные кроме выбранной.

==== Объединение погружений из нескольких поездок в одну

При щелчке правой кнопкой мыши на поездке, контекстное меню предлагает два
варианта объединения поездок: объединить с поездкой выше или с поездкой ниже по
списку.

==== Разбиение одной поездки на несколько

Если, к примеру, поездка включает десять погружений, вы можете разбить ее на две
(поездка 1: первые четыре дайва, поездка 2: оставшиеся 6 погружений), выделив первые
четыре погружения в поездке и вызвав контекстное меню правой кнопкой мыши. В меню
выберите пункт *Создать поездку выше*. Выбранные четыре погружения будут
объединены в отдельную поездку. Рисунок ниже слева (А) иллюстрирует выбор погружений и
контекстное меню, рисунок справа (Б) - погружения после разбиения:



image::images/SplitDive3a.jpg["Рисунок: Разбиение поездки на две",align="center"]

=== Работа с индивидуальными погружениями

==== Удаление погружения из журнала

Вы можете навсегда удалить погружение из журнала, вызвав контекстное меню
этого дайва и выбрав пункт *Удалить*. Вам может потребоваться это для удаления
неверных погружений (калибровка дайв-компьютера, подбор грузов и т.п.)



==== Удаление погружения из поездки

Чтобы удалить погружение из поездки, вызовите контекстное меню погружения
щелчком правой кнопки мыши и выберите пункт *Удалить из поездки*. В списке это
погружение окажется над поездкой из которой оно было удалено.



==== Добавление погружения к существующей поездке

Несгруппированные погружения могут быть добавлены к уже существующим поездкам.
В контекстном меню погружения(-й) выберите пункт *Добавить к поездке
сверху/снизу*.

==== Сдвиг времени начала погружения

Иногда вам может понадобиться изменить время начала погружения по причине
разницы во времени между часовыми поясами или неверных установок часов
дайв-компьютера. Для этого выделите одно или несколько погружений и в
контекстном меню выберите пункт *Сдвиг времени*. В диалоговом окне вам
необходимо указать величину сдвига в часах и минутах и направление.





==== Объединение нескольких погружений в одно

Бывают ситуации, когда вы вынуждены прервать дайв и всплыть на поверхность на
короткое время. Дайв-компьютер в этом случае может зарегистрировать это как
два разных погружения. Вы можете объединить такие дайвы, выделив их и выбрав в
контекстном меню пункт *Объединить выбранные*. После этого вам вероятнее все
придется отредактировать данные объединенного погружения. Ниже приведен пример
профиля такого объединенного погружения?



image::images/MergedDive.png["Рисунок: Объединенное погружение",align="center"]

==== Отмена манипуляций с погружением

Критичные действия с погружениями или поездками, описанные выше, могут быть отменены либо
выполнены повторно. Эти действия включают: _удаление погружений_, _объединение погружений_ и
_сдвиг времени погружения_. Для отмены или повторного выполнения операции выберите в *Главном меню*
пункт *Редактировать* и в нем соответствующее действие.


[[S_Filter]]
=== Фильтрация списка погружений

Вы можете отфильтровать погружения в списке, указав те или иные атрибуты дайва (метки, напарник,
место погружения, костюм). Например, можно выбрать все глубокие погружения в определенном месте,
либо пещерные дайвы с вашим другом.


Чтобы вызвать фильтр, выберите в главном меню _Журнал -> Фильтр погружений_. Вам будет представлена
_Панель фильтров_, расположенная в верхней части окна _Subsurface_. В правой части этой панели
находятся три кнопки, которые позволяют очистить фильтры, спрятать панель или вовсе закрыть ее (при
этом фильтры очищаются).




image::images/Filterpanel.jpg["Рисунок: Панель фильтров",align="center"]

Для фильтрации списка погружений используются четыре критерия: метки, люди (партнеры и инструктор),
места погружений и костюм. Эти критерии представлены в виде списка значений с галочками. Помимо этого,
над каждым списком находится поле вспомогательного фильтра, которое позволяет быстро найти значения
в списке.




Эти четыре фильтра объединены логическим оператором _И_, однако значения в отдельно взятом фильтре
объединены логическим оператором _ИЛИ_. Например, вы можете отфильтровать погружения следующим
образом: _пещерное_ ИЛИ _рэк_, где партнером был Василий.





[[S_ExportLog]]
== Экспорт всего или части журнала

Существует два варианта экспорта погружений из _Subsurface_:

- Экспорт информации о погружении в _Facebook_

- xref:S_Export_other[Экспорт данных погружения в другие форматы]

[[S_facebook]]
=== Экспорт информации о погружении в _Facebook_

Экспорт в _Facebook_ отличается от всех других видов экспорта, поскольку он требует подключения
учетной записи, что в свою очередь требует от вас логин и пароль _Facebook_. Для авторизации
необходимо в главном меню выбрать _Файл -> Настройки_ и там выбрать вкладку _Facebook_, на которой
вам будет представлена форма авторизации (см. рисунок *А* слева внизу). Авторизуйтесь своими логином
и паролем, после чего экран должен выглядеть как показано на рисунке *В*. При необходимости вы
можете отключить _Subsurface_ от _Facebook_, нажав на соответствующую кнопку.


image::images/facebook1_f20.jpg["Рисунок: Авторизация Facebook",align="center"]





После того как соединение с _Facebook_ установлено, публикация профиля погружения в вашей Хронике не
составит проблем. Выберите погружение в списке и убедитесь в том, что именно этот дайв должен быть
опубликован. Нажмите кнопку с логотипом _Facebook_, расположенную в *Информационной панели* справа
от поля _Примечания_ (см. рисунок *А* ниже). По нажатию на эту кнопку вам будет представлено окно, в
котором вы можете выбрать какую дополнительную информацию опубликовать вместе с профилем погружения
(рисунок *В*). Обязательным является только поле _Альбом_. Кроме указания стандартных параметров
погружения, вы можете вручную отредактировать сопроводительный текст. Для отправки профиля
погружения в вашу Хронику _Facebook_ нажмите кнопку _ОК_. Спустя короткое время вы должны получить
подтверждение, что запись опубликована.

Созданный альбом и запись в хронике по умолчанию будут доступны только вам. Для того, чтобы ваши
друзья смогли увидеть эти записи, вам необходимо изменить настройки безопасности приложений,
войдя в _Facebook_ с помощью обычного броузера или приложения _Facebook_. Возможно это и является
некоторым неудобством, но разработчики придерживаются мнения, что такой дополнительный шаг позволит
избежать нежелательных записей в вашей Хронике.


image::images/facebook2_f20.jpg["Рисунок: Авторизация в Facebook",align="center"]

Разорвать соединение с _Facebook_ можно из *Настроек* приложения, либо просто закрыв _Subsurface_.


[[S_Export_other]]
=== Экспорт данных погружения в другие форматы
Функция экспорта доступна через главное меню _Файл -> Экспорт_. Диалог
экспорта всегда предлагает два варианта: все погружения или только те, что выбраны в
*Списке погружений*. Выберите соответствующий пункт (см. рисунок ниже):


image::images/Export_f20.jpg["Рисунок: Диалог экспорта",align="center"]

Журнал или его часть могут быть сохранены в нескольких  форматах:

* Внутренний формат _Subsurface_ XML

* Универсальный формат данных погружений (_UDDF_). Более полную информацию
можно найти на сайте _http://uddf.org_. UDDF используется для обмена данными
между дайв-компьютерами и программами.

* _Divelogs.de_, интернет-сервис для ведения журнала погружений. Вам
необходимо зарегистрироваться на сайте и получить логин и пароль, чтобы
воспользоваться этим сервисом.

* _DiveShare_, также интернет-сервис для хранения и обмена информацией о рекреационными
  погружениях. Для выгрузки данных в этот сервис нужен идентификатор пользователя, поэтому
  вам придется зарегистрироваться на сайте _http://scubadiveshare.com_.

* _Погружение в формате _CSV_, который включает только наиболее важную информацию о
погружении: номер, дату, время, длительность, глубину, температуру и давление, т.е. большую
часть того, что обычно записывается в бумажном журнале.


* _Профиль а формате _CSV_, который включает в себя множество информации, включая профиль
глубины, показатели температуры и давления для каждого погружения.

* _HTML_ формат. Журнал хранится в HTML-файлах, которые можно просмотреть с
помощью интернет-браузера. Поддерживаются большинство современных браузеров, но
обязательно должна быть включена поддержка Javascript. Предполагается, что вы
не будете редактировать эти файлы. HTML-журнал содержит максимум информации и
позволяет выполнять поиск в журнале. Этот вариант экспорта доступен на вкладке
HTML (см. рисунок *В* выше). Вы можете выгрузить эти данные на смартфон или планшет и использовать
как переносимый журнал для подтверждения своей квалификации в дайв-центре, если они захотят
посмотреть вашу историю погружений.





* _Карта мира_. Это HTML файл, погружения отображаются на карте мира с
минимальной информацией о погружении. Этот формат нельзя отредактировать.



image::images/mapview_f20.jpg["Рисунок: Погружения на карте мира",align="center"]


* _Глубины фото_. Создает текстовый файл, в котором содержатся имена файлов всех фотографий,
прикрепленных к погружениям вместе с указанием глубины, на которой эти фотографии были сделаны.



* _Общие настройки_ на вкладке HTML позволяет указать:

** Нумерация Subsurface: если выбран этот параметр, то номера погружений будут
   выбираться из _Subsurface_, иначе дайвы будут пронумерованы начиная с 1.

** Статистика за год: если выбран этот параметр, в экспорт будет также включена статистика
   погружений по годам.
** Только список: будет экспортирован только список погружений, а
   дополнительная информация не будет доступна.

* Группа _Настройки стиля_ позволяют настроить внешнее оформление экспорта (шрифты и тему).


Экспорт в другие форматы можно выполнить с помощью сторонних сервисов, таких
как _www.divelogs.de_.

[[S_Cloud_access]]
== Хранение журнала _Subsurface_ в облаке

Журнал погружений важен для каждого дайвера. Вы ведете учет погружений не
только для своего удовольствия, он необходим для дальнейшего прохождения
курсов, а иногда в некоторых дайв-центрах. Поэтому вы должны обеспечить
сохранность журнала. На случай выхода из строя жесткого диска вашего
компьютера, кражи и утери оборудования, хранение в облаке - первое что приходит
в голову. Еще один плюс - вы можете получить доступ к журналу в любой точке
мира и вам не нужно иметь его с собой. Именно поэтому сервисы типа
_divelogs.de_ и _Diving Log_ предлагают хранение журнала в Интернете.


_Subsurface_ предлашает встроенную поддержку облачного хранилища для всех своих
пользователей. Сохранение и загрузка журнала погружений в облаке ничем не
отличается от работы с жестким диском. От вас требуется только регистрация.
Для использования облачного хранилища _Subsurface_ необходимо выполнить
следующие шаги:

=== Создание учетной записи в облаке

** Перейдите в настройки сети (в *Главном меню* выберите _Файл_ -> _Настройки_
   -> _Сеть_).
** В секции _Облачное хранилище Subsurface_ укажите свой адрес электронной
   почты, который вы желаете использовать для регистрации.
** Укажите надежный пароль, который будет защищать ваш журнал в облаке.
** Нажмите кнопку _Применить_, чтобы отправить адрес почты и пароль на
   удаленный сервер в облаке. В ответ сервер пришлет вам PIN-код на указанный
   адрес (это *единственный* случай, когда _Subsurface_ использует ваш адрес).
   Теперь в настройках сети появится поле PIN, которое ранее не было видно.
** ВВедите PIN-код в соответствующее текстовое поле (оно доступно только тогда,
   когда сервер ожидает подтверждения адреса электронной почты)
** Нажмите снова кнопку _Применить_. Ваша учетная запись будет отмечена
   как проверенная; облачное хранилище готово к работе.



=== Использование облачного хранилища

** После успешной инициализации хранилища, в меню _Файл_ появятся два новых пункта:
  _Открыть облачное хранилище_ и _Сохранить в облаке_. Эти действия позволяют
  соответственно загрузить и сохранить журнал в облаке.

** в настройках приложения (вкладка *Общие*) вы можете выбрать опцию хранить журнал погружений
по умолчанию в облаке. В этом случае _Subsurface_ будет загружать журнал из облака при запуске
и сохранять при выходе из программы.


** _Subsurface_ хранит локальную копию облачного хранилища на жестком диске и позволяет вам
работать с журналом даже при отсутствии Интернета. При подключении к Интернет ваши локальные
изменения буду синхронизированы в облако.


[[S_Cloud_storage]]
=== Доступ из веб-браузера к облачному хранилищу _Subsurface_

Одним из преимуществ облачного хранилища является то, что вы можете получить доступ к данным
вашего журнала погружений, используя обычный веб-браузер. Откройте ссылку
https://cloud.subsurface-divelog.org[_https://cloud.subsurface-divelog.org_], введите свой
адрес электронной почты и пароль, указанные при регистрации, и вы сможете просматривать журнал в
HTML-формате (данные погружений последней синхронизации в облачное хранилище _Subsurface_).
Информация о погружениях отображает только реальные данные из журнала, вычисляемые значения
НЕ отображаются (давление в баллонах, деко-потолок, парциальные давления O~2~/He/N~2~ и т.п.)


=== Прочие облачные сервисы

Если вы предпочитаете не использовать встроенное облачное хранилище
_Subsurface_ (и вам не нужен доступ к журналу из веб-браузера), то можно просто
хранить журнал в облаке, используя другие облачные хранилища в Интернет.

Например, http://www.dropbox.com/[_Dropbox_] предлагает приложение, которое
позволяет видеть файлы на серверах Dropbox как локальные папки на вашем
домашнем компьютере.


image::images/Cloud.jpg["Рисунок: Папка Dropbox",align="center"]

Программа _Dropbox_ позволяет получить копию облачного интернет-хранилища на
вашем компьютере. Когда компьютер подключен к Интернет, ваша локальная копия
автоматически синхронизируется с облаком. При работе _Subsurface_ операции
открытия и сохранения выполняются с локальной копией и доступ в Интернет не
нужен. Если локальная копия была изменена, например, вы добавили погружения,
файлы в облаке будут автоматически обновлены как только появится соединение с
Интернет.

Таким образом, журнал будет доступен из любой точки с доступом в
Интернет. В настоящий момент эту услуга бесплатна. Программное обеспечение
для Windows, Mac и Linux может быть загружено со
http://www.dropbox.com/install[_страницы установки Dropbox_].
Аналогично вы можете использовать _Dropbox_ для хранения резервной копии
журнала. Для этого в главном меню выберите _Файл -> Сохранить как_ и сохраните
копию журнала в папку _Dropbox_. Чтобы открыть копию журнала, хранящегося в
облаке, выберите в главном меню _Файл -> Открыть журнал_, перейдите в папку
_Dropbox_ и укажите необходимый файл.




Существуют и другие платные и бесплатные схожие сервисы (Google, Amazon),
которые вы можете использовать для хранения журнала в облаке.


[[S_PrintDivelog]]
== Печать журнала погружений

_Subsurface_ предоставляет простой интерфейс для печати всего журнала или только выбранных погружений, включая профиль и сопутствующую информацию.
Поставляемые или собственные шаблоны определяют как данные погружения расположены на странице.

Перед печатью вам нужно определиться с двумя вещами:

- Нужно ли печатать весь журнал или только его часть? Если нужно распечатать
только часть погружений, выделите эти дайвы с списке.
- Для каких газов нужно печатать графики парциального давления? Выберите
соответствующие переключатели на панели слева от профиля.

Теперь укажите параметры печати. Для этого в главном меню выберите _Файл -> Print_.
Вам будет представлено диалоговое окно (см. рисунок *А* ниже). Вам необходимо определиться с тремя параметрами:

image::images/Print1_f22.jpg["Рисунок: Диалог печати",align="center"]

1. В секции _Варианты печати_ выберите один из пунктов:

- _Печать погружений_: печать погружений из списка с профилем и другой информацией.
- _Печать статистики_: печать статистики погружений по годам и месяцам.

2. В секции _Параметры печати_ выберите:

- Печать только выбранных погружений из списка. Если этот параметр не выбран,
  будут распечатаны все погружения из журнала.
- Параметр _Цветная печать_ указывает будет ли печать цветной или монохромной.




3. В секции _Шаблон_ выберите вариант расположения информации на странице. В штатной поставке
вам предлагается несколько шаблонов (см. Рисунок В выше).

- _Table_: Печать сводной таблицы погружений (картинка ниже).

image::images/Print_summarylist_f22.jpg["Рисунок: Печать сводной таблицы",align="center"]

- _Flow layout_: Печать данных погружений без профилей:


image::images/Print_flow_layout_f22.jpg["Рисунок: Печать погружений без профиля",align="center"]

- _One Dive_: Печать одного погружения на странице вместе с профилем:

image::images/print2_f22.jpg["Рисунок: Печать одно погружение на странице",align="center"]


- _Two Dives_: Печать двух погружений на странице вместе с профилями
- _Six Dives_: Печать шести погружений на странице вместе с профилями

Вы можете предварительно оценить результат печати, нажав на кнопку _Просмотр_.
При необходимости поменяйте параметры печати, чтобы добиться желаемого
результата.


Нажатие на кнопку _Печать_ вызовет стандартный для вашей операционной системы диалог печати,
в котором вы можете выбрать принтер и установить параметры для него:

image::images/Print_print_f22.jpg["Рисунок: Системный диалог печати",align="center"]

Установите требуемое разрешение печати и другие параметры и нажмите кнопку _Печать_. На картинке
ниже показан пример одного из вариантов печати:


image::images/Printpreview.jpg["Рисунок: Предварительный просмотр результа печати",align="center"]

=== Создание собственных шаблонов печати

Собственные шаблоны позволяют вам максимально гибко настроить расположение данных погружения на странице. _Subsurface_ использует HTML для разметки
шаблонов. С помощью соответствующих кнопок, расположенных под списком шаблонов, вы можете редактировать, удалять, импортировать и экспортировать шаблоны. В
<<S_APPENDIX_E,ПРИЛОЖЕНИИ Д>> вы сможете найти информацию о том, как создавать и редактировать шаблоны.

[[S_Configure]]
== Конфигурация дайв-компьютера

_Subsurface_ предоставляет возможность конфигурации дайв-компьютеров. В настоящий момент поддерживаются
компьютеры производства Heinrichs-Weikamp (OSTC 2 и OSTC 3) и семейство Suunto Vyper (Stinger, Mosquito,
D3, Vyper, Vytec, Cobra, Gekko И Zoop). Множество параметров компьютера может быть считано и изменено.
Первым шагом вы должны убедиться что установлены все необходимые драйверы оборудования и что вам известно
имя устройства. Внимательно ознакомьтесь с информацией в xref:APPENDIX_A[ПРИЛОЖЕНИИ А].

После того, как дайв-компьютер подключен, выберите _Файл -> Настройка дайв-компьютера_ в главном меню.
Укажите имя устройства в текстовом поле в верхней части окна, и выберите соответствующую модель
дайв-компьютера в списке слева (см. рисунок ниже).


image::images/Configure_dc_f20.jpg["Рисунок: Конфигурация дайв-компьютера",align="center"]

Вы можете выполнить следующие действия, используя соответствующие кнопки:

 - *Загрузить настройки*. Загружает существующие параметры дайв-компьютера в _Subsurface_. Загруженные
   параметры отображаются на конфигурационной панели.
 - *Сохранить в устройстве*. Сохраняет измененные параметры в дайв-компьютер.
 - *Резервная копия*. Сохраняет резервную копию настроек. _Subsurface_ запросит директорию и имя
   файла.
 - *Восстановить*. Загружает настройки для дайв-компьютера из ранее сделанной резервной копии.
 - *Обновить прошивку*. Если доступна новая версия прошивки, она будет загружена в дайв-компьютер.





[[S_Preferences]]
== Настройки пользователя _Subsurface_

Вы можете настроить _Subsurface_ для своих нужд, используя пункт главного меню
_Файл -> Настройки_. Настройки программы разделены на семь групп: *Общие*.
*Единицы*, *Профиль*, *Язык* и *Сеть*, *Facebook* и *Геопривязка*.  Выберите
соответствующий раздел в левой части, внесите необходимые изменения ик нажмите
кнопку *Применить*, чтобы сохранить настройки. Чтобы закрыть диалог настроек,
нажмите кнопку *ОК*. Вы также можете закрыть окно настроек без сохранения.



=== Общие

В этой группе доступны следующие настройки:

image::images/Pref1_f20.jpg["Рисунок: Общие настройки",align="center"]

  ** *Списки и таблицы*: тут вы можете указать шрифт и его размер для списка
  погружений. Уменьшите размер шрифта, чтобы в списке помещалось больше дайвов.

  ** *Погружения*: укажите папку и имя файла с расширением _.xml_ или _.ssrf_. При запуске
  _Subsurface_ будет автоматически открывать этот журнал. Вам предоставляется три варианта:
  - _Отсутствует_: _Subsurface_ автоматически не загружает журнал при запуске
  - _Локальный файл_: Автоматически загружать журнал из локального файла при запуске.
  - _Файл в облаке_: При старте журнал загружается из облачного хранилища (вам нужно настроить
    доступ на вкладке *Сеть*, это описано ниже).



  ** *Показывать ошибочные*: Некоторые погружения могут быть помечены как
  ошибочные, например погружения в бассейне, но при этом вы не хотите удалять
  их из журнала. Этот параметр позволяет убрать такие дайва и списка.


  ** *Баллон по умолчанию*: укажите баллон, который будет использоваться по
  умолчанию на вкладке *Снаряжение*.

  ** *Анимация*: скорость анимации профиля при переключении между
  погружениями. Чем меньше значение, тем быстрее скорость. Значение 0
  полностью отключает анимацию.






  ** *Сбросить все настройки*: как следует из названия, эта кнопка сбрасывает
  все настройки в значение по умолчанию.

=== Единицы
image::images/Pref2_f20.jpg["Рисунок: Настройки системы мер",align="center"]

Здесь вы можете выбрать между имперской или метрической системой мер для
единиц глубины, давления, объема, температуры и массы. Переключателями в
верхней части вы выбираете системы мер для всех единиц сразу, либо выберите
*Настроить* и укажите единицы для каждой величины по отдельности.


Независимо от вышеперечисленных настроек, вы можете указать единицы измерения
времени (секунды или минуты). Координаты GPS могут быть представлены либо в
традиционном формате (градусы, минуты, секунды) либо в десятичном.



=== Профиль
[[S_CCR_options]]
image::images/Pref3_f20.jpg["Рисунок: настройки профиля",align="center"]

[[S_GradientFactors]]
В этой панели доступно две группы настроек:

* *Показывать*: тут вы можете выбрать набор данных, отображаемых в профиле
погружений:
** _Пороговые значения_: _Subsurface_ отображает на профиле погружения
парциальные давления азота, кислорода и гелия. Вы можете включить их
отображение с помощью кнопок-переключателей на слева от панели профиля.
Для каждого их этих графиков вы можете указать пороговые значения, при
превышении которых линия будет нарисована красным цветом.

** _Показывать потолок дайв-компьютера красным цветом_: Если дайв-компьютер
записывает данные потолка, то вам может быть удобным различать его значения от
тех, что посчитаны _Subsurface_. Зачастую эти значения различаются из-за
разницы в алгоритмах, установках градиент-фактора и динамики расчет потолка.

** _Неиспользуемые баллоны_: следует ли отображать неиспользуемые баллоны в
списке на вкладке Снаряжение.
** _Показывать среднюю глубину_: Если в этом поле стоит галочка, _Subsurface_
будет показывать серой линией на профиле среднюю глубину погружения в конкретный момент времени.
Обычно это линия имеет форму английской буквы U и отражает максимальную среднюю глубины непосредственно
перед всплытием.

* *Разное*:

[[S_GradientFactors]]
** _Градиент фактор_: Значения GFLow для глубины и GFHigh для поверхности.
   Эти значения задают консерватизм азотной экспозиции во время погружения, так
   же, как вы настраиваете консерватизм вашего дайв-компьютера. Меньше значения
   градиент-фактора, тем консервативнее вычисления относительно азотного
   насыщения и тем глубже потолок всплытия. Установки 20/60 считаются достаточно
   консервативными, а значения 60/90 достаточно суровы. Если в поле *GF Low на
   макс. глубине* стоит галочка, значение нижнего градиент-фактора будет
   использоваться на максимальной глубине. В противном случае GF Low будет
   использоваться на всех глубинах ниже первой деко-остановки. Больше информации
   вы можете найти по ссылкам:


*** http://www.tek-dive.com/portal/upload/M-Values.pdf[Understanding M-values by Erik Baker, _Immersed_ Vol. 3, No. 3.]

 *** link:http://www.rebreatherworld.com/general-and-new-to-rebreather-articles/5037-gradient-factors-for-dummies.html[Gradient factors for dummies, by Kevin Watts]

** _CCR: показывать установки_. При выборе этого параметра, на графике pO~2~
   профиля погружения красной линией отображаются значения установок CCR (set-point).
   См. xref:S_CCR_dives[Погружения с ребризером закрытого цикла].

** _CCR: индивидуальные значения сенсоров O~2~_. Отображать показания отдельных кислородных
   датчиков ребризера замкнутого цикла на графике pO~2~.
   См. xref:S_CCR_dives[Погружения с ребризером закрытого цикла].

* *Настройки для погружений с ребризером:*

** _Установка CCR для планировщика:_ Укажите значение установки O~2~ для планировщика. Она
   определяет начальную установку PO~2~ для отдельно взятого погружения в его начале. Вы можете
   изменить значение установки через контекстное меню профиля погружения.


** _pSCR метаболизм O~2~:_ Для ребризеров полузамкнутого цикла указывает объем кислорода,
   потребляемый дайвером в минуту. Установите это значение для планирования погружений с ребризером
   pSCR и для расчета декомпрессионных обязательств.

** _pSCR отношение сброса:_ Отношение объема сброшенного газа к объему рециркулированного.
   Используется при планировании погружений на pSCR-оборудовании.



=== Язык
Тут вы можете выбрать язык интерфейса _Subsurface_.

image::images/Pref4_f20.jpg["Рисунок: Настройки языка интерфейса",align="center"]

Вы можете использовать системные настройки языка, что в большинстве случаев
использует тот же язык, что и ваша операционная система. Если по какой-то
причине вас это не устраивает, снимите галочку и выберите подходящий язык из
списка. Вы можете использовать фильтр чтобы быстро найти нужный вам язык в
списке. Смена языка требует перезапуска _Subsurface_.




=== Сеть
Эти настройки обеспечивают связь _Subsurface_ с различными источниками данных в Интернет. Они
влияют на подключение к облачному хранилищу, импорт координат погружений из
<<S_Companion,_веб-сервиса Subsurface_>> и импорт/экспорт данных из _Divelogs.de_.
Эти настройки зависят от вашего подключения и поставщика услуг Интернет, который должен предоставить
вам необходимую информацию.


image::images/Pref5_f20.jpg["Рисунок: Настройки сети",align="center"]

Эта вкладка состоит из трех секций:

** Прокси
Если для соединения с Интернет используется прокси-сервер, вам необходимо выбрать его тип из
выпадающего списка, после чего указать адрес и порт прокси-сервера. Если прокси-сервер требует
авторизации, укажите имя пользователя и пароль. Обычно эту информацию предоставляет провайдер
Интернет-услуг.


** _Облачное хранилище_: Для того, чтобы хранить журнал погружений в облаке, вам необходимо
   указать корректный адрес электронной почты и пароль. Это позволит _Subsurface_ отправить вам
   PIN-код и подготовить хранилище. Дополнительно к этому вам предлагаются два параметра:
   - _Фоновая синхронизация_ позволяет автоматически синхронизировать журнал в облако, в то время
   как вы выполняете другие задачи внутри _Subsurface_.
   - _Локальное хранение пароля_ сохраняет пароль на вашем компьютере. Обратите внимание, что
   пароль хранится в незашифрованном виде.


** _Веб-сервис Subsurface_: при регистрации в <<S_Companion,веб-сервисе _Subsurface_>>, вам
   генерируется длинный и труднозапоминаемый ключ. Этот ключ необходимо встравить в это поле.
   Поставьте галочку в поле _Сохранять ID пользователя_, чтобы сохранить этот ключ на вашем
   компьютере.


[[S_Facebook]]
=== Соединение с _Facebook_
Эта вкладка позволяет войти в _Facebook_ для дальнейшей публикации погружений в этой социальной
сети.

image::images/Pref6_f20.jpg["Рисунок: Панель авторизации Facebook",align="center"]

При указании  корректных логина и пароля _Facebook_ вы сможете публиковать профили погружений и
комментарии к ним в своей хронике. Если вы закроете _Subsurface_, связь с _Facebook_ будет
разорвана. Параметр "Запомнить соединение с Subsurace" на текущий момент ни на что не влияет.
См. подробнее в главе xref:S_facebook[Экспорт информации о погружении в _Facebook_].



=== Геопоиск

_Subsurface_ предоставляет возможность геопоиска местоположений по GPS координатам (
выбранным на карте, введенным вручную либо полученным из вспомогательного приложения)
в Интернет. Очевидно, что эта функция работает только при наличии интернет-соединения.
У вас есть возможно указаться формат названия дайв-сайта, например _Страна/Область/Город_
(см. рисунок ниже).


image::images/Pref7_f20.jpg["Рисунок: Настройки геопоиска",align="center"]

[[S_DivePlanner]]
== Планировщик _Subsurface_
Планировщик погружений _Subsurface_ доступен из главного меню _Журнал ->
Планировщик_. Расчеты азотного насыщения осуществляются по алгоритму Бюльмана
ZH-L16 с добавлением градиент-факторов за авторством Эрика Бейкера.


****
[icon="images/icons/warning2.png"]
[WARNING]

Планировщик _Subsurface_ ЯВЛЯЕТСЯ ЭКСПЕРИМЕНТАЛЬНЫМ и предполагает, что вы
знакомы с пользовательским интерфейсом программы. Вы можете использовать
планировщик только при условиях:

- Вы обучены планировать погружения и делали это ранее.
- План погружения находится в пределах ваших сертификатов.
- Планировщик делает расчеты для усредненного человека и не принимает во
внимание ваши индивидуальные психологическое и физическое состояние и образ
жизни.
- Безопасность плана очень зависит от того, как вы используете планировщик.
- Вы знакомы с пользовательским интерфейсом _Subsurface_.
- Если вы не уверены в выше изложенном, вам не следует
использовать планировщик.

****

=== Экран планировщика

Как и журнал _Subsurface_, экран планировщика разделен на несколько областей
(см. рисунок ниже). Установочные параметры плана задаются в левой части
экрана. Эти параметры разделены на несколько групп: Доступные газы, Скорости, Планирование, Газы, Погружение.

В правой верхней части экрана находится профиль планируемого погружения,
который можно менять только с помощью мыши. Это делает использование
планировщика очень простым.

В правой нижней части экрана находится текстовая область _Детальный план
погружения_. В ней показываются все детали плана и предупреждения.


image::images/PlannerWindow1_f20.jpg["Рисунок: Начальные экран планировщика",align="center"]


=== Пример планирования погружения на открытом цикле

- В левой нижней части экрана планировщика расположен выпадающий список (на рисунке ниже обведен синей линией), предоставляющий варианта типа погружения:
 ** Открытый цикл (по умолчанию)
 ** Ребризер замкнутого цикла (CCR)
 ** Пассивный ребризер полузамкнутого цикла (pSCR)

- Выберите режим Открытого цикла.
- Удостоверьтесь, что начальные параметры погружения в верхней левой части
  экрана введены правильно. Они включают: начальные дата и время погружения,
  атмосферное давление в точке погружения. Давление может быть задано как
  высота в метрах над уровнем моря, считая атмосферное давление равным 1.013 бар.

- В таблице, озаглавленной _Доступные газы_, добавьте информацию об
  используемых баллонах и составах смесей. Сделать это можно таким же образом,
  как и в случае <<cylinder_definitions,добавления баллонов к погружению>>. Выберите
  тип баллона из выпадающего списка, укажите рабочее давление, Если поле
  процентного содержания кислорода (O~2~%) пустое, то эта смесь считается
  воздухом. В противном случае введите концентрацию кислорода/гелия.
  Дополнительные баллоны можно добавить нажатием на значок "+".


- Профиль планируемого погружения может быть создан двумя способами:
 *  Перетаскивайте путевые точки (маленькие белые кружки), чтобы создать необходимый вам профиль.
    Дополнительные точки можно создать двойным щелчком мыши. Удалить точку можно правым щелчком мыши
    ней и выбрав пункт _Удалить эту точку_ из появившегося контекстного меню.
 *  Наиболее эффективный способ создания профиля - ввод необходимых значений в таблицу,
    озаглавленную _Путевые точки плана_. Первая строка таблицы описывает время и глубину спуска с
    поверхности. Последующие сегменты описывают донную фазу погружения. Колонка _Установка CC_ важна
    только для погружений с ребризером. Точки подъема обычно не указываются, поскольку именно их
    планировщик и должен рассчитать. Для добавления нового сегмента нажмите значок "+" в правом
    верхнем углу таблицы. Добавленные сегменты автоматически появляются на графике профиля погружения.





==== Рекреационные погружения

Планировщик _Subsurface_ предлагает изощренный способ планирования рекреационных погружений, т.е.
погружений в бездекомпрессионных пределах. Он также учитывает насыщение азотом после предыдущих
погружений. Но традиционные таблицы тоже позволяют вести расчеты по остаточному азоту. Для чего
тогда нужен планировщик в рекреационных дайвах? При использовании рекреационных таблиц во внимание
принимается максимальная глубина погружения. Однако мало какие погружения выполняются на постоянной
глубине, равной максимальной ("квадратный" профиль). Т.е. таблицы чересчур консервативны в отношении
остаточного азота после предыдущих погружений. Планировщик _Subsurface_ рассчитывает остаточное
азотное насыщение исходя из реальных профилей ранее совершенных погружений также, как это делает
дайв-компьютер во время погружения. Это означает, вы что получаете "кредит" в виде времени, не
проведенного на максимальной глубине во время предыдущих погружений, и как следствие, более долгое
время последующих погружений. Это также означает, что вы должны загрузить все предыдущие погружения
в _Subsurface_, прежде чем пользоваться планировщиком.


Для планирования погружения вам необходимо указать параметры.

- Убедитесь в правильности даты и времени планируемого погружения. Это позволит правильно вычислить
  остаточное насыщение азотом после предыдущих погружений.

- Сразу под заголовком _Планирование_ поставьте галочки в полях _Рекреационный режим_ и
  _Остановка безопасности_.

- Укажите объем баллонов, тип смеси (воздух или % кислорода) и начальное давление в таблице
  _Доступные смеси_ в левой верхней части планировщика.


- Планировщик посчитает достаточно ли указанных газов для выполнения погружения. Для того, чтобы
  результат был реалистичным, в разделе _Газы_ укажите ваш _SAC на дне_. Разумные значения лежат
  в интервале от 15 до 30л/мин (для новичков и сложных погружений ближе к 30л/мин)


- Укажите газовый резерв, который должен оставаться в баллоне в конце донной части погружения
  непосредственно перед подъемом. Зачастую это 50 бар. Этот резерв может понадобиться при всплытии
  случись необходимость поделиться воздухом с вашим партнером. Нельзя сколько точно газа может
  понадобиться, это зависит от глубины подъема и скорости. Поэтому большинство школ предусматривают
  фиксированный резерв равный 50 или 60 барам, или 25% или 33% (правило третей).




- Укажите глубину погружения, перетаскивая путевые точки на профиле или (что лучше) задавая
  необходимые глубины в таблице _Путевые точки плана_. Для многоуровневых погружений вы также можете
  добавить новые сегменты в таблицу или создать новые путевые точки непосредственно на профиле.
  _Subsurface_ автоматически пересчитает донное время до максимального в рамках бездекомпрессионного
  предела (NDL).


- При необходимости измените скорость всплытия. Значения по умолчанию считаются безопасными для
  рекреационных дайверов.

Профиль в планировщике погружений отражает максимальное время погружения в бездекомпрессионных
пределах согласно алгоритму Бюльмана ZH-L16, а также параметрам газа и глубины, как описано выше.
_Subsurface_ позволяет быстро оценить длительность погружения как функцию глубины, учитывая
азотное насыщение после предыдущих дайвов. План также включает оценку расхода газов исходя из
установок в таблице _Доступные смеси_. Если начальное давление в баллоне установлено в 0, то
отображаемое время погружения является истинным NDL без учета используемой смеси. Если профиль
погружения отображается КРАСНЫМ цветом, это означает, что превышены рекреационные пределы и либо
глубина, либо время должны уменьшены.

На рисунке ниже приведен план рекреационного погружения на 30 метров. Несмотря на то, что бездекомрпессионный
предел (NDL) составляет 23 минуты, время погружения ограничено количеством воздуха. Текст в правой
нижней части экрана сообщает о том, что необходим запас воздуха для поддержки партнера при всплытии.

image::images/rec_diveplan.jpg["Рисунок: План рекреационного погружения",align="center"]

==== Нерекреационные погружения на открытом цикле, включая декомпрессию

Нерекреационные погружения подразумевают превышение бездекомпрессионных пределов и/или использование
нескольких дыхательный смесей. Планирование таких погружение состоит из трех фаз:

*а) Управление азотом*: включает в себя указание скоростей спуска и всплытия, а
также деко-модели (GFLow, GFHigh или степень консерватизма) в секциях _Скорость_
и _Планирование_ в левой нижней части экрана. Выберите одну из двух поддерживаемых
деко-моделей: Бюльман или VPM-B. Для модели Бюльмана необходимо указать градиент-факторы
(GFLow и GFHigh).  Изначально значения GFLow и GFHigh берутся из настроек _Subsurface_,
однако, если вы их поменяли в планировщике, значения по умолчанию в настройках не
затрагиваются. Значения градиент-фактора влияют на расчет потолка и его глубину.
Слишком низкие значения GFLow ведут к ранним и более глубоким деко-остановкам.
 ** Подробнее читайте в xref:S_GradientFactors[настройках градиент-фактора] и внешних источниках:

При выборе VPM-B модели необходимо указать уровень консерватизма в диапазоне от 0 (наименее
консервативный) до 4 (наиболее консервативный). Эта модель обычно предлагает более глубокие
остановки и зачастую делает погружения немного короче по сравнению с моделью Бюльмана. При выборе
этих моделей помните, что это не реальные физиологические, а математические модели, которые
похоже работают на практике.

Вы можете найти больше информации во внешних источниках:

 * link:http://www.tek-dive.com/portal/upload/M-Values.pdf[Understanding M-values by Erik Baker, _Immersed_ Vol. 3, No. 3.]
 * link:http://www.rebreatherworld.com/general-and-new-to-rebreather-articles/5037-gradient-factors-for-dummies.html[Gradient factors for dummies, by Kevin Watts]
 * link:http://www.amazon.com/Deco-Divers-Decompression-Theory-Physiology/dp/1905492073/ref=sr_1_1?s=books&ie=UTF8&qid=1403932320&sr=1-1&keywords=deco+for+divers[_Deco for Divers_, by Mark Powell (2008). Aquapress] Southend-on-Sea, UK. ISBN 10: 1-905492-07-3.
Превосходный обзор декомпрессионных моделей Бюльмана и VPM-B.

Скорость всплытия важна в фазе рассыщения в конце дайва и указывается для
нескольких диапазонов глубины, принимая во внимание среднюю глубину как точку
отсчета. Средняя глубина отображается на профиле красной горизонтальной линией.
Скорость всплытия на больших глубинах находится обычно в пределах 8-12 м/мин,
в то время, как возле поверхности она обычно составляет 4-9 м/мин. Скорость
спуска также указывается. Если установлен флажок _Падение к первой глубине_,
то в фазе спуска будет использоваться максимальная скорость, указанная в секции _Скорости_.

*б) Управление кислородом*: в секции _Газы_ необходимо указать максимальное
парциальное давление кислорода в донной фазе (_pO₂ на дне_) и во время
декомпрессионных остановок (_pO₂ на деко_). Обычно используются значения
1.4 и 1.6 бар соответственно, и парциальное давление 1.6 бар является
максимально допустимым. Настройки pO₂ и глубина замены смеси могут быть также
отредактированы в секции _Доступные смеси_. Обычно планировщик принимает
решение о переключении на новую смесь, когда при подъеме парциальное давление
кислорода в этой смеси опускается ниже значения 1.6 бар.

*в) Управление расходом газов:* Вам необходимо контролировать и учитывать
объем доступных газов, чтобы безопасно вернуться на поверхность,и , возможно,
поделиться с напарником. В секции _Газы_ укажите ваш лучший (но при этом
достаточно консервативный) поверхностный расход воздуха (SAC, иногда именуемый
RMV) в л/мин (в настоящий момент используется только метрическая система). Укажите
SAC отдельно для донной фазы (_SAC на дне_) и для остановок декомпрессии (_SAC
на деко_). Обычно это значения находятся в пределах 20-30 л/мин. Для более
точного управления расходом газов не нужно строить догадки, регулярно
контролируйте свой SAC, погружаясь в разных условиях и с разным снаряжением.
Планировщик рассчитывает общий расход газов за все время погружения и выдаст
предупреждение если расход превысит доступный объем газов. Для вашей
безопасности всегда оставляйте резерв газов на случай непредвиденных обстоятельств.
В техническом дайвинге такой резерв может составлять до 66% от общего объема газов.

И, наконец, вы можете приступить к планированию времени и глубины
погружения. Для этого _Subsurface_ предоставляет уникальный графический
интерфейс. Принцип его работы такой же, как при ручном добавлении погружения в
журнал. После активации планировщика вам будет предложен начальный профиль
погружения на 15 м в течение 40 минут. Путевый точки можно перетаскивать
мышью или с помощью стрелок клавиатуры, Для создания новой точки, дважды
щелкните на линии сегмента. При превышении какого-либо предела (парциальное
давление, объем), _Subsurface_ изменит цвет фона профиля с
ГОЛУБОГО на КРАСНЫЙ.



Каждая путевая точка на профиле создает запись в таблице _Путевые точки
плана_ в левой части экрана. Проверьте, чтобы значение в колонке _Используемый
газ_ соответствовало одной из смесей, указанных в таблице _Доступные смеси_.
Добавьте необходимые путевые точки с тем, чтобы профиль соответствовал вашему
плану, т.е. присутствовал донная фаза, глубокие остановки (если планируются).
Путевые точки всплытия _Subsurface_ расставит сам с учетом декомпрессионных
обязательств.
Путевые точки можно двигать с помощью мыши или стрелок на клавиатуре.
Точки можно редактировать и создавать непосредственно в таблице
_Путевые точки плана_. На самом деле, вы можете спланировать погружение
пользуясь только этой таблицей.

Укажите замену баллонов/смесей так же, как это делается в случае
<<S_CreateProfile,ручного создания профиля погружения>>. События замены смесей
должны соответствовать баллонам и смесям из таблицы _Доступные смеси_. При
наличии нескольких смесей, _Subsurface_ будет автоматически предлагать замену,
однако вы можете удалить и добавить событие самостоятельно, вызвав контекстное
меню точки правым щелчком мыши.


Ненулевое значение в колонке "Установка СС" в таблице путевых точек означает корректное значение
установки и что погружение на этом сегменте выполняется на CCR-ребризере. Если последний вручную
введенный сегмент выполняется на CCR, декомпрессионные процедуры рассчитываются согласно значения
указанной установки. Если же последний сегмент выполняется на открытом цикле (значение установки кислорода
равно нулю), декомпрессионные обязательства рассчитываются в режиме ОЦ. Замена газов предусмотрена
только для открытого цикла.



Ниже на рисунке приведен пример плана погружения на 45м с использованием EAN26
и всплытием на EAN50, используя настройки, описанные выше:

image::images/DivePlanner2_f20.jpg["Рисунок: Планирование погружения: настройки",align="center"]

После окончания планирование, вы можете сохранить план, нажав на кнопку
_Сохранить_. План появится в списке погружений.


*Детальный план погружения*

В правой нижней части экрана планировщика находится текстовая область с
подробным словесным описанием плана погружения. Вы можете изменить его
детализацию с помощью нескольких параметров в секции _Заметки погружения_.
Если выбран пункт _Подробный план_, описание будет достаточно многословным.
При превышении каких-либо пределов в нижней части будет выведено
предупреждение.


При выборе пункта _Показать время сегмента_, план будет отображать время на
каждой отдельно взятой глубине. Время сегмента ВКЛЮЧАЕТ время, необходимое чтобы
перейти к заданной глубине. Однако, если выбран параметр _Показать переходы в
деко_, то время переходом показывается отдельно от времени сегментов.

=== Планирование погружений на ребризере полузамкнутого типа

Для планирования таких погружений выберите pSCR в списке, как показано на рисунке выше (список
обведен синей линией).
Параметры pSCR-погружений также задаются в *Настройках* (в главном меню выберите _Файл -> Настройки_
и вкладку _Профиль_). К этим настройкам относятся уровень метаболизма и отношение сброса (1:10 по
умолчанию). Расчеты принимают также во внимание снижение уровня кислорода в области загубника. Если
значение pO~2~ опускается ниже безопасного, в _Детальном плане_ будет отображено предупреждение.
Обычно pSCR погружение выполняется с одним основным баллоном и несколькими аварийными. Поэтому
заполнение таблицы доступных баллонов и путевых точек очень похоже на погружение CCR, описанное
ниже. Однако для pSCR-погружений не указываются установки кислорода.  Ниже приведен план погружения
с использованием pSCR. Он очень похож на план CCR ниже, но обратите внимание на более долгий подъем,
что связано с более низким уровнем кислорода, вызванным снижением его количества в области загубника.



image::images/Planner_pSCR1_f20.jpg["Рисунок: планирование pSCR-погружения",align="center"]


=== Планирование погружений на ребризере замкнутого цикла

Для планирования таких погружений выберите CCR в списке, как показано на рисунке выше (список
обведен синей линией).

*Доступные смеси*: добавьте в таблицу доступных смесей информацию о баллонах дилуэнта и аварийных
газах. НЕ вводите информацию о кислородном баллоне, поскольку он подразумевается при использовании
режима CCR.

*Ввод установок*: укажите значение установки по умолчанию в *Настройках* приложения (в главном меню
выберите _Файл -> Настройки_ и вкладку _Профиль_). По умолчанию для всех добавляемых сегментов
точка установки берется из настроек, он вы можете поменять их по своему желанию. Значение равное
нулю означает, что дайвер перешел на открытый цикл. Декомпрессия всегда рассчитывается используя
последнюю установку вручную добавленного сегмента. Чтобы запланировать переход на ОЦ во время подъема,
добавьте одноминутный сегмент со значением установки равным нулю. Декомпрессионный алгоритм
автоматически не меняет смеси в режиме CCR (когда указана положительная установка),
но делает это для всплытий на открытом цикле.


Профиль погружения на ребризере замкнутого типа может выглядеть так:

image::images/Planner_CCR1_f20.jpg["Рисунок: Планирование CCR-погружения, настройка",align="center"]

Обратите внимание, что в _Детальном плане погружения_ расход газа для CCR-сегментов не рассчитывается
и всегда равен нулю.

[[S_Replan]]
=== Изменение существующего плана

Обычно, после сохранения плана, он доступен в *Списке погружений*. _Subsurface_ не предоставляет
возможности изменить план из списка. Для того, чтобы изменить план, выберите его в списке. Затем в
главном меню выберите _Журнал -> Перепланировать_. Это действие откроет планировщик с существующим
планом, позволяя изменить его.


В случае перепланирования у вас появляется возможность *Сохранить новый* план, для того, чтобы
не перезаписывать старый. Если новая копия сохраняется с тем же временем, что и старый план, то они
считаются двумя версиями одного плана и не влияют друг на друга при вычислении декомпрессионных
обязательств.


=== Планирование повторных погружений

_Subsurface_ позволяет планировать повторные погружения при условии, что вы
корректно укажете дату и время начала. При этом учитывается остаточное
насыщение после предыдущего погружения.



Если вы только закончили долгое/глубокое погружение и планируете новое,
выберите последний дайв в списке погружение и активируйте планировщик
_Subsurface_. В зависимости от времени начала планируемого дайва, остаточное
насыщение предыдущего погружения будет принято во внимание и план будет
построен с учетом этих ограничений.

Если вы используете одну стандартную конфигурацию (например, как в GUE), то
можно создать шаблонное погружение. Чтобы спланировать погружение с этой
конфигурацией, выберите шаблонное погружение в списке и активируйте планировщик:
для нового плана будет использоваться конфигурация из шаблона.

=== Печать плана погружения

Вы можете распечатать план погружения с тем чтобы взять его с собой под воду, нажав кнопку _Печать_.
Альтернативный способ - скопировать текст из _Детального плана погружения_ и вставить его в в ваш
любимый текстовый редактор.

План погружения имеет много общего с журналом обычного погружения (профиль, примечания и т.д.).
После сохранения плана, его детали и расчет по газам сохраняются в *Примечаниях*. Во время
планирования он может быть распечатан по нажатию кнопки _Печать_. Однако после сохранения план
выглядит как обычный дайв.






== Пункты главного меню Subsurface

В этой главе описываются пункты главного меню и их функции. Некоторые пункты
ссылаются на соответствующие главы данного руководства для быстрой навигации.


=== Файл
- <<S_NewLogbook,_Новый журнал_>> - Закрывает текущий открытый журнал и
  создает новый.
- _Открыть журнал_ - Вызывает диалог выбора файла для открытия
   журнала.
- _Открыть облачное хранилище_ - Загружает ранее сохраненный журнал из
   <<S_Cloud_storage,_облачного хранилища_>>.
- _Сохранить_ - Сохраняет текущий открытый журнал.
- _Сохранить в облаке_ - Сохраняет журнал в <<S_Cloud_storage,_облачном хранилище_>>.
- _Сохранить как_ - Сохраняет текущий журнал в файл с новым именем
- _Закрыть_ - Закрывает текущий журнал.
- <<S_ExportLog,_Экспорт_>> - экспортирует текущий журнал или выбранные
  погружения в один из форматов.
- <<S_PrintDivelog,_Печать_>> - печать журнала или выбранных погружений.
- <<S_Preferences,_Настройки_>> - настройка параметров _Subsurface_
- <<S_FindMovedImages, _Найти перемещенные фото_>> - Если ранее загруженные фотографии были перенесены
  в другое место, найти их и обновить их местоположение в соответствующих погружениях.
- _Выход_ - Выйти из _Subsurface_

=== Импорт
- <<S_ImportDiveComputer,_Импорт из дайв-компьютера_>> - импорт погружений
  из дайв-компьютера
- <<Unified_import,_Импорт журналов_>> - импорт погружений из сторонних
  форматов
- <<S_Companion,_Импорт координат_>> - загрузка координат погружений из
  мобильного помощника _Subsurface_.
- <<S_ImportingDivelogsDe,_Импорт с сайта divelogs.de_>> - импорт погружений
  из интернет-сервиса _www.Divelogs.de_.

=== Журнал
- <<S_EnterData,_Добавить погружение_>> - ручное добавление погружения.
- _Редактировать погружение_ - Позволяет отредактировать погружение, введенное вручную.
- <<S_DivePlanner,_Планировщик_>> - запускает планировщик погружений.
- <<S_Replan,_Перепланирование погружения_>> - Редактировать существующий план погружения
- <<S_CopyComponents,_Копировать параметры погружения_>> - скопировать указанные поля погружения
  в буфер обмена
- _Вставить параметры погружения_ - вставить из буфера параметры, скопированные ранее,
   в выделенные погружения
- <<S_Renumber,_Перенумеровать_>> - перенумерация списка погружений.
- <<S_Group,_Авто-группировка_>> - автоматическая группировка погружений в
  поездки.
- <<S_DeviceNames,_Мои дайв-компьютеры_>> - редактирование названий
  дайв-компьютеров.
- <<S_Filter,_Фильтр погружений_>> - фильтрация списка погружений

=== Вид
- <<S_ViewPanels,_Все_>> - показать все четыре панели _Subsurface_.
- <<S_ViewPanels,_Список_>> - показать только список погружений.
- <<S_ViewPanels,_Профиль_>> - показать только профиль погружения.
- <<S_ViewPanels,_Информация_>> - показать только информационную панель.
- <<S_ViewPanels,_Карта_>> - показать только карту.
- _Статистика по годам_ - показать статистику журнала погружений по годам и
  месяцам.
- _Предыдущий компьютер_ - переключиться на предыдущий компьютер.
- _Следующий компьютер_ - переключиться на следующий компьютер.
- _Полный экран_ - переключение полноэкранного режима.



=== Поделиться
- - <<S_Facebook,_Facebook_>> - поделиться информацией о выбранном погружении в вашей хронике на Facebook.


=== Помощь
- _О программе_ - показывает информационное окно с указанием версии
  _Subsurface_
- _Проверить обновления_ - проверяет доступность новой версии на
  http://subsurface-divelog.org/[_веб-сайте Subsurface].
- <<S_UserSurvey,_Опрос пользователей_>> - помогите нам улучшить _Subsurface_, заполнив опросник.
- _Руководство пользователя_ - открывает этот документ в новом окне.




[[APPENDIX_A]]
== ПРИЛОЖЕНИЕ А: Настройка ОС для импорта из дайв-компьютера

=== Удостоверьтесь, что установлены необходимые драйверы
[icon="images/icons/drivers.jpg"]
[NOTE]
Операционной системе вашего настольного компьютера необходим соответствующий
драйвер для с связи с дайв-компьютером в зависимости от того, каким образом
дайв-компьютер подключен (Bluetooth, USB, инфракрасный порт).

    * В Linux вам может понадобиться загрузить соответствующий модуль ядра.
	  Большинство дистрибутивов делают это автоматически, так что вам не нужно
	  предпринимать каких-то действий. Однако в некоторых случаях, например
	  для ИК-устройств, вам придется загрузить дополнительный драйвер.


	* В случае Windows OC сама предложит загрузить корректный драйвер сразу
	  после подключения дайв-компьютера к USB-порту.


	* Пользователям MAC возможно придется самим найти соответствующий драйвер.
	  Например, для Mares Puck и других дайв-компьютеров, использующих
	  интерфейс последовательного USB-порта на основе чипа Silicon Labs CP2101,
	  необходимый драйвер с именем _Mac_OSX_VCP_Driver.zip_ можно взять на
	  сайте http://www.silabs.com/support/pages/document-library.aspx?p=Interface&f=USB%20Bridges&pn=CP2101[Silicon Labs document and software repository].

[[S_HowFindDeviceName]]
=== Как определить имя USB-устройства и получить права доступа
[icon="images/icons/usb.jpg"]
[NOTE]
Когда вы подключаете дайв-компьютер с помощью USB-кабеля, обычно _Subsurface_
предлагает либо список устройств (точек монтирования в случае Uemis Zurich),
либо делает список недоступным, если имя устройства не требуется вовсе. В
редких случаях, если это не работает, попробуй следовать этим инструкциям,
чтобы определить имя устройства самостоятельно:


.Windows:

Простым перебором попробуйте COM1, COM2 и т.д. Список содержит все
подключенные COM-устройства.

.Mac OS:

Список должен содержать все подключенные устройства.

.Linux:

Наиболее точный способ определить название порта:

 - Отсоедините USB-кабель от дайв-компьютера
 - Откройте терминал
 - Введите команду 'dmesg' и нажмите Enter
 - Подсоедините USB-кабель к дайв-компьютеру
 - Введите команду 'dmesg' и нажмите Enter

Вы должны увидеть схожие сообщения:

	usb 2-1.1: new full speed USB device number 14 using ehci_hcd
	usbcore: registered new interface driver usbserial
	USB Serial support registered for generic
	usbcore: registered new interface driver usbserial_generic
	usbserial: USB Serial Driver core
	USB Serial support registered for FTDI USB Serial Device
	ftdi_sio 2-1.1:1.0: FTDI USB Serial Device converter detected
	usb 2-1.1: Detected FT232BM
	usb 2-1.1: Number of endpoints 2
	usb 2-1.1: Endpoint 1 MaxPacketSize 64
	usb 2-1.1: Endpoint 2 MaxPacketSize 64
	usb 2-1.1: Setting MaxPacketSize 64
	usb 2-1.1: FTDI USB Serial Device converter now attached to ttyUSB3
	usbcore: registered new interface driver ftdi_sio
	ftdi_sio: v1.6.0:USB FTDI Serial Converters Driver

Третья строчка снизу показывает, что FTDI USB-адаптер обнаружен и подключен
как устройство +ttyUSB3+. Для импорта в _Subsurface_ используйте имя
+/dev/ttyUSB3+.


Убедитесь, что у вас есть права на запись в устройство:

В Unix-подобных операционных системах доступ к USB-портам разрешен только
пользователям, которые являются членами группы +dialout+. Если пользователь не
root, то он возможно не входит в эту группу и не сможет использовать USB-порт.
Допустим, что имя пользователя 'johnb'.


 - Под пользователем root выполните команду +usermod -a -G dialout johnb+ (для
   пользователей Ubuntu: +sudo usermod -a -G dialout johnb+)
 - Выполните команду +id johnb+. Она отображает список всех групп, к которым
   принадлежит указанный пользователь. Убедитесь, что в списке групп
   присутствует группа +dialout+.
 - В некоторых случаях (например, Ubuntu) может потребоваться закрыть текущий сеанс
   и войти в систему заново.




Зная название устройства (например, +dev/ttyUSB3+) и имея права на доступ к
USB-порту, у вас должно получиться импортировать погружения из
дайв-компьютера.



[[S_HowFindBluetoothDeviceName]]
=== Настройка Bluetooth-устройств
[icon="images/icons/bluetooth.jpg"]
[NOTE]
Для дайв-компьютеров с Bluetooth-интерфейсом (например, Heinrichs Weikamp Frog
или Shearwater Predator, Petrel или Nerd), процедура получения имени устройства
отличается от той, что описана выше:


 * *После включения Bluetooth на дайв-компьютере, убедитесь что он находится в режиме выгрузки.*

По вопросам сопряжения дайв-компьютера обратитесь к документации
производителя. В случае Shearwater Predator/Petrel/Nerd выберите _Dive Log ->
Upload Log_ и ожидайте сообщения _Wait PC_.

 * *Сопряжение настольного и дайв-компьютера*

==== Windows:

Bluetooth вероятнее всего уже включен. Для сопряжения устройств перейдите в
_Панель управления->Устройства Bluetooth->Добавить беспроводное устройство_.
Вам будет представлено окно, в котором должен показываться ваш дайв-компьютер.
Нажмите на нем правой кнопкой мыши и из контекстного меню выберите
_Свойства->COM порты_, чтобы определить название порта. Если вам показываются
несколько портов, выберите тот, который помечен как "Исходящий".

Для импорта в _Subsurface_ этот порт уже должен быть в списке. Если его там
нет, то введите имя порта вручную.

Примечание: Если у вас возникают проблемы с загрузкой из дайв-компьютера после
использования других программ, попробуйте удалить существующее сопряжение.

==== MacOS:

Нажмите на значке Bluetooth в строке меню и выберите _Настроить устройство
Bluetooth..._. Дайв-компьютер должен появиться в списке устройств. Выберите
его и выполните процедуру сопряжения. Этот шаг потребуется выполнить один
раз.

После завершения сопряжения, устройство должно показываться в _Subsurface_ в
списке 'Устройство или точка монтирования' в диалоге импорта.

==== Linux:
Удостоверьтесь, что Bluetooth включен на вашем настольном компьютере. Процесс
сопряжения в этом случае достаточно прост. Например, в Gnome3 в правом верхнем
углу рабочего стола должен быть значок Bluetooth. Выберите 'Настроить новое
устройство'. В появившемся окне выберите дайв-компьютер и выполните
сопряжение. Если у вас запросят PIN-код, попробуйте ввести '0000'.



Установка соединения для загрузки погружений из дайв-компьютеров с интерфейсом Bluetooth, таких,
как _Shearwater Petrel_, пока что не автоматизирована и в общем случае потребует от вас работы
в коммандной строке. Этот процесс состоит из трех шагов.

 - Включите Bluetooth-адаптер и установите сопряжение с дайв-компьютером
 - Установите RFCOMM-соединение
 - Загрузите погружения с помощь _Subsurface_

Убедитесь, что дайв-компьютер в режиме выгрузки. На _Shearwater Petrel_, _Petrel 2_ и _Nerd_ выберите
в меню 'Dive Log', затем 'Upload Log'. На дисплее высветится 'Initializing', 'Wait PC 3:00' и
начнется обратный отсчет. После установки соединения на дисплее высветится 'Wait CMD ...' и
отсчет продолжится. Во время загрузки погружений на дисплее отображается надпись 'Sending', а
затем 'Sent Dive'.

Чтобы установить соединение, вам нужно получить полномочия суперпользователя с помощью команд
+sudo+ или +su+. Для загрузки погружений у пользователя должны быть полномочия. В большинстве
Linux-дистрибутивов пользователю достаточно быть членом группы dialout (что также действительно
и для дайв-компьютеров с USB-интерфейсом). В командой строке введите команду:

+sudo usermod -a -G dialout username+

После этого завершите сеанс и войдите в систему заново.

==== Включение Bluetooth-контроллера и сопряжение с дайв-компьютером

Попробуйте настроить Bluetooth-контроллер и сопряжение с дайв-компьютером посредством штатного
графического интерфейса операционной системы. После перевода дайв-компьютера в режим выгрузки,
щелкните по значку Bluetooth в области уведомлений и выберите 'Добавить новое устройство'. Дайв-
компьютер должен появиться в списке. Если у вас запросяи пароль, введите 0000. Запишите или скопируйте
MAC-адрес дайв-компьютера, он понадобится позже (адрес имеет вид 00:11:22:33:44:55).

Если этот метод не сработал, попробуйте сделать сопряжение из командной строки. Откройте терминал и
используйте +hciconfig+, чтобы проверить статус Bluetooth-контроллера:

	$ hciconfig
	hci0:	Type: BR/EDR  Bus: USB
		BD Address: 01:23:45:67:89:AB  ACL MTU: 310:10  SCO MTU: 64:8
		*DOWN*
		RX bytes:504 acl:0 sco:0 events:22 errors:0
		TX bytes:92 acl:0 sco:0 commands:21 errors:0

Тут мы видим, что контроллер с адресом 01:23:45:67:89:AB подключен как hci0. Его состояние 'DOWN',
т.е. выключен. Дополнительные контроллеры будут представлены как hci1, и т.д. Теперь необходимо
включить питание контроллера:

	sudo hciconfig hci0 up auth+  (enter password when prompted)
	hciconfig
	hci0:  Type: BR/EDR  Bus: USB
		BD Address: 01:23:45:67:89:AB  ACL MTU: 310:10  SCO MTU: 64:8
		*UP RUNNING PSCAN AUTH*
		RX bytes:1026 acl:0 sco:0 events:47 errors:0
		TX bytes:449 acl:0 sco:0 commands:46 errors:0

Удостоверьтесь, что статус контроллера теперь содержит +'UP', 'RUNNING' и 'AUTH'+.

Если на компьютере несколько Bluetooth-контроллеров, остальные можно выключиться, чтобы избежать путаницы:

	sudo hciconfig hci1 down

Следующий шаг: установить доверенное сопряжение с дайв-компьютером. В дистрибутивах с установленным
пакетом BlueZ (например, Fedora 22) вы можете использовать +blutootctl+, который имеет собственную подсказку:

	bluetoothctl
	[NEW] Controller 01:23:45:67:89:AB localhost.localdomain [default]
	[bluetooth]# agent on
	Agent registered
	[bluetooth]# default-agent
	Default agent request successful
	[bluetooth]# scan on                        <----теперь переведите дайв-компьютер в режим выгрузки
	Discovery started
	[CHG] Controller 01:23:45:67:89:AB Discovering: yes
	[NEW] Device 00:11:22:33:44:55 Petrel
	[bluetooth]# trust 00:11:22:33:44:55        <----вы можете использовать клавишу TAB для автодополнения MAC-адреса
	[CHG] Device 00:11:22:33:44:55 Trusted: yes
	Changing 00:11:22:33:44:55 trust succeeded
	[bluetooth]# pair 00:11:22:33:44:55
	Attempting to pair with 00:11:22:33:44:55
	[CHG] Device 00:11:22:33:44:55 Connected: yes
	[CHG] Device 00:11:22:33:44:55 UUIDs: 00001101-0000-1000-8000-0089abc12345
	[CHG] Device 00:11:22:33:44:55 Paired: yes
	Pairing successful
	[CHG] Device 00:11:22:33:44:55 Connected: no

Если будет запрошен пароль, введите 0000. Ничего страшного в том, что в последней строке содержится
фраза 'Connected: no', главное тут - сообщение строкой выше 'Pairing successful'.

Если в системе установлен пакет BlueZ версии 4 (например, в Ubuntu 12.04 до 15.04), то скорее всего
в ней нет +bluetoothctl+, но есть утилита +bluez-simple-agent+ или просто +simple-agent+.

	hcitool -i hci0 scanning
	Scanning ...
		00:11:22:33:44:55       Petrel
		bluez-simple-agent hci0 00:11:22:33:44:55

После сопряжения необходимо установить RFCOMM-соединение.

==== Установка RFCOMM-соединения

Для установки RFCOMM-соединения используйте следующую команду:

+sudo rfcomm -i <controller> connect <dev> <bdaddr> [channel]+

- <controller> - Bluetooth-контроллер, +hci0+.
- <dev> - устройство RFCOMM, +rfcomm0+
- <bdaddr> - MAC-адрес дайв-компьютера, +00:11:22:33:44:55+
- [channel] - Bluetooth-канал дайв-компьютера, к которому на необходимо подключиться.

Если канал не указать, по умолчанию будет выбран 1. Основываясь на сообщениях наших пользователей,
ниже приведен список каналов для различных моделей дайв-компьютеров:

- _Shearwater Petrel 1_: канал 1
- _Shearwater Petrel 2_: канал 5
- _Shearwater Nerd_: канал 5
- _Heinrichs-Weikamp OSTC Sport_: канал 1

Таким образом, чтобы подключить _Shearwater Petrel 2_, переведите его в режим выгрузки и введите команду:

	sudo rfcomm -i hci0 connect rfcomm0 00:11:22:33:44:55 5 (если вас запросят пароль, введите 0000)

В ответ вы должны получить сообщение:

	Connected /dev/rfcomm0 to 00:11:22:33:44:55 on channel 5
	Press CTRL-C for hangup

Для подключения _Shearwater Petrel 1+ или +HW OSTC Sport+, переведите компьютер в режим загрузки и введите команду:

	sudo rfcomm -i hci0 connect rfcomm0 00:11:22:33:44:55 (если вас запросят пароль, введите 0000)
	Connected /dev/rfcomm0 to 00:11:22:33:44:55 on channel 1
	Press CTRL-C for hangup

Если номер Bluetooth-канала неизвестен, либо указанный номер не работает, определить его вам поможет
команда +sdptool records+. Ниже приведен её вывод для дайв-компьютера _Shearwater Petrel 2_:


	sdptool -i hci0 records 00:11:22:33:44:55
	Service Name: Serial Port
	Service RecHandle: 0x10000
	Service Class ID List:
		"Serial Port" (0x1101)
		Protocol Descriptor List:
		"L2CAP" (0x0100)
		"RFCOMM" (0x0003)
		Channel: 5

Если ваш дайв-компьютер не в списке, или номер канала отличается, пожалуйста, сообщите об этом
разработчикам _Subsurface_ через форум пользователей или список рассылки _subsurface@subsurface-divelog.org_.

==== Загрузка погружений в Subsurface
После установки RFCOMM-соединения и пока идет обратный отсчет режима выгрузки на дайв-компьютере,
перейдите в _Subsurface_, выберите _Импорт -> Импорт из дайв-компьютера_, укажите производителя
(например, _Shearwater_), модель (_Petrel_), устройство или точку монтирования (_/dev/rfcomm0_) и
и нажмите _Загрузить_.

[[APPENDIX_B]]

== ПРИЛОЖЕНИЕ Б: Настройка дайв-компьютеров для импорта

[[S_ImportUemis]]
=== Импорт погружений из Uemis Zurich

[icon="images/icons/iumis.jpg"]
[NOTE]
_Subsurface_ импортирует информацию, хранящуюся в SDA (внутренняя файловая
система Uemis), включая данные о точках погружения и снаряжении. Информация о
напарниках в данный момент недоступна. Сопряжение схоже с USB-компьютерами (и
при этом Uemis заряжается от USB-порта). Главное отличие состоит в том, что
вам нужно указывать не имя порта, а точку монтирования файловой системы
UEMISSDA. В Windows это буква диска (зачастую E: или F:), в Mac это
'/Volumes/UEMISSDA', а в Linux это зависит от дистрибутива. Например, в Fedora
это '/var/run/media/<имя_пользователя>/UEMISSDA'. В любом случае _Subsurface_
предложить вам варианты в выпадающем списке на диалоге импорта.






После того, как вы указали точку монтирования, выполните загрузку. Uemis
Zurich имеет одно ограничение (это ограничение прошивки дайв-компьютера, а не
_Subsurface_) - невозможно загрузить более 40-50 погружений за один раз,
происходит переполнение SDA. Обычно это происходит при первой загрузке. Если
вы импортируете погружения ежедневно или даже после поездки, емкости SDA
вполне достаточно.
Если _Subsurface_ показывает сообщение о переполнении памяти дайв-компьютера,
решение достаточно простое: отключите SDA, выключите и включите
дайв-компьютер, и подключите заново. Начните импорт заново и _Subsurface_
продолжит загрузку с того места где она прервалась. Возможно вам придется
повторить процедуру несколько раз в зависимости от того, сколько погружений
записано в памяти Uemis Zurich.



[[S_ImportingGalileo]]
=== Импорт погружений из Uwatec Galileo

[icon="images/icons/Galileo.jpg"]
[NOTE]
Компьютеры Uwatec Galileo используют беспроводной инфракрасный канал
связи (IrDA). Со стороны настолько ПК используется USB-брелок с поддержкой
протокола последовательного обмена через IrDA (SIR) на контроллере MSC7780
производства компании MosChip.
В Linux ядро изначально поддерживает протокол последовательного обмена через
IrDA, однако вам придется дополнительно загрузить драйвер для коммуникации с
дайв-компьютером. Самый простой путь: установить пакет irda-tools,
предварительно загрузив его с сайта
http://irda.sourceforge.net/docs/startirda.html[Linux IrDA Project]. После
установки, пользователем *root* выполните в консоли команду +irattach irda0+.




После этого _Subsurface_ распознает дайв-компьютер и вы можете выполнить
импорт.

С Windows ситуация схожая. Драйвера для контроллера MCS7780 доступны на
нескольких интернет-сайтах, например на
http://www.drivers-download.com/Drv/MosChip/MCS7780/[www.drivers-download.com]. IrDA драйверы для
Windows для компьютеров также могут быть загружены с веб-сайта ScubaPro со страницы загрузки
программного обеспечения ScubaPro SmartTrak.

Для Apple Mac, IrDA-соединение через MCS7780 невозможно для версий OSX 10.6 и
выше.

[[S_ImportingDR5]]
=== Импорт погружений из Heinrichs Weikamp DR5

[icon="images/icons/HW_DR5.jpg"]
[NOTE]
Когда этот дайв-компьютер подключен как USB-диск, он сохраняет отдельный
UDDF-файл для каждого погружения. Выделите все файл погружения для импорта или
открытия.
Примечание: DR5 не сохраняет ни градиент-факторы, ни информацию а
деко-обязательствах, поэтому _Subsurface_ не может отобразить ее.
Отрегулируйте значения градиент-фактора в _Настройках_ _Subsurface_, чтобы
увидеть деко-обязательства на профиле, но учтите, что они вероятнее всего
будут отличаться от тех, что показывает DR5.


[[S_ImportingXDeep]]
=== Импорт погружений из xDEEP BLACK

[icon="images/icons/HW_xdeepblack.jpg"]
[NOTE]
Каждое погружение должно быть сохранено в файл формата UDDF, используя пункт меню "Export UDDF".
Если дайв-компьютер подключен как USB-устройство, то UDDF-файлы должны быть доступны в директории LOGBOOK.
Примечание: xDEEP BLACK сохраняет время NDL, но не хранит информации о градиент-факторах и декомпрессии,
и следовательно _Subsurface_ не сможет отобразить их. Установите значения градиент-фактора в _Настройках_
(вкладка _Профиль_), чтобы отобразить декомпрессионный потолок на профиле погружения, но учтите, что
вероятнее всего деко-обязательства, рассчитанные в _Subsurface_ наверняка будут отличаться от тех, что
показывает xDEEP BLACK.


=== Импорт погружений из Shearwater Predator/Petrel/Nerd используя Bluetooth

[icon="images/icons/predator.jpg"]
[NOTE]
Инструкции по загрузке погружений через Bluetooth приведены выше в главе <<S_Bluetooth,_Подключение _Subsurface_ к дайв-компьютеру через Bluetooth_>>

[[S_PoseidonMkVI]]
=== Импорт погружений из Poseidon MkVI Discovery

[icon="images/MkVI.jpeg"]
[NOTE]
Загрузка журналов погружений из MkVI осуществляется с помощью специального коммуникационного
адаптера и программного обеспечения _Poseidon PC Configuration Software_, предоставляемых при
покупке MKVI. Это программное обеспечение работает в ОС Windows и позволяет настраивать
оборудование и хранить журналы погружений. Связь между настольным и дайв-компьютером
осуществляется через инфракрасный порт. Одномоментно можно загрузить данные только одного
погружения, состоящие из трех файлов:


- Конфигурация настроек и ключевые параметры погружения (файл с расширением .txt)
- Детали погружения (файл с расширением .csv)
- Собственный формат журнала погружения (файл с расширение .cvsr).


_Subsurface_ использует файлы с расширением .txt и .csv для импорта погружения.


=== Импорт погружений из APD Inspiration CCR

[icon="images/APDComputer.jpg"]
[NOTE]
Журналы погружений APD Inspiration и похожих CCR дайв-компьютеров можно загрузить, используя
специальный коммуникационный адаптер и программное обеспечение _AP Communicator_, предоставляемые
при покупке оборудования. Просмотреть журналы на платформах Windows и Mac/OS можно, используя
_AP Log Viewer_. Вы также можете получить доступ к этим погружениям и из _Subsurface_. Для
импорта погружений APD Inspiration необходимо выполнить следующие шаги:


- Загрузите погружение используя _AP Communicator_.
- Откройте погружение в _AP Log Viewer_.
- Выберите вкладку "_Data_" в верхней части экрана.
- На экране необработанных данных нажмите на "__Copy to Clipboard_".
- Откройте текстовый редактор, например, Notepad (Windows), или TextWrangler (Mac).
- Вставьте данные из буфера обмена в редактор и сохраните файл с расширением _.APD_
- Находясь в _Subsurface_, выберите в меню _Импорт -> Импорт журналов_, чтобы открыть
  xref:Unified_import[диалог универсального импорта].
- В окне в правой нижней части выберите тип "APD-файлы"
- В списке файлов выберите тот, что вы сохранили ранее из текстового редактора. Будет представлено
  окно импорта.
- Внесите по необходимости изменения в параметры импорта, как описано в главе xref:S_ImportingCSVDives[Импорт CSV-файлов].

image::images/APD_CSVimportF22.jpg["Рисунок: Импорт файлов APD log viewer",align="center"]

- Выпадающий список в левом верхнем углу позволяет указать журнал какого именно компьютера необходимо
  импортировать. По умолчанию это первый компьютер (DC1). Вы можете последовательно импортировать
  данные погружения сначала для DC1, а потом для DC2 (при просмотре погружения в _Subsurface_ вы можете
  переключаться между дайв-компьютерами, выбрав в главном меню _Вид -> След. компьютер_).
- Нажмите кнопку _Ок_, чтобы выполнить импорт.


Журнал погружения APD должен появиться в _Subsurface_. Деко-потолок, сгенерированный Inspiration,
можно посмотреть на профиле, выбрав соответствующую кнопку на панели слева от профиля погружения.
Оборудование APD не записывает данные о давлении в баллонах, но вы можете указать их самостоятельно
на вкладке _Снаряжение_.

[[APPENDIX_C]]
== ПРИЛОЖЕНИЕ В: Импорт журнала погружений из сторонних программ

Импорт погружений из сторонних программ ведения журналов достаточно прост и
выполняется с помощью универсального импорта, доступного из главного
меню _Импорт -> Импорт журнала_. Подробнее эта функциональность описана в
xref:Unified_import[отдельной главе].
Однако в некоторых случаях может потребоваться два шага:


1. Экспорт "чужого" журнала в формат, который может быть разобран
_Subsurface_.
2. Импорт этого файла в _Subsurface_.

В этом приложении мы попытаемся рассказать как экспортировать погружения из
сторонних программ. В большей части это касается Linux и Windows.



[[S_ImportingDivesSuunto]]
=== Экспорт погружений из *Suunto Divemanager (DM3,DM4 и DM5)*
[icon="images/icons/suuntologo.jpg"]
[NOTE]
Divemanager 3 (DM3) - старая версия журнала погружений. Современные
дайв-компьютеры Suunto используют Divemanager версий 4 или 5 (DM4 или DM5). Эти две версии
используют разные подходы и имена файлов для экспорта погружений.



*Divemanager 3 (DM3):*

1. Запустите 'Suunto Divemanager 3' и войдите под пользователем, для которого
есть погружения в журнале.
2. Не запускайте импорт погружений из дайв-компьютера.
3. В навигационной панели в левой части окна программы выберите погружения.
4. Используйте мышь и клавиши Ctrl и Shift для выбора одиночных и нескольких
погружений.
5. Для выбранных погружений используйте пункт меню _File -> Export_
6. Во всплывающем окне есть одно единственное поле 'Export Path'
    * Нажмите кнопку Обзор рядом в этим полем
	    ** вам будет представлено окно файлового проводника
		** перейдите в директорию для сохранения файла Divelog.SDE
		** при желании измените имя файла
		** нажмите 'Сохранить'
	* Вернувшись во всплывающее окно экспорта, нажмите кнопку 'Export'
7. Погружения экспортированы в файл Divelog.SDE.




*Divemanager 4 (DM4) и Divemanager 5 (DM5):*

Чтобы экспортировать данные журнала DM4 и DM5, вам необходимо узнать
местоположение базы данных, в которой хранятся погружения. Вы можете
использовать как основную, так и резервную копию базы. Ниже описаны оба варианта:


Местонахождение базы данных Suunto DM4 (или DM5):

1. Запустите Suunto DM4/DM5
2. Выберите в меню 'Help -> About'
3. Нажмите 'Copy' после текста 'Copy log folder path to clipboard'
4. Запустите проводник Windows
5. Вставьте текст из буфера обмена в строку навигации проводника
6. Файл базы данных называется DM4.db

Создание резервной копии Suunto DM4:

1. Запустите Suunto DM4/DM5
2. Выберите в меню 'File - Create backup'
3. В диалоге выбора файла укажите путь и название резервной копии, в этом
примере мы используем расширение .bak по умолчанию
4. Нажмите 'Save'
5. Погружения сохранены в файл DM4.bak (или DM5.bak)


=== Экспорт погружений из Atomic Logbook
[[Atomic_Export]]

[icon="images/icons/atomiclogo.jpg"]
[NOTE]
Компания Atomic Aquatics предлагает собственное программное обеспечение Atomic Logbook для платформы
Windows. Оно позволяет загружать журналы погружений с компьютеров Cobalt и Cobalt 2. Журнал хранится
в базе данных SQLite в файле C:\ProgramData\AtomicsAquatics\Cobalt-Logbook\Cobalt.db. Этот файл
может быть напрямую импортирован в _Subsurface_.



[[Mares_Export]]
=== Экспорт погружений из Mares Dive Organiser V2.1

[icon="images/icons/mareslogo.jpg"]
[NOTE]
Mares Dive Organiser работает исключительно под управлением ОС Windows. Журнал
погружений хранится в фрмате SQL Compact Edition database в файле с
расширением '.sdf'. База данных содержит данные о всех зарегистрированных
дайверах на данном ПК и о всех используемых дайв-компьютерах Mares. На
сегодняшний день самый надежный способ получить копию журнала -
экспортировать погружения в другой формат, распознаваемый _Subsurface_.

1. Находясь в Dive Organiser, выберите в главном меню _Database -> Backup_ и
создайте резервную копию базы данных на рабочем столе. Это создаст ZIP-архив с
именем DiveOrganiserxxxxx.dbf.
2. Переименуйте файл в DiveOrganiserxxxxx.zip. Внутри ZIP-архива находится
файл _DiveOrganiser.sdf_.
3. Извлеките файл с расширением _.sdf_ на рабочий стол вашего ПК.
4. Пароль для доступа к ZIP-архиву _mares_.



[[S_ImportingDivinglog]]
=== Экспорт погружений из *DivingLog 5.0 и 6.0*

[icon="images/icons/divingloglogo.jpg"]
[NOTE]
Лучший способ перенести журнал погружений из DivingLog в _Subsurface_ - полная конвертация базы
данных. Прочие форматы не содержат все детали погружений, такие как события замены газов, единицы
измерения и т.п. При конвертации базы данных, вся эта информация будет доступна.



Для переноса всех файлов из DivingLog в _Subsurface_ выполните следующие шаги:

1. В главном меню DivingLog выберите 'File -> Export -> SQLite'
2. Нажмите на кнопку 'Установки'
3. Установите 'RTF2Plaintext' в значение 'true'
4. Закройте диалоговое окно 'Установки'
5. Нажмите кнопку Экспорт и укажите имя файла

После выполнения этих шагов, откройте сохраненный файл с помощью _Subsurface_, все погружения будут
преобразованы в наш собственный формат. Последним шагом не забудьте сохранить журнал.


[[S_Appendix_D]]
== ПРИЛОЖЕНИЕ Г: Экспорт электронных таблиц в CSV-формат

Многие дайверы ведут журнал погружений в каком-либо электронном формате, зачастую в виде таблицы
с разнообразными информационными полями. Такие журналы могут быть импортированы в _Subsurface_, но
прежде их надо конвертировать в формат CSV.
Эта глава описывает шаги по конвертации журнала из электронных таблиц в CSV-формат для последующего
импорта в _Subsurface_. Создание CSV-файла довольно тривиальная задача, хотя это процедура различается
для разных программ для работы с электронными таблицами.


Первым шагом вам нужно правильно организовать данные в таблице так, что первая строка содержала
названия (заголовки) каждой из колонок и информация по каждому погружению хранилась в одной строке.
_Subsurface_ поддерживает множество полей (№ погружения, Дата, Время, Длительность, Напарник, Грузы,
Метки и Примечания). Вы можете организовать данные, следуя простым правилам:


1. Дата. Используйте один из форматов: yyyy-mm-dd, dd.mm.yyyy, mm/dd/yyyy
2. Длительность. Формат должен быть вида мин:сек.
3. Система мер. Нужно использовать только одну систему (т.е. нельзя использовать фунты и градусы Цельсия)
4. Метки и партнеры. Значения должны быть разделены запятой.
5. GPS-координаты. Следует использоваться десятичные доли градусов, т.е. e.g. 30.22496 30.821798

=== _LibreOffice Calc_ и _OpenOffice Calc_

Эти программы для работы с электронными таблицами являются частью офисных пакетов с открытым кодом.
Работы с _LibreOffice_ и _OpenOffice_ очень схожа. Формат времени должен быть вида минуты:секунды - [mm]:ss, а формат даты одним из yyyy-mm-dd, dd.mm.yyyy, mm/dd/yyyy. Типичный журнал может выгядеть так:

image::images/LOffice_spreadsheetdata.jpg["Рисунок: Электронная таблица",align="center"]

Для экспорта файла CSV из LibreOffice в меню выберите _Файл -> Сохранить как_. В появившемся диалоге выберите тип файла _Текст CSV (.csv)_ и выберите опцию _Редактировать настройки фильтра_.

image::images/LOffice_save_as_options.jpg["Рисунок: Сохранение CSV-файла",align="center"]

После нажатия на кнопку _Сохранить_, выберите _Tab_ в качестве разделителя полей, чтобы избежать конфликтов при использовании запятой в качестве десятичного разделителя, и нажмите _OK_.

image::images/LOffice_field_options.jpg["Рисунок: Настройки фильтра CSV",align="center"]

Импортируйте только что сохраненный CSV-файл как описано в главе xref:S_ImportingCSVDives[Импорт погружений в CSV-формате].

=== Microsoft _Excel_

_Excel_ не предоставляет возможности указать разделитель полей (в руководстве Microsoft он называется
_разделитель списка_); сделать это можно из _Панели управления_. После изменения символа-разделителя,
его будут использовать все программы на компьютере. Вы всегда можете вернуться к предыдущему значению,
выполнив следующую процедуру:

- В Windows нажмите кнопку *Пуск* и выберите _Панель управления_ в правой части окна.
- Выберите _Региональные настройки_.
- Выполните следующее:
  ** Для Windows 7, выберите вкладку _Формат) и нажмите _Настроить_
  ** Для Windows XP, выберите _Параметры региона_ и нажмите _Настроить_
- Введите новый символ-разделитель в поле _Разделитель списка_. Чтобы указать символ табуляции, введите слово TAB.
- Последовательно нажмите кнопку _ОК_ дважды.

Ниже приведен внешний вид _Панели управления_:

image::images/Win_SaveCSV2.jpg["Рисунок: Разделитель списков в Windows",align="center"]

Чтобы экспортировать журнал погружений в CSV формат:

Откройте журнал в _Excel_, нажмите на круглую кнопку с логотипом Windows в верхнем левом углу и выберите _Сохранить как_

image::images/Win_SaveCSV1.jpg["Рисунок: сохранить как в Excel",align="center"]

Нажимайте непосредственно на пункт _Сохранить как_, а не на стрелочку справа от него. Это откроет диалоговое окно для сохранения таблицы в альтернативном формате. Из выпадающего списка в нижней части диалога выберите тип CSV, укажите папку для сохранения.

image::images/Win_SaveCSV3.jpg["Рисунок: диалоговое окна сохранения CSV-файла в Excel",align="center"]

Нажмите кнопку _Сохранить_. Импортируйте только что сохраненный CSV-файл как описано в главе xref:S_ImportingCSVDives[Импорт погружений в CSV-формате].

[[S_APPENDIX_E]]
== ПРИЛОЖЕНИЕ Д: Создание собственных шаблонов печати

_Subsurface_ предоставляет механизм по созданию и изменению шаблонов для печати погружений, что
позволяет гибко менять положение информации на странице. Шаблоны используют HTML и набор инструкций
библиотеки Grantlee.

Доступ к шаблонам осуществляется из диалога печати (см. рисунок В ниже).

image::images/Print1_f22.jpg["Рисунок: Диалог печати",align="center"]

Кнопки под выпадающим списком шаблонов позволяют _Редактировать_, _Удалить_, выполнить _Импорт_ и
_Экспорт_. Новые или измененные шаблоны хранятся в той же директории, что и журнал, с которым вы работаете
в данный момент. Чтобы изменить существующий  шаблон, выберите его названиек в списке и нажмите
кнопку _Редактировать_.


Окно редактирования шаблона состоит из трех вкладок:

image::images/Template1_f22.jpg["Рисунок: окно редактирования шаблона",align="center"]

1) Вкладка _Стиль_ (рисунок *А* выше) управляет шрифтами, междстрочным интервалом и палитрой цветов.


2) Вкладка _Цвета_ (рисунок *В* выше) позволяет переопределить цвета шаблона



3) Вкладка _Шаблон_ (рисунок ниже) дает вам возможность описать шаблон на языке HTML с использованием
   примитивов библиотеки Grantlee.







image::images/Template2_f22.jpg["Рисунок: Вкладка редактирования шаблона",align="center"]

Вы можете адаптировать существующие шаблоны под свои нужды и сохранить их в директории журнала погружений.
После окончания редактирования, используйте функцию _Экспорт_, чтобы сохранить шаблон с новым именем.

Чтобы шаблон правильно отображался, в нем должны присутствовать следующие элементы:

=== Главный цикл погружений
_Subsurface_ экспортирует в _Grantlee_ список погружений под именем *dives*. Для итерации по погружениям:

.template.html
....
	{% for dive in dives %}
		<h1> {{ dive.number }} </h1>
	{% endfor %}
....

.output.html
....
	<h1> 1 </h1>
	<h1> 2 </h1>
	<h1> 3 </h1>
....

Дополнительную информация о _Grantlee_ вы можете найти http://www.grantlee.org/apidox/for_themers.html[здесь].

=== Переменные, доступные в Grantlee
_Subsurface_ экспортирует только часть информации о погружении:
|====================
|*Название*|*Описание*
|number| (*int*) номер погружения
|id| (*int*) уникальный ID дайва, должен использоваться для получения профиляe
|date| (*string*) дата погружения
|time| (*string*) время погружения
|location| (*string*) местоположение
|duration| (*string*) длительность
|depth| (*string*) глубина погружения
|divemaster| (*string*) информация о дайв-мастере
|buddy| (*string*) информация о партнерах
|airTemp| (*string*) температура воздуха
|waterTemp| (*string*) температура воды
|notes| (*string*) примечания к погружению
|rating| (*int*) рейтинг погружения (от 0 до 5)
|sac| (*string*) значение SAC
|tags| (*string*) все метки погружения, перечисленные через запятую
|gas| (*string*) используемые баллоны
|=====================

_Subsurface_ также экспортирует структуру *template_options*. Эти данные должны использоваться
в определении стилей CSS. В таблице ниже приведены доступные переменные:
|====================
|*Название*|*Описание*
|font| (*string*) семество шрифтов
|borderwidth| (*int*) значение border-width динамически высчитывается как 0.1% от ширины страницы, минимум 1px
|font_size| (*double*) размер шрифта в vw (viewport width), в диапазоне от 1.0 до 2.0
|line_spacing| (*double*) расстояние между строками, диапазон от 1.0 до 3.0
|color1| (*string*) цвет фона
|color2| (*string*) основной цвет ячейки таблицы
|color3| (*string*) дополнительный цвет ячейки таблицы
|color4| (*string*) основной цвет текста
|color5| (*string*) дополнительный цвет текста
|color6| (*string*) цвет рамки
|=====================

.template.html
....
	border-width: {{ template_options.borderwidth }}px;
....

.output.html
....
	border-width: 3px;
....

Дополнительно _Subsurface_ экспортирует переменную *print_options*. У этой переменной одно поле.
|=====================
|*Название*|*Описание*
|grayscale | Используйте _CSS_ фильтры для преобразования страницы в черно-белый цвет (необходимо добавлять в стиль body, чтобы сделать возможной черно-белую печать)
|=====================


.template.html
....
	body {
		{{ print_options.grayscale }};
	}
....

.output.html
....
	body {
		-webkit-filter: grayscale(100%);
	}
....

=== Определенные CSS-селекторы

Так как профиль погружения добавляется после рендеринга, _Subsurface_ использует специальные _CSS_-селекторы
для поиска в сгенерированном HTML. Вам понадобится добавить селекторы из табдицы ниже.

|====================
|*Селектор*|*Тип*|*Описание*
|dive_{{ dive.id }} | id | используется для получения соответствующего профиля погружения
|diveProfile | class | каждый div-элемент, содержащий профиль, должен иметь этот селектор класса в дополнение к dive_{{ dive.id }} id-селектору
|dontbreak | class | предотвращает div с этим классом от разбиаения на две страницы, может быть использован только в потоковых шаблонах (когда data-numberofdives = 0)
|=====================
== ПРИЛОЖЕНИЕ Е: Частые вопросы и ответы

ВАЖНО: Отображение профиля погружения не поддерживается в потоковых шаблонах (когда data-numberofdives = 0)

=== Специальные атрибуты

Существует два способа рендеринга - указанное количество погружений на странице и потоковое отображение
(_Subsurface пытается разместить как можно больще погружений на странице).

Атрибут *data-numberofdives* указывает сколько погружений должно быть отображено на странице

- отобразить 6 погружений на странице:

....
	<body data-numberofdives = 6>
....

- отобразаить как можно больше погружений:

....
	<body data-numberofdives = 0>
....

ВАЖНО: Все размеры CSS должны быть в относительных единицах, чтобы поддерживать печать на бумаге любого размера.

== ПРИЛОЖЕНИЕ Ж: ЧаВо
[[S_APPENDIX_F]]
[[SAC_CALCULATION]]
=== Похоже, что _Subsurface_ неправильно считает расход газов и SAC
'Вопрос': Я погружался с баллоном 12.2л, начальное давление 220бар, конечное - 100 бар. Мои расчеты
SAC не совпадают со значением в _Subsurface_. Возможно ли, что _Subsurface_ считает неверно?

'Ответ': Нет. _Subsurface_ рассчитывает расход газа иначе, и даже лучше, чем вы
ожидаете. В частности, мы принимаем во внимание несжимаемость газа.
Традиционно, расход и SAC считаются по формуле:
+расход = объем баллона x (начальное давление - конечное давление)+


и это правильно для идеального газа, и это то, чему вас учили в теории. Но
"идеального газа" не существует, а реальные газы сжимаются нелинейно с ростом
давления. Также вы упускаете тот факт, что давление одной атмосферы не
равняется одному бар. Поэтому *реальная* формула будет:


+расход = (объем_воздуха_в_начале - объем_воздуха_в_конце)+

где объем воздуха это *не* просто "произведение объема на давление". Это
комбинация из: "примем во внимание сжимаемость газа" (что в принципе не играет
роли до 220 бар, это становится существенным для баллонов с давлением 300
бар), и "переведем бар в атмосферы" (это основная причина несоответствия).
Напомним: одна атмосфера равняется ~1.013 бар, так что даже без сжимаемости ваш расход газа составит:

+12.2*((220-100)/1.013)+

что будет около 1445, а не 1464. Т.е. в ваших расчета было лишних 19 литров
из-за разницы между 1 бар и 1 АТМ. Сжимаемость начинает играть свою роль при
давлениях свыше 200 бар и уменьшит расход еще приблизительно на 8 литров, т.о.
вы расходовали около 1437 л при давлении на поверхности.

Поэтому радуйтесь: ваш SAC лучше, чем вы считали. Либо огорчайтесь: у вас в
баллоне меньше воздуха, чем вы думали. И как уже упоминалось, "меньше чем
думали" начинает работать при довольно высоком давлении. Баллон при 400 бар не
содержит в два раза больше воздуха чем при 200 бар. При низких же давлениях
воздух ведет себя почти как идеальный газ.

=== На некоторых профилях наблюдаются различия во времени с данных дайв-компьютера...

_Subsurface_ игнорирует поверхностное время при различных расчетах (средняя глубина, время дайва, SAC и т.д)
'Вопрос': почему время погружения на дайв-компьютере и в _Subsurface_ различаются?

'Ответ': Например, вы решили выполнить проверку плавучести (достаточно глубокую, чтобы
компьютер посчитал это началом погружения), после чего всплыли на поверхность и еще 5 минут
прождали своего напарника. Ваш дайв-компьютер может посчитать длительность этого погружения
50 минут, потому что компьютер находится в режиме погружения, а _Subsurface_ посчитает
длительность этого дайва равной 45 минутам, потому что вы действительно погружались 45 минут.
Особенно это заметно, если вы обучаете новичков OW, вы долгое время находитесь
в воде, но основное время проводите на поверхности. И это нельзя считать долгим погружением.

=== При загрузке отсутствуют некоторые погружения

[[DC_HISTORY]]
'Вопрос': У меня не получается загрузить все мои погружения, только недавние. При этом руководство
по моему дайв-компьютеру утверждает, что он хранит историю ,например, 999 погружений.


'Ответ': История погружений и профиль погружения - две большие разницы. История
хранит только общее количество погружений и общее время, проведенное под водой.
С другой стороны, журнал хранит профили погружений, но объем его памяти
ограничен. Точно количество хранимых профилей зависит от частоты дискретизации
и длительности погружений. Как только память переполняется, старые погружения
перетираются новыми. Поэтому мы можем загрузить последний 13, 30 или 199
погружений.


Если вы выгрузили погружения в разные программы для ведения журналов перед тем как они были
перезаписаны, есть вероятность, что _Subsurface_ сможет импортировать их. Однако, если погружения
были только в вашем дайв-компьютере, они не могут быть восстановлены после того как были
перезаписаны новыми погружениями.
