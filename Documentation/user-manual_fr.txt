:icons:
:toc2:
:toc-placement: manual
:numbered:

image::images/Subsurface4Banner.jpg["Banner", align="center"]

[big]#MANUEL UTILISATEUR#

*Auteurs du manuel* : Willem Ferguson, Jacco van Koll, Dirk Hohndel, Reinout Hoornweg,
Linus Torvalds, Miika Turkia, Amit Chaudhuri, Jan Schubert, Salvador Cuñat, Pedro Neves,
Stefan Fuchs

[blue]#_Version 4.7, octobre 2017_#

Bienvenue en tant qu'utilisateur de _Subsurface_, un programme avancé
d'enregistrement de plongées (carnet de plongées) avec une bonne
infrastructure pour décrire, organiser, interpréter et imprimer des plongées
en scaphandre et en apnée. _Subsurface_ offre de nombreux avantages par
rapport à d'autres solutions logicielles similaires :

 - Avez-vous besoin d'une façon d'enregistrer vos plongées utilisant des
   équipements loisirs, même sans utiliser d'ordinateur de plongée ?
 - Souhaitez-vous inclure facilement les positions GPS des sites de plongées
   dans votre carnet de plongée ?
 - Utilisez-vous deux marques différentes d'ordinateurs de plongée, chacun avec
   son propre logiciel propriétaire pour télécharger les enregistrements des
   plongées ? Plongez-vous avec un recycleur ou un équipement en circuit ouvert
   ou de loisir ? Utilisez-vous un enregistreur de profondeur et de durée
   Reefnet Sensus avec un ordinateur de plongée ? _Subsurface_ offre une
   interface standard pour télécharger les enregistrements des plongées à
   partir de tous ces équipements de plongée, en enregistrant et en analysant
   ces enregistrements dans un système unique.
 - Utilisez-vous plus d'un système d'exploitation ? _Subsurface_ est
   intégralement compatible avec Mac, Linux et Windows, ce qui vous permet
   d'accéder à votre carnet de plongées sur chaque système d'exploitation en
   utilisant une application unique.
 - Utilisez-vous Linux ou Mac mais votre ordinateur de plongée n'a que des
   logiciels pour Windows pour télécharger les informations de plongées (par
   exemple Mares ou scubapro) ? _Subsurface_ fournit un moyen de télécharger et
   d'analyser vos enregistrements de plongées sur d'autres systèmes
   d'exploitation.
 - Avez-vous besoin d'un planificateur de plongée graphique intuitif qui
   intègre et prend en compte les plongées qui ont déjà été enregistrées ?
 - Avez-vous besoin d'un moyen d'enregistrer ou de sauvegarder votre carnet de
   plongée sur Internet, vous permettant de visualiser votre carnet depuis
   n'importe où, en utilisant un navigateur Internet ?
 - Souhaitez-vous pouvoir accéder ou modifier votre carnet de plongée en
   utilisant un smartphone ?

_Subsurface_ est disponible pour Windows (Win 7 ou plus récent, à partir de
la version 4.6 de _Subsurface_), les Macs basés sur processeurs Intel (OS/X)
et de nombreuses distributions Linux.  _Subsurface_ peut être compilé pour
bien plus de plateformes matérielles et d'environnements logiciels où Qt et
libdivecomputer sont disponibles.

Ce manuel explique comment utiliser le programme _Subsurface_. Pour
installer le logiciel, consultez la page _Téléchargement_ sur le
https://subsurface-divelog.org/[site web de _Subsurface_]. En cas de
problème, vous pouvez envoyer un e-mail sur
mailto:subsurface@subsurface-divelog.org[notre liste de diffusion] et
rapportez les bogues sur http://trac.hohndel.org[notre bugtracker].  Pour
des instructions de compilation du logiciel et (si besoin) de ses
dépendances, merci de consulter le fichier INSTALL inclus dans les sources
logicielles.

*Public* : Plongeurs loisirs, apnéistes, plongeurs Tek et plongeurs 
professionnels

toc::[]


Utilisation de ce manuel
------------------------
Lorsqu'il est ouvert depuis _Subsurface_, ce manuel ne dispose pas de
contrôles externes pour la pagination ou la sélection des pages
précédentes. Cependant, deux options sont disponibles:

La fonction _RECHERCHE_ est activée avec le raccourci clavier Contrôle-F ou
Commande-F. Une boîte de texte apparaît en bas à droite de la fenêtre (voir
image ci-dessous). Par exemple, entrer le mot "_weights_" dans la boîte de
texte de recherche lancera  la recherche dans tout le manuel utilisateur. À
droite de la boîte de recherche se trouvent deux flèches, l'une vers le haut
l'autre vers le bas. Elles mènent respectivement vers l'occurence précédente
et suivante du terme recherché.

image::images/UserManualSearch.jpg["User manual functions", align="center"]


_LIEN PRÉCÉDENT/SUIVANT_. Naviguez entre les liens (les mots soulignés qui
vous conduisent vers des sections précises du manuel utilisateur) en
cliquant-droit sur le texte du manuel. Cela fera apparaître un menu
contextuel vers les liens PRÉCÉDENTS sélectionnés (voir image
ci-dessous). Par exemple, si un lien a été sélectionné, l'option _Retour
lien précédent_ affiche le texte au lien précédent sélectionné (comme le
fait le bouton Page Précédente d'un navigateur). Inversement, l'option
_Aller au lien suivant_ navigue vers le texte vu avant l'utilisation de
l'option _Retour lien précédent_. L'option _Recharger_ recharge le manuel
utilisateur complet dans la fenêtre.

image::images/UserManualLinksBack.jpg["User manual functions", align="center"]


[[S_UserSurvey]]
Le sondage utilisateur
----------------------
Dans le but de développer _Subsurface_ pour servir ses utilisateurs de la
meilleur manière qui soit, il est important d'avoir des informations sur les
utilisateurs. À l'ouverture de _Subsurface_ après avoir utilisé le logiciel
pendant une semaine environ, une fenêtre de sondage apparait. Cela est
complètement optionnel et l'utilisateur contrôle quelles informations sont
envoyées ou non à l'équipe de développement de _Subsurface_. Toutes les
données que l'utilisateur envoie sont utiles et ne seront utilisées que pour
les futurs développements et modifications du logiciel pour coller au mieux
aux besoins des utilisateurs de _Subsurface_. Si vous complétez le sondage
ou cliquez sur l'option pour ne plus être sondé, cela devrait être la
dernière communication de ce type que vous recevrez. Cependant, si vos
habitudes de plongées ou d'utilisation de Subsurface changent, vous pouvez
envoyer un nouveau sondage en démarrant _Subsurface_ avec l'option
_--survey_ sur la ligne de commande.

[[S_StartUsing]]
Commencer à utiliser le programme
---------------------------------

La fenêtre _Subsurface_ est généralement divisée en 4 panneaux avec un *Menu
principal* (Fichier Édition Importer Journal Vue Partager Aide) en haut de
la fenêtre (pour Windows et Linux) ou en haut de l'écran (pour Mac et Ubuntu
Unity). Les quatre panneaux sont :

La *liste des plongées* en bas à gauche, affichant toutes les plongées du
journal (carnet) de plongées de l'utilisateur. Une plongée peut être
sélectionnée et mise en surbrillance dans la liste en cliquant dessus. Dans
la plupart des cas, les touches haut/bas peuvent être utilisées pour passer
d'une plongée à l'autre. La *liste des plongées* est un outil important pour
manipuler un journal (carnet) de plongée.

La *carte de plongée* en bas à droite, affiche les sites de plongées de
l'utilisateur, sur une carte mondiale et centrée sur le site de la dernière
plongée sélectionnée dans la *liste des plongées*. L'échelle de la carte
peut être augmentée ou réduite.

Les *informations* en haut à gauche, fournissent des informations détaillées
sur la plongée sélectionnée dans la *liste des plongées*, dont des
statistiques pour la plongée sélectionnée ou pour toutes les plongées mises
en surbrillance.

Le *profil de plongée* en haut à droite, affiche un profil de plongée
graphique de la plongée sélectionnée dans la *liste des plongées*. Vous
pouvez zoomer sur le profil de plongée pour une vue plus détaillée.

Les séparateurs entre ces panneaux peuvent être déplacés pour modifier la
taille de chaque panneau. _Subsurface_ mémorise la position de ces
séparateurs, pour qu'au prochain lancement _Subsurface_ utilise ces
positions.

Si une unique plongée est sélectionnée dans la *liste des plongées*,
l'emplacement de la plongée, les informations détaillées et le profil de la
_plongée sélectionnée_ sont affichées dans les panneaux respectifs. Si
plusieurs plongées sont sélectionnées, la dernière mise en surbrillance est
la _plongée sélectionnée_, mais les données de _toutes les plongées mises en
surbrillances_ sont affichées dans l'onglet *Statistiques* du panneau
*Informations* (profondeur maximale, minimale et moyenne, les durées, les
températures de l'eau et le SAC (air consommé); temps total et nombre de
plongées sélectionnées).

[[S_ViewPanels]]

image::images/main_window_f22.jpg["The Main Window", align="center"]

L'utilisateur décide quels panneaux sont affichés, parmi les 4, en
sélectionnant l'option *Vue* dans le menu principal. Cette fonctionnalité
permet plusieurs choix d'affichage :

*Tout* : affiche les quatre panneaux tels que sur la capture d'écran ci-dessus.

*Liste des plongées* : affiche uniquement la liste des plongées.

*Profil* : affiche uniquement le profile de plongée de la plongée sélectionnée.

*Info* : affiche uniquement les notes de plongées de la dernière plongée sélectionnée et les statistiques pour
toutes les plongées mises en surbrillance.

*Globe* : affiche uniquement la carte mondiale, centrée sur la dernière plongée sélectionnée.

Comme d'autres fonctions auxquelles on peut accéder via le menu principal,
ces options peuvent aussi être activées par des raccourcis clavier. Les
raccourcis pour un système particulier sont affichés avec un souligné dans
les entrées de menu. À cause des différents systèmes d'exploitation et
langues, _Subsurface_ peut utiliser différentes touches de raccourcis et ne
sont donc pas détaillées ici.

Lorsque le programme est lancé pour la première fois, il n'affiche aucune
information, parce qu'il n'a aucune information de plongée disponible. Dans
les sections suivantes, la procédure pour créer un nouveau carnet de plongée
sera détaillée.

[[S_NewLogbook]]
Créer un nouveau carnet de plongée
----------------------------------
Sélectionner _Fichier -> Nouveau carnet de plongée_ à partir du menu
principal. Toutes les données de plongées sont effacées pour que de
nouvelles puissent être ajoutées. S'il existe des données non encore
enregistrées dans le carnet ouvert, l'utilisateur devra sélectionner s'il
faut les enregistrer ou non avant de créer le nouveau carnet.

[[S_GetInformation]]
== Enregistrement des informations de plongée dans le carnet
Maintenant qu'un nouveau carnet de plongée a été créé, il est simple de lui
ajouter des données. _Subsurface_ comporte plusieurs façons pour ajouter des
données de plongée au carnet.

1) Si l'utilisateur possède un carnet manuscrit, un tableur ou une autre forme
   de 
 carnet maintenu manuellement, les données de plongée peuvent être ajoutées
 au carnet en utilisant une des approches suivantes :

 - Entrer les informations de plongée à la main. Cela est utile si le plongeur
   n'a pas
 utilisé d'ordinateur de plongée et que les plongées sont inscrites dans un
 carnet manuscrit. Voir  xref:S_EnterData[Entrer les informations de plongée
 à la main]

 - Importer les informations de plongée qui ont été maintenues soit dans un
   tableur
 soit dans un fichier CSV. Se reporter à : xref:S_Appendix_D[ANNEXE D :
 Exporter un tableur vers le format CSV] et à
 xref:S_ImportingCSVDives[Importer des plongées au format CSV].

Si une plongée est enregistrée par un ordinateur de plongée, le profil de
profondeur et de nombreuses informations supplémentaires peuvent être
obtenues. Ces plongées peuvent être importées à partir de :

 - L'ordinateur de plongée lui-même. Voir : xref:S_ImportDiveComputer[Importer
   de nouvelles informations de plongée à partir de l'ordinateur de plongée];
 - Logiciels propriétaires fournis par les fabricants d'ordinateurs de
   plongée. Voir
 xref:S_ImportingAlienDiveLogs[Importer les informations à partir d'autres
 sources de données numériques ou d'autres formats de données].
 - Tableur ou de fichiers CSV contenant les profils de plongées.
 Voir : xref:S_ImportingCSVDives[Importer les plongées au format CSV à partir
 des ordinateurs de plongées ou d'autres logiciels de carnet de plongée]


[[S_EnterData]]
=== Entrer les informations de plongée à la main

C'est en général l'approche des plongées sans ordinateur. L'enregistrement
de l'information de base dans _Subsurface_ est une plongée. L'information la
plus importante dans un simple carnet de plongée inclut généralement le type
de plongée, la date et l'heure, la durée, la profondeur, le nom des
équipiers et du moniteur ou du guide de palanquée, et quelques remarques à
propos de la plongée. _Subsurface_ peut stocker bien plus d'informations
pour chaque plongée. Pour ajouter une plongée au carnet, sélectionner
_Journal -> Ajouter une plongée_ depuis le menu principal. Le logiciel
affiche alors trois panneaux sur lesquels on peut entrer des informations
pour une plongée: deux onglets dans le panneau *Informations* (*Notes* et
*Équipement*), ainsi que le panneau *Profil de plongée* qui affiche un
profil graphique pour chaque ploingée. Ces panneaux sont respectivement
marqués [red]#A#, [red]#B# et [red]#C# dans l'llustration ci-dessous. Chaque
de ces onglets sera expliqué pour l'entrée de données.

image::images/AddDive1_f22.jpg["FIGURE: Add dive", align="center"]
Lorsque vous éditez un champ dans Notes ou Équipement, _Subsurface_ entre en
*Mode édition*, indiqué par un message dans une boîte bleue en haut du
panneau *Notes* (voir image ci-dessous). Ce message est affiché dans tous
les panneau sous Notes et Équipement en *Mode édition*.

image::images/BlueEditBar_f22.jpg["Blue edit bar", align="center"]

Le bouton _Appliquer les modifications_ ne doit être cliqué qu'après avoir
complété toutes les parties d'une plongée. Lors de l'entrée manuelle d'une
plongée, les onglets _Informations_, _Équipement_ et _Profil_ doivent être
complétés avant d'appliquer les modifications. En cliquant le bouton
_Appliquer les modifications_, une copie locale des informations d'une
plongée sont sauvegardées dans la mémoire, mais ne sont pas écrites sur le
disque. Le bouton _Appliquer lesmodifications_ ne devrait UNIQUEMENT être
utilisé qu'après avoir entré toutes les informations d'une plongée. En
quittant Subsurface, le logiciel demandera si les carnet de plongée complet
doit être enregistré sur le disque ou non.

[[S_CreateProfile]]
==== Création d'un profil de plongée

Le *Profil de plongée* (une représentation graphique de la profondeur d'une
plongée en fonction du temps) est affiché dans le panneau en haut à droite
de la fenêtre de _Subsurface_. Lorsqu'il est ajouté manuellement au carnet,
_Subsurface_ affiche un profil de plongée par défaut qui nécessite d'être
modifié pour représenter au mieux la plongée décrite:

image::images/DiveProfile1_f20.jpg["FIGURE: Initial dive profile", align="center"]

_Modifier le profile de plongée_: lorsque le curseur est déplacé dans la
zone du profil, sa position est affichée par deux lignes rouges à angle
droit, comme illustré ci-dessous. Le temps et la profondeur sont représentés
en haut de la boîte noire d'information (@ et D). Les unités
(métriques/impériales) sur les axes sont déterminées dans les réglages des
*Préférences*. Le profil de plongée lui-même comporte plusieurs segments de
ligne séparés par des points de passage (les points blancs sur le profil,
voir ci-dessous). La profondeur par défaut d'une plongée est de 15m. Si la
prfondeur de votre plongée était de 20m, vous devez glisser le point de
passage approprié jusqu'à 20m. Pour ajouter un point de passage,
double-cliquez sur n'importe quel segment de la ligne. Pour bouger un point
de passage supplémentaire, glissez-le. Le bouger peut également être réalisé
en le sélectionnant et en utilisant les flèches du clavier. Pour supprimer
un point de passage, faites un clic-droit dessus et choisissez "Supprimer ce
point" dans le menu contextuel. Glissez les points de passage pour
représenter une durée correspondante à celle de votre plongée. Ci-dessous se
trouve un profil pour une plongée à 20m durant 30min, suivie d'un palier de
sécurité de 5 minutes à 5 m.

image::images/DiveProfile2_f20.jpg["FIGURE: Edited dive profile", align="center"]

_Spécifier la composition du gaz:_ la composition du gaz utilisé est
indiquée le long des segments de ligne du profil de plongée. Ceci est le
réglage par défaut pour le premier mélange gazeux spécifié dans l'ongle
*Équipement*, qui était de l'air dans le cas du profil ci-dessus. Les
mélanges gazeux des segments du profil peuvent être modifiés dans
cliquant-droit sur un point de passage précis et en sélectionnant le gaz
approprié dans le menu contextuel. Changer un gaz à un point de passage
modifie le gaz affiché dans le segment _à droite_ du point de passage. Notez
que seuls les gaz définis dans l'onglet *Équipement* apparaissent dans le
menu contextuel (voir image ci-dessous).

image::images/DiveProfile3_f20.jpg["FIGURE: Gas composition context menu", align="center"]

Une fois le profil déterminé, d'autres détails doivent être ajoutés pour
obtenir un enregistrement complet de la plongée. Pour y arriver, les onglets
*Notes* et *Équipement* en haut à gauche de la fenêtre de _Subsurface_
doivent être utilisés. Cliquez sur xref:S_Notes_dc[*ce lien*] pour plus
d'informations sur l'utilisation de ces onglets.
[[S_ImportDiveComputer]]
=== Importer de nouvelles informations de plongée à partir de l'ordinateur de plongée

==== Connecter et importer des données depuis un ordinateur de plongée.

L'utilisation d'ordinateurs de plongée permet la collecte d'un grand nombre
d'informations à propos de chaque plongée, comme un enregistrement détaillé
de la profondeur, la durée, la vitesse de remontée ou de descente et les
pression partielles des gaz. _Subsurface_ peut récupérer ces informations,
en utilisant les données venant d'une grande variété d'ordinateurs de
plongée. La liste la plus récente des ordinateurs supportés peut être trouvé
ici:
link:https://subsurface-divelog.org/documentation/supported-dive-computers/[Ordinateurs
de plongée supportés].

[icon="images/icons/warning2.png"]
[WARNING]
Certains ordinateurs de plongée consomme plus d'énergie lorsqu'ils sont en
mode Communication PC. **Ceci peut consommer une grande partie de la
batterie de votre ordinateur de plongée**. Nous recommandons à l'utilisateur
de vérifier que l'ordinateur de plongée est chargé lorsqu'il est connecté au
port USB du PC. Par exemple, certains ordinateurs Suunto et Mares ne se
rechargent pas via la connection USB. Les utilisateurs doivent se reporter
au manuel de leur ordinateur de plongée s'ils ne savent pas si leur
ordinateur de plongée recharge ou non ses batteries lorsqu'il est connecté
au port USB.

Pour importer les informations depuis un ordinateur de plongée vers un
ordinateur utilisant _Subsurface_, les deux pièces d'équipement doivent
communiquer entre elles. Ceci implique la configuration des ports de
communication (ou point de montage) de l'ordinateur sur lequel tourne
_Subsurface_ qui communique avec l'ordinateur de plongée. Pour configurer
cette communication, les utilisateurs doivent trouver l'information
appropriée pour renseigner à _Subsurface_ d'où et comment importer les
informations de
plongée.
xref:_appendix_a_operating_system_specific_information_for_importing_dive_information_from_a_dive_computer[Annexe
A] donne les informations techniques pour aider l'utilisateur à configurer
ceci pour les différents systèmes d'exploitation et
xref:_appendix_b_dive_computer_specific_information_for_importing_dive_information[Annexe
B] contient des informations spécifiques à chaque ordinateur de plongée.

Après ceci, l'ordinateur de plongée peut être branché au PC de l'utilisateur
en suivant ces étapes:

1. Le cable d'interface doit être connecté à un port USB libre (ou une
   connection infra-rouge
	ou Bluetooth doit être configurée comme décrit ultérieurement dans ce
	manuel)

2. L'ordinateur de plongée doit être placé en mode Communication PC.
	(Se reporter au manuel de l'ordinateur de plongée)

3. Dans _Subsurface_, depuis le menu principal, sélectionner _Importer ->
   Importer depuis l'ordinateur de plongée_. La boîte de dialogue *A* apparaît
   comme sur la figure ci-dessous:


image::images/DC_import_f20.jpg["FIGURE: Download dialogue 1", align="center"]

Les ordinateurs de plongée gardent généralement un certain nombre de
plongées en mémoire, même si ces plongées ont déjà été importées dans
_Subsurface_. Pour cette raison, si l'ordinateur de plongée le permet,
_Subsurface_ importe uniquement les plongées qui n'ont pas été téléchargées
précédemment. Cela accélère le processus de téléchargement sur la plupart
des ordinateurs de plongée et cela économise la batterie de l'ordinateur de
plongée (en tout cas pour ceux qui ne se rechargent pas via USB).

 - La boîte de dialogue propose deux menus déroulants, *Fournisseur* et
   *Ordinateur de plongée*. Dans le menu déroulant *Fournisseur*, sélectionnez
   la marque de l'ordinateur, p. ex. Suunto, Oceanic, Uwatec, Mares. Dans le
   menu déroulant *Ordinateur de plongée*, le nom du modèle doit être
   sélectionné, p. ex. D4 (Suunto), Veo200 (Oceanic), ou Puck (Mares).

 - Le menu déroulant *Périphérique ou point de montage* le nom du port USB ou
   Bluetooth dont _Subsurface_ a besoin pour communiquer avec l'ordinateur de
   plongée. Le port approprié doit être sélectionné. Consultez
   xref:_appendix_a_operating_system_specific_information_for_importing_dive_information_from_a_dive_computer[Annexe
   A] et
   xref:_appendix_b_dive_computer_specific_information_for_importing_dive_information[Annexe
   B] pour obtenir des détails techniques sur la façon de trouver des
   informations sur le port approprié à chaque ordinateur de plongée et, dans
   certains cas, sur les réglages requis pour le système d'exploitation de
   l'ordinateur sur lequel _Subsurface_ fonctionne.

 - Si toutes les plongées de l'ordinateur de plongée doivent être téléchargées,
   cochez la case _Forcer le téléchargement de toutes les
   plongées_. Normalement, _Subsurface_ télécharge uniquement les plongées
   postérieures à la date et heure de la dernière plongée du panneau *Liste des
   plongées*. Si une ou plusieurs de vos plongées ont été accidentellement
   effacées de _Subsurface_ ou si des plongées plus anciennes doivent encore
   être téléchargées depuis l'ordinateur de plongée, cette case doit être
   cochée. Certains ordinateurs de plongée (p. ex. Mares Puck) ne proposent pas
   de liste à _Subsurface_ avant le téléchargement qui permettrait de n'en
   sélectionner que certaines. Par conséquent, pour ces ordinateurs de
   plongées, toutes les plongées sont téléchargées quel que soit le statut de
   cette case à cocher.

 - Si la case _Toujours préférer les plongées téléchargées_ a été cochée et
   que, durant le téléchargement, des plongées avec date et heure identiques se
   trouvent sur l'ordinateur de plongée et dans le panneau *Liste des plongées*
   de _Subsurface_, la plongée dans le carnet de _Subsurface_ sera écrasée par
   l'enregistrement de l'ordinateur de plongée.

 - La case à cocher _Télécharger dans un nouveau voyage_ assure que, après
   l'importation, les plongées téléchargées seront regroupées ensemble dans un
   nouveau voyage dans la *Liste des plongées*.

 - Ne cochez *pas* les cases nommées _Sauvegarder le fichier log de
   libdivecomputer_ et _Sauvegarder le fichier de données brutes de
   libdivecomputer_. Elles sont uniquement utilisées comme outils de diagnostic
   lorsque des problèmes de téléchargement se présentent (voir ci-dessous).
 - Ensuite, cliquez sur le bouton _Télécharger_. Une fois la communication
   établie, vous pouvez voir comment les données sont récupérées depuis
   l'ordinateur de plongée. Selon la marque de l'ordinateur de plongée et/ou le
   nombre de plongées enregistrées, cela peut prendre un certain temps. Soyez
   patient. En bas de la boîte de dialogue de _Téléchargement_, vous trouverez
   une barre de progression. Rappelez-vous que pour certains ordinateurs de
   plongée, l'information de progression peut être incorrecte, puisque
   _Subsurface_ ne connait pas la quantité de données à télécharger tant que le
   téléchargement n'est pas terminé. Après le téléchargement des plongées,
   elles apparaissent sous forme de tableau dans la partie droite de la boîte
   de dialogue (voir image *B*, ci-dessus). Chaque plongée comporte une rangée
   dans le tableau, montrant la date, la durée et la profoneur. À côté de
   chaque plongée se trouve une case à cocher: cochez toutes les plongées qui
   doivent être transférées vers la *Liste des plongées*. Dans le cas de
   l'image ci-dessus, les six dernières plongées sont cochées et seront
   transférées vers la *Liste des plongées*. Cliquez ensuite sur le bouton _OK_
   en bas de la boîte de dialogue. Toutes les plongées importées apparaissent
   dans la *Liste des plongées*, classées par date et heure. Déconnectez et
   éteignez l'ordinateur de plongée pour économiser sa batterie.

 - S'il y a un problème de communication avec l'ordinateur de plongée, un
   message d'erreur s'affiche, semblable à ce texte: "Impossible d'ouvrir
   /dev/ttyUSB0 Mares (Puck Pro)". Rapportez-vous au texte dans le boîte de
   dialogue ci-dessous.


****
*PROBLÈMES AVEC LE TÉLÉCHARGEMENT DES DONNÉS DE L'ORDINATEUR DE PLONGÉE?*
[icon="images/icons/important.png"]
[IMPORTANT]
Vérifiez les éléments suivants:

 - L'ordinateur de plongée est-il en mode Communication PC ou Téléchargement?

 - La batterie de l'ordinateur de plongée est-elle complètement chargée? Si ce
   n'est pas le cas, chargez-la ou remplacez-la.

 - Le câble de connexion est-il fautif ? Le câble fonctionne-t-il avec d'autres
   logiciels? A-t-il fonctionné précédemment, ou est-ce la première fois que ce
   câble est utilisé? Les contacts sur l'ordinateur de plongée et le câble
   sont-ils propres ?

 - Consultez
   xref:_appendix_a_operating_system_specific_information_for_importing_dive_information_from_a_dive_computer[Annexe
   A] pour être certain que le point de montage correct a été spécifié (voir
   ci-dessus).

 - Sur les systèmes d'exploitation de type Unix, l'utilisateur a-t-il les
   droits d'écriture sur le port USB? Si non, consultez
   xref:_appendix_a_operating_system_specific_information_for_importing_dive_information_from_a_dive_computer[Annexe
   A]

Si l'ordinateur utilisant _Subsurface_ ne reconnaît pas l'adaptateur USB en
ne montrant pas le bon nom de périphérique à côté du Point de monage, il est
possible que le câble ou l'adaptateur USB soit fautif. Un câble défectueux
est la cause la plus courante de problème de communication entre un
ordinateur de plongée et _Subsurface_. Il est également possible que
_Subsurface_ ne puisse pas interpréter les données. Réalisez un
téléchargement de diagnostic en cochant les deux cases suivantes dans la
boîte de dialogue de téléchargement décrite ci-dessus:

	Save libdivecomputer logfile
	Save libdivecomputer dumpfile

*Important*: ces cases à cocher ne doivent être utilisées qu'en cas de problème
durant le processus de téléchargement. En temps normal, elles ne doivent pas être cochées.
En cochant ces cases, l'utilisateur doit sélectionner un dossier où l'information sera enregistrée. Le dossier par défaut est celui dans lequel
le carnet de
_Subsurface_ est stocké.

*Important:* _après un téléchargement avec les cases ci-dessus
cochées, aucune plongée n'est ajoutée à la
*Liste des plongées* mais deux fichiers sont créés dans le dossier sélectionné précédemment_:

	subsurface.log
	subsurface.bin

Ces fichiers doivent être envoyés à la liste de diffusion de _Subsurface_:
_subsurface@subsurface-divelog.org_ avec une demande d'analyse des
fichieres. Précisez la marque et le modèle de l'ordinateur ainsi que des
informations relatives aux plongées enregistrées sur l'ordinateur de
plongée.
****

[[S_Bluetooth]]
==== Connexion de _Subsurface_ à un ordinateur de plongée équipé de Bluetooth
[icon="images/icons/bluetooth.jpg"]

Bluetooth is becoming a more common way of communication between dive
computers and _Subsurface_. _Subsurface_ provides a largely operating system
independent Bluetooth interface. An increasing number of dive computers use
Bluetooth Low Energy (BTLE)  as a means of communication. However, BTLE is
not a standardised protocol, consequently adaptations need to be made for
communicating with each different dive computer model. See the
link:https://subsurface-divelog.org/documentation/supported-dive-computers/[list
of supported dive computers].  Bluetooth communication is often more
reliable if all Bluetooth devices seen by the _Subsurface_ computer are
removed and pairing with the Bluetooth dive computer is performed from
afresh. The Bluetooth and BTLE interfaces are under active development with
respect to new dive computers that use this mechanism of communication.

La configuration de  _Subsurface_ pour une communication Bluetooth nécessite
4 étapes :

- Vérifiez que Blutooth est activé sur l'ordinateur sur lequel _Subsurface_
  est actif.
- Vérifiez que _Subsurface_ détecte l'adaptateur Bluetooth de l'ordinateur.
- Vérifiez que l'ordinateur de plongée Bluetooth est détectable et en mode
  Connection PC.
- Vérifiez que _Subsurface_ est jumelé avec l'ordinateur de plongée Bluetooth.

Faites apparaître la boîte de dialogue de téléchargement en sélectionnant
_Importer -> Importer depuis l'ordinateur de plongée_ depuis le *Menu
principal*. Après avoir coché la case _"Choisir le mode de téléchargement
Bluetooth"_, la boîte de dialogue ci-dessous apparaît.

===== Sur Linux ou MacOS :

image::images/DC_import_Bluetooth.jpg["FIGURE: Download Bluetooth", align="center"]

Although the _Subsurface_ Bluetooth interface is intended to function
without Bluetooth pairing at the operating system level, it is always
prudent to follow up initial Bluetooth pairing problems by pairing the
Bluetooth dive computer with the _Subsurface_ computer using the operating
system services of the desktop computer. Delete all existing pairings and
start by scanning for Bluetooth devices from an empty list (on the desktop)
of Bluetooth devices. Once _Subsurface_ has recognised the Bluetooth dive
computer, subsequent divelog downloads are likely to be simple.

Sur les plateformes _Linux_ ou -MacOS_, le nom de l'ordinateur utilisant
Subsurface_ et son adresse Bluetooth sont affichées du côté droit. L'état
(allumé/éteint) de l'adaptateur Bluetooth est affiché sous l'adresse et peut
être modifié en cliquer sur la case _Allumer/éteindre_. Si l'adresse
Bluetooth n'est pas affichée, _Subsurface_ ne détecte pas le périphérique
Bluetooth local. Assurez-vous que le driver Bluetooth est installé
correctement sur l'ordinateur utilisant _Subsurface_ et vérifiez qu'il peut
être utilisé par d'autres utilitaires Bluetooth comme _bluetoothctl_ ou
_bluemoon_. Ceci clôture les deux premières étapes.  Vérifiez que
l'ordinateur de plongée avec Bluetooth est en mode Connexion PC et est
détectable pour d'autres périphériques Bluetooth. Consultez le manuel de
l'ordinateur de plongée pour plus d'information. À présent, la troisième
étape de notre liste est terminée.  Sélectionnez le bouton _Scannez_ en bas
à gauche de la boîte de dialogue ci-dessus. Après la recherche, l'ordinateur
de plongée devrait se trouver dans la liste (peut-être sous la norme d'un
numéro de périphérique Bluetooth) dans la liste principale sur la gauche de
la boîte de dialogue (voir image ci-dessus). Si cela ne fonctionne pas,
sélectionnez le bouton _Effacer_, puis scannez à nouveau en utilisant le
bouton _Scan_. Après avoir suivi cette procédure, _Subsurface_ devrait voir
l'ordinateur de plongée.  La dénomination de l'ordinateur de plongée détecté
contient le nom du périphérique, son adresse et son statut de jumelage. Si
le périphérique n'est pas jumelé et que son nom est affiché avec un
arrière-plan rouge, un menu contextuel peut être ouvert en sélectionnant ce
nom avec un cli-droit.  Sélectionnez l'option _Jumeler_ et attendez que la
tâche soit terminée. Si l'ordinateur est jumelé à Subsurface pour la
première fois, il est possible que Subsurface demande un nombre ou un code
PIN. Le plus utilisé est 0000, et c'est celui qui fonctionne pour un
Shearwater Petrel. Si nécessaire, consultez le manuel utilisateur de
l'ordinateur de plongée que vous utilisez.

****
[icon="images/icons/important.png"]
[IMPORTANT]
Actuellement, _Subsurface_ ne supporte par le jumelage Bluetooth avec les
ordinateurs de plongée qui nécessitent un code PIN personnalisé. Pour
jumeler ces périphériques, utiliser les utilitaires du système
d'exploitation comme suggéré ci-dessous.

Une façon d'y parvenir est d'utiliser +bluetoothctl+:

	$ bluetoothctl
	[bluetooth]# agent KeyboardOnly
	Agent registered
	[bluetooth]# default-agent
	Default agent request successful
	[bluetooth]# pair 00:80:25:49:6C:E3
	Attempting to pair with 00:80:25:49:6C:E3
	[CHG] Device 00:80:25:49:6C:E3 Connected: yes
	Request PIN code
	[agent] Enter PIN code: 0000
****

Une fois que les péréphériques sont jumelés, cliquer sur le bouton
_Enregistrer_ de la boîte de dialogue. Ceci fermera la boîte de dialogue
Bluetooth. Ensuite, sélectionnez _Télécharger_ dans la boîte de dialogue
_Télécharger depuis l'ordinateur de plongée_ qui devrait encore être
ouverte. Les plongées téléchargées sont affichées dans la partie droite de
la boîte de dialogue de téléchargement.

===== Sur Windows :
image::images/DC_import_Bluetooth_Windows.png["FIGURE: Download Bluetooth on Windows", align="center"]

Sous _Windows_, les _Détails du périphérique Bluetooth local_ à droite ne
sont pas affichés comme dans les sytèmes Linux/Mac. Pour démarrer un scan
(en appuyant sur le bouton _Scan_), vérifiez que le périphérique Bluetooth
sur l'ordinateur de _Subsurface_ est activé en sélectionnant l'ordinateur de
plongée dans la liste des périphériques Bluetooth disponibles (voir image
ci-dessus). Si l'ordinateur de plongée est connecté à Subsurface pour la
première fois, il est possible que Subsurface demande un nombre ou un code
PIN. Entrez le code indiqué dans le manuel utilisateur de l'ordinatuer de
plongée. Un code ou PIN de 0000 est souvent le code par défaut.

L'étape de jumelage est vérifiée et réalisée automatiquement durant le
processus de téléchargement. Si les périphériques n'ont pas encore été
jumelés, le système demandera l'autorisation de le faire et affichera un
message sur la partie droite de l'écran. _Ajouter un périphérique_, _Tapez
pour configurer votre périphérique_. _Toujours autoriser le jumelage. Après
la sélection d'un item découvert, cliquez sur le bouton
_Enregistrer_. Enfin, sélectionnez le bouton "Télécharger_ dans la boîte de
dialogue de téléchargement et attendez la fin du processus.

[icon="images/icons/important.png"]
[IMPORTANT]
Actuellement, _Subsurface_ ne fonctionne qu'avec les adaptateurs Bluetooth
locaux qui utilisent Microsoft Bluetooth Stack. Si le périphérique local
utilise des drivers _Widcomm_, _Stonestreet One Bluetopia Bluetooth_ ou
_BlueSoleil_, cela ne fonctionnera pas. Cependant, les clés/dongles de ces
fabricants (p. ex. iSonic) qui supportent le Microsoft Bluetooth Stack
fonctionneront.

Un journal de message (log) en bas à gauche de la _sélection de périphérique
Bluetooth distant_ affiche des détails sur le statut actuel du l'agent
Bluetooth. Pour sélectionner un autre ordinateur de plongée utilisant la
"boîte de dialogue de sélection Bluetooth distant", cliquez sur le bouton
avec trois points à côté de l'option _"Choisir le mode de téléchargement
Bluetooth"_.

[icon="images/icons/important.png"]
[IMPORTANT]

*EN CAS DE PROBLÈMES*: si l'adaptateur Bluetooth de l'ordinateur utilisant _Subsurface_
se bloque et que le processus de _téléchargement_ échoue de façon répétée,
 _dissociez_ les périphériques et répétez les étapes ci-dessus. Si cela ne fonctionne pas,
 l' xref:S_HowFindBluetoothDeviceName[_Annexe A_] contient
des informations sur la configuration manuelle et la vérification de la connection Bluetooth
avec _Subsurface_.

[[S_DeviceNames]]
==== Changement du nom d'un ordinateur de plongée

Il peut être nécessaire d'établir une distinction entre différents
ordinateurs de plongée utilisés pour télécharger des données de plongée vers
_Subsurface_. Par exemple, si l'ordinateur d'un équipier provient du même
fabriquant et est dun même modèle que le votre et que les données sont
téléchargées vers le même ordinateur utilisant _Subsurface_, vous voudirez
sans doute en appeler un "Suunto D4 d'Alice" et l'autre "Suunto D4 de
Bob". Ou encore, imaginez un plongeur Tek qui plonge avec deux ordinateurs
ou plus; les données pourraient toutes être téléchargées. Dans ce cas, il
serait prident de les appeler "Suunto D4 (1)" et "Suunto D4 (2)". Ceci est
facilement réalisable dans _Subsurface_. Dans le *Menu principal*,
sélectionnez _Journal -> Éditer les noms des ordinateurs de plongée_. Une
boîte de dialogue s'ouvre, affichant le modèle actuel, son ID et le nom des
ordinateurs utilisés pour le téléchargement. Éditez le champ Nom de
l'ordinateur de plongée concerné. Après avoir sauvegardé le Nom, le journal
de plongée affiche le nom de l'ordinateur concerné à la place du nom du
modèle, permettant une identification plus facile des périphériques.

[[S_MultipleDiveComputers]]
==== Chargement des données d'une plongée spécifique depuis plusieurs ordinateurs de plongée

Certains plongeurs utilisent plus d'un ordinateur de plongée en même,temps,
par exemple en plongée technique. Si vous importez les profils de ces
différents ordinateurs de plongée dans _Subsurface_, les profils peuvent
être vu indépendemment. Pendant le téléchargement, les données de ces
ordinateurs de plongée sont automatiquement fusionnées en une seule
plongée. Les différents profils sont présentés dans le panneau _Profil_ avec
le nom de chaque ordinateur de plongée indiqué en bas à gauche. *Lorsque la
plongée est en surbrillance dans la _Liste des plongées_*, passez du profil
d'un ordinateur de plongée à l'autre en utilisant soit les flèches
gauche/droite du clavier, soit en sélectionnant _Vue Ordinateur précédent_
ou _Vue -> Ordinateur suivant_. Les données du panneau _Notes_ ne sont pas
affectées par le choix de l'un ou l'autre ordinateur de plongée.

[[S_EditDiveInfo]]
==== Mise à jour de l'information importée depuis un ordinateur de plongée.

Une fois les plongées chargées dans la Liste des plongées, l'information
extraite de l'ordinateur de plongée n'est pas complète et d'autres détails
doivent être ajoutés pour obtenir un enregistrement complet des
plongées. Pour ce faire, les onglets *Notes* et *Équipement* et haut à
gauche de la fenêtre de _Subsurface_ doivent être utilisés.

[[S_Notes_dc]]
===== Notes

Pour obtenir un enregistrement plus comple de la plongée, l'utilisateur doit
ajouter manuellement certaines informations. La procédure expliquée
ci-dessous est quasiment identique pour les plongées entrées manuellement et
celles qui sont téléchargées depuis un ordinateur de plongée.

Dans certains cas, vous devrez préciser la date et l'heure de la plongée,
par exemple lorsque vous entrez une plongée manuellement ou qu'un ordinateur
de plongée ne précise pas la date et l'heure de cette plongée. (D'habitude,
la date et l'heure d'une plongée, le mélange de gaz et la température de
l'eau sont obtenues via l'ordinateur de plongée). Si le contenu de l'onglet
*Notes* est modifié ou édité d'une quelconque manière, le message dans la
boîte bleue en haut du panneau affiche que la plongée a été éditée. Si vous
cliquez sur l'onglet *Notes*, les champs suivants sont visibles (voir image
en bas à gauche):

image::images/AddDive3_f22.jpg["FIGURE: The Notes tab", align="center"]

L'image à droite, ci-dessus, montre l'onglet *Notes* complété avec des
informations de plongée. Les champs *Date* et *Heure* indiquent la date et
l'heure de la plongée. En cliquant sur la date, un calendrier est afficher
pour sélectionner la date correcte. Appuyez sur la touche ESC pour fermer le
calendrier. Les valeurs d'heure (heure et minutes) peuvent également être
éditées directement en cliquant sur chacune d'entre elles dans la boîte de
texte et en remplaçant l'information qui s'y trouve.

*Température de l'air/eau*: les températures de l'air et de l'eau pendant la plongée sont affichées
dans des boîtes de texte à droite de l'heure de début de plongée. De nombreux ordinateurs de plongée 
renseignent la température de l'eau, et cette boîte peut contenir cette information.
Si la température de l'air n'est pas renseignée par l'ordinateur de plongée, la première température pour l'eau
peut être utilisée comme température de l'air. En général, elle est proche de la température de l'air.
S'il est nécessaire d'éditer ces informations, seule une valeur est nécessaire, l'unité de température étant
automatiquement fournie par
_Subsurface_ (sur base des _Préférences_, les unités métriques ou impériales
seront utilisées).

[[S_locations]]
*Lieu*:
[icon="images/icons/warning2.png"]
[WARNING]
Les lieux de plongée sont gérés comme une partie *séparée* du carnet de
plongée.  Les informations de plongée dans les onglets *Notes* et
*Équipement* ne peuvent donc PAS être édités en même temps que les
informations sur le site de plongée. Enregistrez toutes les autres
informations (p. ex. instructeur, équipier, équipement, notes à propos de la
plongée) en sélectionnant _Appliquer les modifications_ dans l'onglet
*Notes* AVANT d'éditer les informations sur le site de plongée. Ensuite,
nommez le site de plongée dans la bpîte de texte _Lieu_ dans l'onglet
*Notes*.

*Using existing dive locations:* Type in the name of the dive site, e.g. "Tihany, Lake Balaton, Hungary".
If several dives are
made at the same location, the site information for the first dive is re-used.
Therefore, if a dive site has been used before, the name of that site (and sometimes
the names of similar sites) appears below the dive site text box (image below). Double-click on
the appropriate dive site name and the dive location will be associated with the
dive being entered. Then select _Apply Changes_ (image below) to save the geolocation for this dive site.

image::images/Location1.jpg["FIGURE:Location choice panel", align="center"]

*Entering a new dive location:* On the other hand, having dived at a new dive location,
a new record needs to be created
that could be used for the new and for later dives at this new site. Type the name of the new dive site into the text box
(image A below).

image::images/Globe_image1.jpg["FIGURE:Location creation panel", align="center"]

Double-click on the blue bar below the new dive location name. The blue bar
disappears (image B above) and the globe icon on the right-hand of the
location name text box turns blue.  In the Dive Map part of the _Subsurface_
window, a world map appears (image C above). Click on the blue globe icon to
the right of the dive site name in the _Notes_ panel (image B above). This
opens a window for entering the details of the new dive location (image A
below).  The globe icon changes to indicate that the location data are being
edited. The only important data here are the geographic coordinates of the
dive location.

image::images/Globe_image2.jpg["FIGURE:Location creation panel", align="center"]

There are three ways of adding the the coordinates:

*(1):* Entrer les coordonnées manuellement si vous les connaissez,
   en utilisant un des quatre formats avec la latitude suivie de la longitude :

	Format ISO 6709 Annexe D, ex. 30°13'28.9"N 30°49'1.5"E
	Degrés et minutes décimales, ex. N30° 13.49760' , E30° 49.30788'
	Degrés minutes secondes, ex. N30° 13' 29.8" , E30° 49' 1.5"
	Degrés décimaux, ex. 30.22496 , 30.821798

Les latitudes dans l'hémisphère sud sont données avec un *S*, ex. S30°, ou
avec une valeur négative, ex. -30.22496. De la même façon, les longitudes
ouest sont données avec un *W*, ex. W07°, ou avec une valeur négative,
ex. -7.34323. Certains claviers ne comportent par le signe degré (°). Il
peut être remplacé par un *d* comme ceci: N30d W20d. Entrer tout autre
informations à propos du site de plongée (Description et notes), puis
sélectionner _Appliquer les modifications_ pour sauvegarder la
géolocalisation de ce site. Les informations du site de plongée pourront
être modifiées ultérieurement, en cliquant sur l'icône de globe à droite du
nom du site de plongée, dans l'"onglet notes".

*(2):* Use the Dive Map to specify the coordinates. The Dive map now shows
all the existing dive lications in grey as well as an additional marker in red
(image B above). Drag the red marker to the location of the dive site being entered.
The map can be dragged and zoomed using the mouse wheel. Position the red marker
by dragging it on the map, zooming in on the appropriate part of the map and placing
the marker at an appropriate position (image B below). The coordinates of the dive
location are automatically inserted into the appropriate text box in the dive location
information window (image A below). Enter any other contextual information about the dive site (Description and Notes),
then select _Apply Changes_ to save the geolocation for this dive site.
The dive site information can later be edited by clicking the globe icon to the right of the
dive site name in the *Notes tab*.

image::images/Globe_image3.jpg["FIGURE:Location creation panel", align="center"]

Once the dive location data have been saved, the dive on the Dive List has a
globe icon immediately to the left of the location name of a particular
dive.

*(3):* Utiliser l'application Subsurface-Mobile ou l'application _Subsurface_ Companion avec un 
périphérique Android ou un iPhone avec GPS si les coordonnées du site de plongée ont été stockées 
en utilisant une de ces applications. 
xref:S_Companion[Cliquez ici pour plus d'information]

*Important*: les coordonnées GPS d'un site de plongée sont liées au nom de
lieu - ainsi, *enregistrer* un site de plongée avec uniquement les coordonnées mais aucun nom
causera des problèmes. (Subsurface pensera que toutes ces
plongées ont le même lieu et tentera de garder leurs coordonnées GPS
identiques).

*Recherche du nom d'un site de plongée*: si vous avez entré les coordonnées dans la boîte
de texte appropriée, vous pouvez lancer une recherche de nom sur base des coordonnées.
Ceci est réalisé lorsque _Subsurface_ utilise Internet pour trouver le nom d'un site de plongée
sur base des coordonnées que vous avez entrées. Si un nom est trouvé, il est
automatiquement inséré dans la boîte Étiquettes. La liste (intitulée _"Sites de plongée situés aux mêmes coordonnées_") en bas
du panneau du site de plongée contient les noms d'autres sites de plongée utilisés
au même endroit. Par exemple, si le site de plongée est "Blue Hole" et qu'il y a plusieurs
sites nommés "Blue Hole", ils seront tous listés.

Entrez toute information contextuelle relative au site de plongée
(Description et Notes) puis sélectionnez _Appliquer les modifications_ pour
enregistrer la géolocalisation du site de plongée. L'information concernant
le site de plongée peut être éditée ultérieurement en cliquant sur l'icone
en forme de globe à droite du nom du site de plongée dans l'onglet *Notes*.

*Mode de plongée*: cette liste déroulante vous permet de choisir le type de plongée
réalisée. Les options sont OC (scaphandre en circuit ouvert, le choix par défaut pour la plupart des plongées loisir),
Apnée (plongée sans scaphandre), CCR (recycleur
en circuit fermé) et pSCR (recycleur passif semi-fermé).

*Moniteur/Guide de palanquée*: le nom du moniteur ou du guide de palanquée doit être
entré dans ce champ
qui permet une sélection automatique basé sur la liste des moniteurs
déjà présents dans le carnet en cours.

*Équipier*: dans ce champ, entrez le(s) nom(s) de votre/vos équipier(s)
(sparés par des virgules) qui participaient à la
plongée. Une sélection automatique se base sur la liste des équipiers déjà présents dans le
carnet en cours.

*Combinaison*: le type de combinaison peut être entré ici.
Une sélection automatique est disponible.
Certains utilisateurs de vêtement étanche peuvent utiliser ce champ pour enregistrer quelle ensemble de
combinaison et souris ils ont utilisé.

*Évaluation*: attribue une évaluation subjective à une plongée sur une
échelle de 5 points en cliquant sur l'étoile correspondante.

*Visibilité*: attribue une évaluation de la visibilité à une plongée sur une
échelle de 5 points en cliquant sur l'étoile correspondante.

*Étiquettes*: il est possible de définir ici des étiquettes qui décrivent le
type de plongée (séparées par des virgules). Des exemples courants d'étiquettes sont bateau, 
plongée dérivante, exercice, grotte, etc.
_Subsurface_ contient de nombreuses étiquettes. En commençant à taper une étiquette, _Subsurface_ liste
les étiquettes correspondant à la frappe. Par exemple, en entrant
+cav+, les étiquettes *cave* et *caverne* sont proposées.

*Notes*: toute information supplémentaire concernant une plongée peut être entrée ici.

Les boutons _Appliquer les modifications_ et _Annuler les modifications_
sont utilisés pour enregistrer toutes les informations des onglets du
panneau *Informations* et du panneau *Profil de plongée*. Utilisez-les
lorsque *TOUTES* les autres informations ont été ajoutées. L'image
xref:S_Notes_dc[située au début de cette section] montre un exemple de
l'onglet *Notes* après avoir complété les informations d'une plongée.

===== Équipement

L'onglet Équipement permet d'entrer les informations concernant le type de
bloc et le gaz utilisé, ainsi que le lestage utilisé pour la plongée. Le
message dans la boîte bleue en haut du panneau:

image::images/BlueEditBar_f22.jpg["FIGURE: Blue edit bar", align="center"]

indique que l'équipement a été édité. C'est une partie hautement interactive
de _Subsurface_ et les informations sur les blocs et les gaz (entrées ici)
déterminent le comportement du *Profil de plongée* (panneau en haut à
droite).

[[cylinder_definitions]]
*Blocs*: les informations concernant les blocs sont entrées via une boîte de dialogue
qui ressemble à ceci:

image::images/DC_gas-dialogue1_f20.jpg["FIGURE: Initial cylinder dialogue", align="center"]

Pour les plongées entrées manuellement, cette information doit être
entrée. Pour les ordinateurs de plongée, _Subsurface_ reçoit souvent
l'information concernant le gaz utilisé et insère automatiquement sa
composition (% d'oxygène ou % d'hélium) dans le tableau. Le bouton + en haut
à droite permet d'ajouter des blocs pour cette plongée. L'icone de corbeille
noire à gauche permet de supprimer les informations d'un bloc. Notez qu'il
n'est pas possible de supprimer un bloc s'il est utilisé durant la
plongée. Un bloc doit être implicitement utilisé pour la plongée, même sans
événement de changement de gaz.  Commencez par sélectionner un type de bloc
dans la partie gauche du tableau.  Pour sélectionner un bloc, il faut
cliquer sur la boîte _Type_. Cela fera apparaître un bouton permettant
d'afficher une liste déroulante de blocs:

image::images/DC_gas-dialogue2_f20.jpg["FIGURE: The cylinder drop-down list button", align="center"]

La liste déroulante peut être utilisée pour sélectionner le type de bloc
utilisé pour cette plongée, ou il suffit de commencer à taper dans la boîte
pour afficher les options disponibles selon les lettres entrées. La *Taille*
du bloc ainsi que sa pression de service (_Pression de service) seront
automatiquement affichées dans la boîte de dialogue.

Ensuite, indiquez la pression de déart et celle d'arrivée pour le gaz
spécifié pendant la plongée. L'unité de pression (métrique/impériale)
correspond au réglage choisi dans les _Préférences_.

Pour terminer, renseignez le mélange de gaz utilisé. S'il s'agit d'air, la
valeur de 21% peut être entrée dans la case Oxygène, ou ce champ peut être
laissé vide. Si du nitrox ou du trimix a été utilisé, les pourcentages
d'oxygène et/ou d'hélium doivent être entrés.  Tout champ non requis
concerné doit être laissé vide. Après avoir entré les informations du bloc,
enregistrez les données soit en pressant la douche _ENTRÉE_, soit en
cliquant hors de la case contenant le curseur. Les informatioins pour les
blocs supplémentaires peuvent être ajoutées en utilisant le bouton + en haut
à droite. Voici un exemple d'une description complète pour une plongée
utilisant deux blocs (air et EAN50):

image::images/CylinderDataEntry3_f20.jpg["FIGURE: a completed cylinder dive information table", align="center"]

*Poids*: les informations à propos du système de lestage peuvent être entrés
via une interface similaire à celles des blocs. Si vous cliquez
sur le bouton + en haut à droite , le tableau apparaît
comme suit:

image::images/WeightsDataEntry1_f20.jpg["FIGURE:The Weights dialogue", align="center"]

En cliquant sur le champ: _Type_, une liste déroulante devient accessible
via une flèche vers le bas:

image::images/WeightsDataEntry2_f20.jpg["FIGURE:Weights type drop-down list button", align="center"]
Celle-ci peut être utilisée pour sélectionner le type de poids utilisé
durant la plongée. Vous pouvez commencer à taper dans la case pour spécifier
un mécanisme différent de lestage qui sera sauvegardé par _Subsurface_. Dans
le champ *Poids*, entrez la quantité de poids utilisé durant la
plongée. Après avoir spécifié le système de lestage, enregistrez les données
avec la touche _ENTRÉE_ du clavier ou en cliquant hors de la case contenant
le curseur.  Il est possible d'entrer des informations pour plusieurs
systèmes de lestage en utilisant le pouton + en haut à droite. Les systèmes
de lestage peuvent être supprimés en utilisant l'icone de corbeille sur la
gauche. Voici un exemple d'informations pour une plongée avec deux systèmes
de lestage: des poids intégrés et une ceinture:

image::images/WeightsDataEntry3_f20.jpg["FIGURE: A completed weights information table", align="center"]

==== Éditer simultanément une sélection de plusieurs plongées

_METHOD 1_: After downloading dives from a dive computer, the dive profiles
of each is shown in the *Dive profile* tab, as well as a few items of
information in the *Notes* tab (e.g. water temperature) and in the
*Equipment* tab (e.g. gas pressures and gas composition). Other fields
remain empty.  It may be useful to simultaneously edit some of the fields in
the *Notes* and *Equipment* tabs.  For instance, it’s possible that a diver
performed several dives during a single day, using identical equipment at
the same dive site, or with the same divemaster and/or buddy or
tags. Instead of completing the information for each dive separately, select
all the dives for that day in the *Dive List* and insert the same
information in the *Notes* and *Equipment* fields that need identical
information. This is done by editing the dive notes or the equipment for any
one of the selected dives.

Simultaneous editing only works with fields that do not already contain
information.  This means if some fields have been edited for a particular
dive among the selected dives, these are not changed while editing the dives
simultaneously. Technically, the rule for editing several dives
simultaneously is: if the data field being edited contains _exactly the same
information_ for all the dives that have been selected, the new, edited
information is substituted for all the selected dives. Otherwise only the
edited dive is changed, even though several dives have been selected in the
*Dive List*. This speeds up the completion of the dive log after several
similar dives.

[[S_CopyComponents]]
_METHOD 2_:There is a different way of achieving the same goal. Select a
dive with all the appropriate information typed into the *Notes* and
*Equipment* tabs. Then, from the main menu, select _Log -> Copy dive
components_.  A box is presented with a selection of check boxes for most of
the fields in the *Notes* and *Equipment* tabs.  Select the fields to be
copied from the currently selected dive, then select _OK_. Now, in the *Dive
List*, select the dives into which this information is to be pasted. Then,
from the main menu, select _Log -> Paste dive components_.  All the selected
dives now contain the data initially selected in the original source dive
log.

[[S_Bookmarks]]
==== Ajout des signets à une plongée

De nombreux plongeurs désirent annonter leurs plongées avec du texte
indiquant des événements particuliers, p. ex. "J'ai vu des dauphins", ou
"Déploiement de parachute de palier". Ceci peut ^être facilement réalisé:

 - Cliquez-droit à l'endroit voulu dans le profil de plongée. Cela fait
   apparaître le menu contextuel du profil de plongée. Sélectionnez _Ajouter un
   signet_. Un drapeau rouge est alors placé à cet endroit sur le profil de
   plongée (voir *A* ci-dessous).

 - Cliquez-droit sur le drapeau rouge. Ceci fait apparaître un menu contextuel
   (voir *B* ci-dessous). Sélectionnez _Modifier le nom_.

 - Une boîte de texte s'affiche. Entrez le texte explicatif pour le signet
   (voir *C* ci-dessous). Sélectionnez _OK_. Ceci enregistrera le texte associé
   au signet.

 - En survolant le signet rouge avec la souris, le texte associé est affiché
   dans le bas de la boîte d'information (voir *D* ci-dessous).

image::images/Bookmarks.jpg["FIGURE: Bookmark dialog", align="center"]


==== Enregistrer les informations de plongée mises à jour

Les informations entrées dans les onglets *Notes* et *Équipement* peuvent
être enregistrées en utilisant les deux boutons en haut à droite de l'onglet
*Notes*. Si vous cliquez sur le bouton _Appliquer les modifications_, les
données de la plongée sont enregistrées dans l'image mémoire de la
plongée. Si le bouton _Annuler les modifications_ est cliqué, les données de
plongées nouvellement entrées sont effacées de la mémoire de l'ordinateur,
bien que le profil de plongée soit conservé. Lorsque l'utilisateur quitte
_Subsurface_, il y a une dernière notificatioin pour confirmer que les
nouvelles données doivent être enregistrées de manière permanente sur le
disque de l'ordinateur.

=== Importer les informations à partir d'autres sources de données numériques ou d'autres formats de données

[[S_ImportingAlienDiveLogs]]

Many divers log their dives using the proprietary software provided by the
manufacturers of their dive computers.  _Subsurface_ can import dive logs
from a range of other dive log software. While import from some software is
supported natively, others require export of the the dive log to an
intermediate format that can then be imported into _Subsurface_.  Currently,
_Subsurface_ supports importing CSV log files from several sources.  Dive
log import from APD LogViewer, XP5, Sensus and Seabear files are
preconfigured, but because the import is flexible, users can configure their
own imports.  Manually kept log files (e.g. a spreadsheet) can also be
imported by configuring the CSV import.  _Subsurface_ can also import UDDF
and UDCF files used by some dive log software and some dive computers, like
the Heinrichs & Weikamp DR5. Finally, for some dive log software like Mares
Dive Organizer we currently recommend importing the logbook first into a web
service like _divelogs.de_ and then import from there with
_Subsurface_. Divelogs.de supports a few additional logbook formats that
_Subsurface_ currently cannot handle.

If the format of other software is supported natively on Subsurface, select
either _Import -> Import log files_ or _File -> Open log file_. Notice that
the import adds the imported data to the current *Dive list*, and the open
style starts a new dive list. _Subsurface_ supports the data formats of many
dive computers, including Suunto, Shearwater and some CCR equipment. When
importing dives, _Subsurface_ tries to detect multiple records for the same
dive and merges the information as best as it can. If there are no time zone
issues (or other reasons that would cause the beginning time of the dives to
be significantly different) _Subsurface_ will not create duplicate
entries. Below is more specific information to import data to _Subsurface_.

==== Utilisation de la boîte de dialogue universelle d'importation
[[Unified_import]]

L'importation de plongées depuis d'autres logiciels se fait au travers d'une
interface universelle en sélectionnant _Importer_ depuis le menu principal,
puis en cliquant sur _Importer des fichiers de plongée_. Ceci fera
apparaître la boîte de dialogue *A*, comme ci-dessous.

image::images/Import1_f20.jpg["FIGURE: Import dialogue: step 1", align="center"]

En bas à droite se trouve la liste déroulante avec la mention par défaut
_Dive Log Files_ qui permet d'accéder aux différents types d'importations
directes disponibles, comme dans le dialogue *B* ci-dessus. Actuellement, il
s'agit de:

 - Carnet de plongée formatés en XML (DivingLog 5.0, MacDive et divers autres
   systèmes de carnet de plongée)
 - Carnets de plongée Cochran
 - Carnets de plongée formatés en UDDF (p. ex. Kenozooid)
 - Carnets de plongée formatés en UDCF
 - Logs Poseidon MkVI CCR
 - Logs APD Inspiration/Evolution CCR
 - Logs LiquiVision
 - Logs divelogs.de
 - Logs OSTC Tools
 - JDiveLog
 - Suunto Dive Manager (DM3, DM4, DM5)
 - Fichers DL7 utilisés par Diver's Alert network (DAN)
 - Logs Underwater technologies AV1
 - Logs Divesoft
 - Logs Poseidon MK VI eCCR
 - Carnet de plongée CSV (format texte ou tableau), y compris les logs APD CCR

Sélectionner le format voulu puis le fichier recherché dans la fenêtre
contenant la liste des fichiers sur la droite de la boîte de dialogue,
ouvrira le carnet de plongée importé dans la *Liste des plongées* de
_Subsurface_. Certains autres formats, non accessible depuis la boîte de
dialogue d'importation, sont également supportés, comme expliqué ci-dessous.

==== Importation depuis OSTCTools

_OSTC Tools_ is a Microsoft-based suite of dive download and dive management
tools for the OSTC family of dive computers. _OSTC Tools_ downloads dive
data from the dive computer and stores it as a binary file with file
extension _.dive_ . Subsurface can directly import these files when using
the universal import dialogue. From the dropdown list at the bottom right
select _OSTCTools Files (.dive .DIVE)_. This makes the _OSTC Tools_ dive
logs visible in the file list panel. Select one or more dive, then click the
_Open_ button. The OSTC dives are shown in the *Dive List* panel.

Tous les périphériques H&W supportés par OSTCTools peuvent être importés
dans _Subsurface_. Ceci comprend les modèles OSTC, OSTC Mk2, OSTC 2N/2C,
OSTC3, OSTC Sport, et probablement, bien que non testés, Frog, OSTC2 et OSTC
CR.

Ne perdez pas de vue qu'OSTCTools n'est *pas* un vrai logiciel de carnet de
plongée, mais plutôt un ensemble d'outils pour l'analyse et la gestion des
périphériques OSTC. Seules les données brutes de l'ordinateur de plongée
seront importées dans _Subsurface_, le reste des données (équipiers,
équipement, notes, etc.) doit être complété manuellement.


==== Importation depuis Mares Dive Organizer V2.1

Vu que Mares utilise un logiciel Windows propriétaire non-compatible avec
les applications multi-plateformes, ces carnets de plongée ne peuvent pas
être importés directement dans _Subsurface_. Ceux-ci doivent être important
en suivant une procédure en trois étapes, en utilisant _www.divelogs.de_
comme passerelle pour extraire les informations du carnet de plongée.

1. Exportez les données du carnet de plongée depuis le Mares Dive Organizer
   vers votre bureau, en utilisant un fichier avec l'extension
   _.sdf_. référez-vous à l'xref:Mares_Export[Annexe C] pour plus
   d'information.
2. Data should then be imported into _www.divelogs.de_. First, create a user
   account in _www.divelogs.de_ and Log into that web site, then select _Import
   Logbook -> Dive Organizer from the menu on the left hand side.  The
   instructions must be carefully followed to transfer the dive information (in
   _.sdf_ format) from the Dive Organizer database to _www.divelogs.de_.
3. Enfin, importez les plongées depuis _divelogs.de_ vers _Subsurface_, en
   suivant les instructions ci-dessous.


[[S_SmartTrakImport]]
==== Importer les logs Scubapro _SmartTrak_

_SmartTrak_ stores the raw data from a Uwatec/Scubapro dive computer along
with a plethora of other data manually added by the user, ranging from dive
points to buddies data or DAN survey info. However, this is Microsoft
Windows-based propietary software by Uwatec (today Scubapro)  using
Microsoft Access databases, preventing the integration the importer into the
_Subsurface_ core application.

A stand alone tool for Linux has been developed to import the _.slg_ files
generated by SmartTrak to Subsurface's _.xml_ format. It can be built
together with _Subsurface_ for Linux systems. Two dependencies need to be
installed in your system before building: _libglib2.0_ and _libmdb2_.

In addition, a web service is available for divelog convertions from
SmartTrak to _Subsurface_ (see below).

N'hésitez pas à contacter l'équipe de développement de _Subsurface_ via
mailto:subsurface@subsurface-divelog.org[notre liste de diffusion] pour de
l'aide à l'importation des lofs _SmartTrak_.

===== Compiler _smtk2ssrf_

Assuming the above dependencies have been installed and the _Subsurface_
source tree is in the directory _~/src/subsurface_, then:

- Move to the source tree directory.
- Run " $ ccmake build " and set SMARTTRAK_IMPORT option to *on* (off by
  default).
- Generate with [c] and save and exit with [g].
- Build as you prefer, using the _build.sh_ script (recomended) or moving to
  build directory and running _make_.
- After a successful build, there will be an executable named _smtk2ssrf_ in
  the _subsurface/build_ directory.  Copy or move it to a directory in your
  $PATH, e.g. _~/bin_.

===== Utilisation

_smtk2ssrf_ accepts 0, 2 or more parameters. If it is launched without
parameters in a graphical user interface, a simple window opens for choosing
the _.slg_ file(s) to import and a destination file to store the
_Subsurface_-formatted data into (see image below).

image::images/smtk2ssrf.jpg["FIGURE:Download from SmartTrak", align="center"]

[icon="images/icons/warning2.png"]
[WARNING]
Existing data in the destination file will be erased, so *DO NOT* use a
regular subsurface divelog file as a destination: rather, specify a *new*
filename as a destination.

If launched from a command line with two or more parameters, the format is
as follows:

	$ smrtk2ssrf /input/file_1.slg /input/file_2.slg /output/file3.xml

where _input_ is the directory containing the .slg file(s) and _output_ is
the directory where the _Subsurface_-formatted output is written to.  Files
_file_1.slg_ and _file_2.slg_ in the _input_ directory are imported and
stored in _file3.xml_ in the _output_ directory. Check any warning and error
messages in the console or in the graphical window: some may be relevant as
support for Galileo family of dive computers is still a work in progress.

===== For the lazy: a web service to convert _SmartTrak_ to _Subsurface_

Open the website at:

_https://thetheoreticaldiver.org/rch-cgi-bin/smtk2ssrf.pl_

This is a no-frills web service for converting _SmartTrak_ dive logs to
_Subsurface_. Select the browse button. This allows you to browse your
computer directories and to select the _SmartTrak_ divelog to be
converted. Once it has been selected, click the _Submit query_ button. After
a short while, a dialog box appears (image below) for saving the converted
file to the local computer.

image::images/strk2ssrf_web.jpg["FIGURE:Web service to convert SmartTrak divelog", align="center"]

===== Fusionner les plongées importées dans un carnet de plongée existant

Open the new file (generated in the previous steps) using _Subsurface_ and
check the dives and data.  If everything is fine, close the _.xml_ file and
open your regular divelog.  Then from the *Main Menu* select _Import ->
Import log file_ and choose the _.xml_ file containing the imported dives:
these will show in the *Dive List*, time ordered, along with the existing
dives.  The new dives, although time ordered, will keep the numbering system
from _SmartTrak_, so a renumbering action is needed. See the section on
xref:S_Renumber[Renumbering the dives] for instructions on this topic.

[[S_ImportingDivelogsDe]]
==== Importer des plongées depuis *divelogs.de*

Importing dive information from _divelogs.de_ is simple, using a single
dialogue box. The _Import -> Import from Divelogs.de_ option should be
selected from the Main Menu. This brings up a dialogue box (see image *A*
below). Enter a user-ID and password for _divelogs.de_ and then select the
_Download_ button. Download from _divelogs.de_ starts immediately,
displaying a progress bar in the dialogue box. At the end of the download,
the success status is shown (see image *B*, below). The _Apply_ button
should then be selected, after which the imported dives appear in the
_Subsurface_ *Dive List* panel.

image::images/Divelogs1.jpg["FIGURE:Download from Divelogs.de", align="center"]

[[S_ImportingCSVData]]
==== Importer des données au format CSV

A comma-separated file (.csv) can be used to import dive information either
as dive profiles (as in the case of the APD Inspiration and Evolution closed
circuit rebreathers) or as dive metadata (in case the user keeps dive data
in a spreadsheet). The _CSV_ format is a universal simplified format that
allows easy information exchange between different computers or software
packages. For an introduction to CSV-formatted files see xref:S_CSV_Intro[A
Diver's Introduction To CSV Files]. _Subsurface_ dive logs can also be
exported in _CSV_ format to other software that reads this format. See
xref:S_Appendix_D[APPENDIX D: Exporting a spreadsheet to CSV format] for
information that may be helpful for importing spreadsheet-based data into
_Subsurface_.

[[S_ImportingCSVDives]]
===== Importer les plongées au format CSV à partir des ordinateurs de plongées ou d'autres logiciels de carnet de plongée

_CSV_ files can be viewed using an ordinary text editor. A _CSV_ file is
normally organized into a single line that provides the headers (or _field
names_ or _column headings_) of the data columns, followed by the data, one
record per line.

Il y a deux types de carnets de plongée au format _CSV_ pouvant être
importées dans _Subsurface_:

1. _CSV dive details_: This dive log format contains similar information to
   that of a typical written dive log, e.g. dive date and time, dive depth,
   dive duration, names of buddy and divemaster and information about cylinder
   pressures before and after the dive, as well as comments about the dive. All
   the data for a single dive go on a single line of text, following the order
   of the column headings.

2. _CSV dive profile_: This dive log format includes much more information
   about a single dive. For instance there may be information at 30-second
   intervals, indicating depth, water temperature, and cylinder pressure at
   that moment in time. Each line contains the information for a single instant
   in time during the dive, 30 seconds after that of the previous instant. Many
   lines are required to complete the depth profile information for a single
   dive. This is a common export format used by closed-circuit rebreather (CCR)
   dive equipment and many software packages that handle dive computer data
   and/or dive logs.

Before being able to import the _CSV_ data to _Subsurface_ *you need to know
a few things about the data being imported*:

a. Which character separates the different columns within a single line of
   data? This field separator should be either a comma (,) a semicolon (;) or a
   TAB character.  This can be determined by opening the file with a text
   editor. If it is comma-delimited or semicolon-delimited, the comma or
   semicolon characters between the values are clearly visible. If these are
   not evident and the numbers are aligned in columns, the file is probably
   TAB-delimited (i.e. it uses a TAB as a field separator).

b. Which data columns need to be imported into _Subsurface_? Is it a _CSV dive
   details_ file or a _CSV dive profile_ file? Open the file using a text
   editor and note the titles of the columns to be imported and their column
   positions.

c. Les données numériques (p. ex. la profondeur de plongée) sont-elles en
   système métrique ou mesures impériales?

With this information, importing the data into _Subsurface_ is
straightforward. Select _Import -> Import Log Files_ from the main menu. In
the resulting file selection menu, select _CSV files_ (towards the bottom
right). This shows all .CSV files in the selected directory. Select the file
that needs to be imported. A configuration panel appears as depicted below:

image::images/csv_import1_f20.jpg["FIGURE: CSV download dialogue 1", align="center"]

At the top left, there is a dropdown list containing pre- configured
settings for common dive computers and software packages.
 If the _CSV_ file being imported originated from any of
these pre-configured items, select it. Otherwise use the _Manual Import_
option. The configuration panel also has dropdown lists for the specification of the appropriate
field separator (Tab, comma or semicolon), the date format used in the _CSV_ file,
the time units (seconds, minutes or minutes:seconds), as well as the unit system
(metric or imperial). Selecting the appropriate options among these is critical for
successful data import.

Complete this by ensuring that all the data columns have the appropriate
column headings. The top blue row of the data table contains the column
headings found in the _CSV_ data file. The blue row of balloons immediately
above these contains the names understood by _Subsurface_. These balloons
can be moved using a drag-and-drop action. For instance, _Subsurface_
expects the column heading for Dive number (" # ") to be "Dive # ". If the
column heading that _Subsurface_ expects is not in the blue row, drag the
appropriate balloon from the upper area and drop it in the appropriate blue
cell at the top of the table. For example, to indicate the correct column
for "Dive #", drag the ballooned item labelled "Dive # " and drop it in the
blue cell immediately above the white cell containing " # ", depicted in the
image below.

image::images/csv_import2_f20.jpg["FIGURE: CSV download dialogue 2", align="center"]

Continue in this way to ensure all the column headings in the blue row of
cells correspond to the headings listed in the top part of the dialogue.
When finished, select the _OK_ button on the bottom right of the dialogue.
The data from the _CSV_ file are imported and shown in the *Dive List*
panel.

[[S_CSV_Intro]]
****
*Introduction aux fichiers _CSV_ pour la plongée*
[icon="images/icons/important.png"]
[IMPORTANT]

_CSV_ is an abbreviation for a data file format: _Comma-Separated
Values_. It is a file format that allows you to view or edit information
using a text editor like Notepad (Windows), gedit (Linux) or TextWrangler
(OS/X). There are two main advantages of the _CSV_ format.  First, the data
are easily editable as text without any proprietary software.  Second, all
information is human-readable, not obscured by any custom or proprietary
attributes that proprietary software inserts into files.  Because of its
simplicity the _CSV_ format is used as an interchange format between many
software packages, e.g. between spreadsheet, statistical, graphics, database
and diving software. Within _Subsurface_, _CSV_ files can also be used to
import information from other sources like spreadsheet-based dive logs and
some dive computers.

The most important attribute of a _CSV_ file is the _field separator_, the
character used to separate fields within a single line. The field separator
is frequently a comma, a colon, a SPACE character or a TAB character. When
exporting data from spreadsheet software, the field separator needs to be
specified in order to create the _CSV_ file. _CSV_ files are normally
organized into a single line that provides the headers (or _field names_) of
the data columns, followed by the data, one record per line. Note that each
field name may comprise more than one word separated by spaces; for instance
_Dive site_, below. Here is an example of dive information for four dives
using a comma as a field separator:

	Dive site,Dive date,Time,Dive_duration, Dive_depth,Dive buddy
	Illovo Beach,2012-11-23,10:45,46:15,18.4,John Smith
	Key Largo,2012-11-24,09:12,34:15,20.4,Jason McDonald
	Wismar Baltic,2012-12-01,10:13,35:27,15.4,Dieter Albrecht
	Pulau Weh,2012-12-20,09:46,55:56,38.6,Karaeng Bontonompo

Les données ci-dessus ne sont pas aisément lisible pour un être
humain. Voici les mêmes informations dans un format séparé par des
tabulations :

	Dive site	Dive date	Time	Dive_duration	Dive_depth	Dive buddy
	Illovo Beach	2012-11-23	10:45	46:15	18.4	John Smith
	Key Largo	2012-11-24	09:12	34:15	20.4	Jason McDonald
	Wismar Baltic	2012-12-01	10:13	35:27	15.4	Dieter Albrecht
	Pulau Weh	2012-12-20	09:46	55:56	38.6	Karaeng Bontonompo

It is clear why many people prefer the TAB-delimited format to the
comma-delimited format. The disadvantage is that you cannot see the TAB
characters. For instance, the space between _Dive_ and _date_ in the top
line may be a SPACE character or a TAB character (in this case it is a SPACE
character: the tabs are before and after _Dive date_). If the field names in
the first line are long, the alignment with data in the other lines cannot
be maintained. Here is a highly simplified and shortened TAB-delimited
example of a _CSV_ dive log from an APD closed-circuit rebreather (CCR) dive
computer:

	Dive Time (s)	Depth (m)	pO~2~ - Setpoint (Bar) 	pO~2~ - C1 Cell 1 (Bar)	Ambient temp. (Celsius)
	0       0.0     0.70    0.81    13.1
	0       1.2     0.70    0.71    13.1
	0       0.0     0.70    0.71    13.1
	0       1.2     0.70    0.71    13.2
	0       1.2     0.70    0.71    13.1
	10      1.6     0.70    0.72    12.7
	20      1.6     0.70    0.71    12.6
	30      1.7     0.70    0.71    12.6
	40      1.8     0.70    0.68    12.5

When a _CSV_ file is selected for import, _Subsurface_ displays the column
headers as well as some of the data in the first few lines of the _CSV_
file, making it much easier to work with _CSV_ files.  _CSV_ files can be
used in many contexts for importing data into a _Subsurface_ dive log.
Knowing a few basic things about the content of the _CSV_ file helps with a
smooth import of the dives into _Subsurface_.

****

[icon="images/icons/important.png"]
[IMPORTANT]
But, the _CSV_ import has a couple of caveats. Avoid some special characters
like ampersand (&), less than (<), greater than (>) and double quotes (") as
part of the numbers or text within a cell. The file should use UTF-8
character set, if using non-ASCII characters. Also the size of the _CSV_
file might cause problems. Importing 100 dives at a time (_CSV dive
details_) works, but larger files might exceed the limits of the parser
used. When encountering problems with _CSV_ imports, first try with a
smaller file to make sure everything works.

=== Importation des coordonnées de plongée depuis un appareil mobile avec GPS.

Un smartphone avec GPS peut être utilisé pour stocker les lieux de
plongées. Ceci est réalisé comme suit:

Taking the mobile device along on the dive boat / liveabord while
automatically collecting dive site coordinate information.

2) Uploading the coordinates from the mobile device to the _Subsurface_
   Internet server.

Syncronising the dives in the _Subsurface_ dive list with the coordinates
stored on the _Subsurface_ Internet server.

_Subsurface_ comporte deux outils pour réaliser cela :

- L'application _Subsurface Companion_ (Android et iOS).

- L'application _Subsurface-mobile_ (Android et iOS)

Both of these applications perform the collection of dive site coordinates
and the synchronisation with dives in the _Subsurface_ dive list. However,
the Companion App is not being further developed and has largely been
replaced by the _Subsurface-mobile_ app. While the _Companion app_ serves
exclusively to collect dive site coordinates and to make these available to
the _Subsurface_ desktop version, _Subsurface-mobile_ performs many of the
functions of the desktop version, including the management and viewing of
dive information. Below, we describe how to perform the above three steps
using each of the two mobile apps.

Pour plus d'information sur l'utilisation de l'application _Subsurface
Companion_, cliquez xref:S_Companion[_ici_].

==== Storing and and using GPS locations using  _Subsurface-mobile_

===== Install _Subsurface-mobile_

Find _Subsurface-mobile_ on Google Play and install it on an Android
device. The app is free. The iOS version is currently
experimental. _Subsurface-mobile_ has an extensive
https://subsurface-divelog.org/documentation/subsurface-mobile-user-manual[user
manual] accessible from within that app.

===== Create a _Subsurface-mobile_ account

This topic is discussed at length in the _Subsurface-mobile_ user manual. In
the Credentials screen of _Subsurface-mobile_ provide an e-mail address and
a user password that enables subsequent access. A PIN number is e-mailed
from the _Subsurface_ Internet server to the e-mail address that has been
provided.  Type the PIN into the appropriate text field in the Credentials
screen (see image below).  The _Subsurface_ Internet server notifies the
user that a new user has been registered.

*N.B.:* To successfully create a user account, the mobile device must have Internet connectivity,
either through the cellular network or via wifi.

image::images/MobileCredentials.jpg["FIGURE: Subsurface-mobile, credentials screen", align="center"]


===== Configure auto-collecting of GPS coordinates

Activate the main menu of _Subsurface-mobile_ by selecting the "hamburger"
menu button at the bottom left of the _Subsurface-mobile_ screen (see image
above), then select _GPS_ -> _Preferences_ (see image below). The collection
of GPS locations is done in the background and automatically, using two
settings:

- _Time threshold._ (minutes). The app will try to get a location every X
  minutes

- _Distance threshold._ (meters). Minimum distance between two locations.

*How are GPS coordinates collected?* Assuming the diver sets 5 minutes and 50
meters in the settings above, the app will start by recording a location at the current
location, followed by another one at every 5 minutes *or* every time you move 50 m
from previous location, whichever happens first.
If subsequent locations are within a radius of 50 meters from the previous one,
a new location is not saved. If the diver is not moving, only one location is
saved, at least until the _Time-threshold_ period has elapsed.
If the diver moves, a trace of the route is obtained by saving a location every 50 meters.

===== Activate the automated recording of GPS locations

The _Subsurface-mobile_ main menu has a checkbox at the bottom left labled
_Run location service_ (see image below). Checking the box starts the
automated recording of GPS positions.

image::images/MobileMenu.jpg["FIGURE: Subsurface-mobile main menu", align="center"]

===== After the dive, stop the automated recording of GPS locations

Uncheck the check box at the bottom left of the _Subsurface-mobile_ main
menu.

===== Upload the GPS locations onto the _Subsurface_ Internet server.

*N.B.:* Uploading the GPS locations to the Internet can only take place if the mobile
device has reliable access to the Internet, either via a cellular network or
via a wifi connection. If the Internet is not accessible from the dive site(s),
then GPS uploading can only take place after the dive or after the dive trip,
when an Internet connection has been re-established.

From the _Subsurface-mobile_ main menu, select _GPS_ -> _Upload GPS
data_. The locations are uploaded.

===== Apply the stored GPS locations to dives on the _Subsurface_ dive list.

_Subsurface_ collects the first GPS location recorded after the start of a
dive (obtained within _Subsurface_ from either the dive computer or from the
manually-entered dive information) and before the end of a dive. These
coordinates are shown in the _Coordinates_ field of the dive site panel for
each dive. Within the dive site panel, provide a name for the coordinates
that have been assigned to the dive, following the instructions under the
heading above xref:S_locations[_Location_ management].

The
https://subsurface-divelog.org/documentation/subsurface-mobile-user-manual[user
manual for _Subsurface-mobile_] (accessible from within that app)  contains
detailed instructions for performing the collection of GPS data and for
managing, uploading and synchronising this information.


[[S_Companion]]
==== Importing GPS coordinates with the _Subsurface Companion App_ for mobile phones

Using the *Subsurface Companion App* on an _Android device_   or
xref:S_iphone[_iPhone_] with GPS, the coordinates
for the diving
location can be automatically passed to the _Subsurface_ dive log. The Companion App
stores dive locations on a dedicated Internet server. _Subsurface_ can collect
the locations from the server.
To do this:

===== Create a Companion App account

- Register on the http://api.hohndel.org/login/[_Subsurface companion web
  page_].  A confirmation email with instructions and a personal *DIVERID*
  will be sent, a long number enabling access to the file server and Companion
  App capabilities.

- Download the app from
  https://play.google.com/store/apps/details?id=org.subsurface[Google Play
  Store] or from
  https://f-droid.org/repository/browse/?fdfilter=subsurface&fdid=org.subsurface[F-Droid].

===== Using the Subsurface companion app on an Android smartphone

On first use the app has three options:

* _Create a new account._ Equivalent to registering in the _Subsurface_
  companion page using an Internet browser. You can request a *DIVERID* using
  this option, but it’s supplied via email and followed up by interaction with
  the http://api.hohndel.org/login/[_Subsurface companion web page_] to
  activate the account.

* _Retrieve an account._ If you forget your *DIVERID* you will receive an
  email to recover the ID string.

* _Use an existing account._ You are prompted for your *DIVERID*. The app
  saves this *DIVERID* and doesn’t ask for it again unless you use the
  _Disconnect_ menu option (see below).

[icon="images/icons/important.png"]
[IMPORTANT]
In the _Subsurface_ main program, the *DIVERID* should also be entered on
the Default Preferences panel, by selecting _File -> Preferences -> General_
from the main menu in _Subsurface_ itself.  This helps synchronization
between _Subsurface_ and the Companion App.

*Créer de nouveaux emplacements de plongée*

Now you are ready to get a dive position and send it to the server. The
Android display looks like the left hand image (*A*) below, but without any
dives.

Touch the + icon at the top right to add a new dive site. A menu with 3
options shows:

* Current: A prompt for a place name is shown (or a request to activate the
  GPS if it is turned off), after which the current location is saved.

* Use Map: This option allows you to fix a position by searching a world
  map. A world map is shown (see *B* below). Specify the desired position with
  a _long press_ on the touch sensitive screen (if the marked location is
  wrong, simply choose a new location)  and select the check symbol in the
  upper right. A dialog is shown allowing you to enter the name of the dive
  location and the date and time of the dive (see *C* below). In order to
  import this dive location in _Subsurface_, set the time to agree with the
  time of that dive on the dive computer.

image::images/Companion_5.jpg["FIGURE: Companion App, add location using map", align="center"]


* Import local GPX file: The Android device searches for .gpx files and
  located archives will be shown. The selected .gpx file is opened and its
  locations shown. Now select the appropriate locations, and select the check
  symbol in the upper right to add them.


*Liste des emplacements de plongée*

The main screen shows a list of dive locations, each with a name, date and
time (see *A* below). Some locations may have an arrow-up icon over the
selection box to the left showing they need to be uploaded to the
server. You can select individual dive locations from the list. A selected
location has a check mark in the selection box on the left. Group operations
(like _Delete_ or _Send_)  are performed on several selected locations.

Dive locations in this list can be viewed in two ways: a list of locations
or a map showing them. The display mode (List or Map) is changed by
selecting _Dives_ at the top left of the screen (see *A* below) and then
selecting the display mode. The display mode can be changed either from the
list of locations or from the map (see *B* below). Upon selecting a location
(on the list or on the map), an editing panel opens (see *C* below) where
the dive description or other details may be changed.

image::images/Companion_4.jpg["FIGURE: Companion App, add location using map", align="center"]


Upon selecting a dive (*not* selecting the check box), the name given to it,
date/time and GPS coordinates are shown with two options at the top of the
screen:

- Edit (pencil): Change the name of the dive location.

Maps: Display a map showing the dive location.  After editing and saving a
dive location (see *C* above), upload it to the web service, as explained
below.

*Uploading dive locations*

There are several ways to send locations to the server.  The easiest is
simply selecting the locations (See *A* below) and then touching the right
arrow at the top right of the screen.

[icon="images/icons/important.png"]
[IMPORTANT]
Be careful! The trash icon on the right means exactly what it should; it
deletes the selected dive location(s).

image::images/Companion_1.jpg["FIGURE: Screen shots (A-B) of companion app", align="center"]


After a dive trip using the Companion App, all dive locations are ready to
be downloaded to a _Subsurface_ dive log (see below).


*Settings on the Companion App*

Selecting the _Settings_ menu option results in the right hand image above
(*B*).

_Server and account_

- _Web-service URL._ This is predefined (http://api.hohndel.org/)

- _User ID._ The DIVERID obtained by registering as described above. The
  easiest way to get it is to copy and paste from the confirmation email or
  just type it in.

_Synchronisation_

- _Synchronize on startup_. If selected, dive locations in the Android device
  and those on the web service synchronize each time the app is started.

- _Upload new dives._ If selected, each time the user adds a dive location it
  is automatically sent to the server.

_Background service_

Instead of entering an unique dive location, you can leave the service
running in the background, allowing a continuous collection of GPS
locations.

The settings below define the behavior of the service:

- _Min duration._ In minutes. The app will try to get a location every X
  minutes until stopped by the user.

- _Min distance._ In meters. Minimum distance between two locations.

- _Name template._ The name the app will use when saving the locations.

[icon="images/icons/info.jpg"]
[TIP]
_How does the background service work?_ Assuming the diver sets 5 minutes
and 50 meters in the settings above, the app will start by recording a
location at the current location, followed by another one at every 5 minutes
*or* every time one moves 50 m from previous location.  If subsequent
locations are within a radius of 50 meters from the previous one, a new
location is not saved. If the diver is not moving, only one location is
saved.  If the diver is moving, a trace of the route is obtained by saving a
location every 50 meters.

_Other_

_Mailing List._ The mail box for _Subsurface_. Users can send an email to
the Subsurface mailing list.

- _Subsurface website._ A link to the URL of Subsurface web

- _Version._ Displays the current version of the Companion App.

_Search_

Search the saved dive locations by name or by date and time.

_Start service_

Starts the _background service_ following the previously defined settings.

_Disconnect_

This is admittedly a badly named option that disconnects the app from the
server.  It resets the user ID in the app, showing the first screen where an
account can be created, retrieve the ID for an existing account or use the
users own ID. The _Disconnect_ option is useful if the Android device was
used to download the dive locations of another registered diver.

_Send all locations_

This option sends all locations stored in the Android device to the server.

[[S_iphone]]
===== Using the Subsurface companion app on an _iPhone_ to record dive locations

The iPhone interface is quite simple. Type the user ID (obtained during
registration) into the space reserved for it, then select "Dive in" (see
left part of the image below) and start collecting dive location
information.

image::images/iphone.jpg["FIGURE: Using iPhone companion application", align="center", width=640]

Dives can be added automatically or manually. In manual mode, a dive
location or waypoint is added to the GPS input stream. In automatic mode, a
continuous path of GPS locations is created from which, after import,
Subsurface can select the appropriate GPS locations based on the times of
dives. The default mode for the _iphone_ is automatic. When adding a dive,
the location service is started automatically and a red bar appears at the
bottom of the screen. After the dive, click on the red bar to end the
location service. While the location service is running you can only add
dives manually.

You can edit the site name afterwards by selecting the dive from the dive
list and clicking on the site name. There are no other editable fields. The
dive list is automatically uploaded from the iPhone to the web
service. There is no option to trigger upload manually.


*Downloading dive locations to the _Subsurface_ divelog*

Download dive(s) from a dive computer or enter them manually into
_Subsurface_ before obtaining the GPS coordinates from the server. The
download dialog can be reached via _Ctrl+G_ or from the _Subsurface_ Main
Menu _Import -> Import GPS data from Subsurface Service_, resulting in the
image on the left (*A*), below. On first use the DIVERID text box is
blank. Provide a DIVERID, then select the _Download_ button to start the
download process, after which the screen on the right (*B*) below appears:

image::images/DownloadGPS.jpg["FIGURE: Downloading Companion app GPS data", align="center"]

Note that the _Apply_ button is now active: selecting it updates the
locations of the newly entered or uploaded dives in _Subsurface_, i.e. it
applies the coordinates and names entered on the app to all the new dives
that match the date-times of the uploaded GPS localities. The names of dive
locations entered within _Subsurface_ (i.e. before downloading the GPS
coordinates) have precedence over downloaded dive locations.

Since _Subsurface_ matches GPS locations from the mobile device and dive
information from the dive computer based on date-time data, automatic
assignment of GPS data to dives depends on agreeing date-time information
between the two devices. Although _Subsurface_ has a wide range tolerance,
it may not be able to identify the appropriate dive if there is a large
difference between the time in the dive computer and that of the Android
device.  This results in no updates.

Similar date-times may not always be possible and there may be many reasons
for this (e.g. time zones).  _Subsurface_ may also be unable to decide which
is the correct position for a dive (e.g. on repetitive dives while running
_background service_ there may be several locations that would be included
in the time range that fit not only the first dive, but one or more
subsequent dives as well).  A workaround to manually edit the date-time of a
dive in the _Subsurface_ Dive List *before* downloading the GPS data and
then to change the date-time back again *after* downloading GPS data.

[icon="images/icons/info.jpg"]
[NOTE]
CONSEILS:

- _Background service_ may fill the location list with unnecessary locations
  that don’t correspond to the exact dive point but do correspond to the
  boat's route.
   Right now, these locations are difficult to delete from the server. In some
   situations it
  is better to clean up the list on the mobile device before sending the dive
  points to the web server by simply deleting the inappropriate
  locations. This might be necessary, for instance, to keep the location list
  clear to see dives in the web service map display (see above).
- It may also be useful to give informative names to the locations sent to the
  web server, or at least to use an informative name in the _Name Template_
  setting while running the _background service_, especially on a dive trip
  with many dives and dive locations.

[[S_LoadImage]]
=== Ajouter des photos aux plongées

Many (if not most) divers take photographs during a dive. _Subsurface_
allows the storage and display of photographs for each dive. Photos are
superimposed on the dive profile at the times during the dive when they were
taken. They can also be viewed from the dive profile.

==== Chargement des photos et synchronisation entre l'ordinateur de plongée et l'appareil photo

Right-click on a dive or on a group of dives on the dive list, bringing up
the xref:S_DiveListContextMenu[Dive list context Menu].  Select the
appropriate option to import images either from file or from the
Internet. The system file browser appears. Select the folder and photographs
that need to be loaded into _Subsurface_ and click the _Open_ button.

image::images/LoadImage2_f20.jpg["FIGURE: Load images option", align="center"]

If photos are imported from the Internet, provide a URL pointing to a single
photograph.  If the URL points to a directory, no images are imported:
photos from the Internet need to be imported one at a time. If photos are
loaded from the Internet, _Subsurface_ assumes there is an Internet
connection each time this photo is viewed within _Subsurface_.

Having selected the local folder or Internet image to be imported, the time
synchronization dialog appears (see image below). The time synchronization
is not perfect between the dive computer used during a dive and the camera
used during that same dive. These two devices often differ by several
minutes. _Subsurface_ attempts to synchronize these two devices so that the
exact times of photographs can be used to position photographs on the dive
profile.

_Subsurface_ synchronise l'appareil photo avec l'ordinateur de plongée de
trois façons:

- *Pro-actively*: Before the dive, ensure synchronization of the dive computer time settings with
  the time settings of the camera by changing the date-time settings on one or both of these devices.
- *Manually*: Writing down the exact camera time at the start of a dive allows using the
  difference in time between the two devices. As long as the device
  settings for time has not been changed in either device, the times of
  both devices after the dive or even at the end of the day allows manually setting the time
  difference in the _Time shift_ dialog (see image below). Towards the top of the dialog is a time
  setting tool immediately under the heading _Shift times of image(s) by_, in the image below.
  If the camera time is 7 minutes later than that of the dive computer, set the time setting
  tool to a value of 00:07 and select the _Earlier_ radio button.
  This is appropriate, since the photos need to be shifted
  7 minutes earlier (camera is 7 minutes ahead of dive computer). Ignore any "AM" or "PM" suffix
  in that tool. Click the _OK_ button and synchronization is done.

image::images/LoadImage3b_f23.jpg["FIGURE: Synchronization dialog", align="center"]


- *By photograph*: There is a very slick way of achieving synchronization, requiring a
  photograph of the face of the dive computer showing the time. _Subsurface_ gets
  the exact time the photograph was taken, using the metadata the camera stores within
  each photo and compares this with the time visible on the photo. To do this, use the
  bottom half of the _Time shift_ dialog. In this case the top part of the dialog is ignored. Click on
  the horizontal bar called _Select image of dive computer showing time_. This brings up
  a file browser for selecting the photograph of the dive computer time. Select the
  photograph using the file browser and click on _OK_. This photograph of the dive computer
  appears in the bottom panel of the _Shift times_ dialog. Now _Subsurface_ knows exactly
  when the photograph was taken. Now set the date-time dialog to the left of the photo
  so it reflects the date and time of the dive computer in the photo. When the
  date-time tool has been set, _Subsurface_ knows exactly what the time difference between
  camera and dive computer is, and it can synchronize the devices. The image below shows
  a photograph of the face of the dive computer and with the date-time tool set to the
  date-time.

image::images/LoadImage3c_f23.jpg["FIGURE: Synchronization dialog", align="center"]

If the timestamp of a photograph is more than 30 minutes before or after the
dive, it is not placed on the dive profile (see the red warning in the image
above). However, If the appropriate checkbox is selected (see image above)
these images can still be placed on the _Photos_ tab of the *Notes* panel so
that all photos associated with a dive are visible, including photos taken
before or after the dive.

==== Visualiser les photos

Après avoir été chargées, les images apparaissent à deux endroits:

 - the _Photos_ tab of the *Notes* panel (left part of image below).
 - as tiny icons (stubs) on the dive profile at the appropriate positions
   reflecting the time each photograph was taken.  To view the photos on the
   dive profile, activate the _show-photos_ button in the tool bar to the left
   of the dive profile:

image::images/icons/ShowPhotos_f20.png["FIGURE:Show photos toolbar button", align="left"]

This results in a profile display as in the image below:

image::images/LoadImage4_f20.jpg["FIGURE: Photos on dive profile", align="center"]

Hover the mouse over any of the photo stubs. A thumbnail photo is shown of
the appropriate photo. See the image below:

image::images/LoadImage5_f20.jpg["FIGURE:Thumbnail photo on dive profile", align="center"]

Clicking on the thumbnail brings up a full size photo overlaid on the
_Subsurface_ window, allowing a good view of the photographs (see the image
below). *Note* that the thumbnail has a small dustbin icon in the bottom
right hand corner (see image above). Selecting the dustbin removes the image
from the dive. Be careful when clicking on a thumbnail. Images can also be
deleted using the _Photos_ tab (see text below).

image::images/LoadImage6_f20.jpg["FIGURE: Full-screen photo on dive profile", align="center"]

==== L'onglet _Photos_

Photographs associated with a dive are shown as thumbnails in the _Photos_
tab of the _Notes_ panel. Photos taken in rapid succession during a dive
(therefore sometimes with large overlap on the dive profile) can easily be
accessed in the _Photos_ tab. This tab serves as a tool for individually
accessing the photos of a dive, while the stubs on the dive profile show
when during a dive a photo was taken. Single-click a thumbnail in the
_Photos_ panel to select a photo. Double-click a thumbnail to view the
full-sized image, overlaying the _Subsurface_ window. Deleted a photo from
the _Photos_ panel by selecting it (single-click) and then by pressing the
_Del_ key on the keyboard. This removes the photo BOTH from the _Photos_ tab
as well as the dive profile.

==== Photos stockées sur un disque dur externe
Most underwater photographers store photos on an external drive. If such a
drive can be mapped by the operating system (almost always the case) the
photos can be directly accessed by _Subsurface_. This eases the interaction
between _Subsurface_ and an external repository of photos. When associating
a dive profile with photos from an external drive, the normal procedure of
selection and synchronization (see text above) is used.  After the external
drive has been disconnected, _Subsurface_ cannot access these photos any
more.  If the display of photos is activated (using the toolbox icon to the
left of the _Dive Profile_), the program shows a small white dot where each
photo should be on the dive profile.  In addition the _Photos_ tab shows
only the file names of the photos.  If the external drive with the photos is
re-connected, the photos can be seen in the normal way.

==== Trouver quelles plongées ont des photos associées.
Inspecting each individual dive in order to determine whether there are
associated photos can be time consuming. There is a rapid way of seeing
which dives have associated photos and which not: activate the _Photos_
checkbox in the dropdown list obtained by right-clicking on the header bar
of the *Divelist*. In the *Divelist*, all dives with associated photographs
have an icon indicating whether the photographs were taken during the dive,
just before/after the dive or both during and before/after the dive. More
information is provided in the section dealing with <<S_Divelist_columns,
photo icons on the *Divelist*>>.

[[S_FindMovedImages]]
==== Déplacer des photos entre dossiers, disques durs ou ordinateurs

After a photograph has been loaded into _Subsurface_ and associated with a specific dive,
_Subsurface_ saves the directory path where the photo lies as well as the file name of the photo,
in order to find it when the dive is opened again.
If the photo or the whole photo collection is moved to another drive or to a different
 machine, the path to the photo changes. Now, _Subsurface_ looks for the photos at their original location before they were moved,
 cannot find them and cannot display them. Because, after moving photos, large numbers of photos
 may need to be deleted and re-imported from the new location, _Subsurface_ has a mechanism to ease this inconvenience: automatic updates using fingerprints.

When a photo is loaded into _Subsurface_, a fingerprint for the image is calculated and stored with the
 other reference information for that photo. After moving a photo collection (that has already been loaded
 into _Subsurface_) to a different directory, disk or computer, _Subsurface_ can:

- look through a particular directory (and all its subdirectories recursively)
  where photos have been moved to,
- calculate fingerprints for all photos in this directory, and

if there is a match between a calculated fingerprint and the one calculated
when a photo was originally loaded into _Subsurface_ (even if the original
file name has changed), automatically update the directory information so
that _Subsurface_ can find the photo in the new moved directory.

This is done by selecting from the Main Menu: _File ->      Find moved images_. This brings up a window within
 which the NEW directory of the photos needs to be specified. Select the appropriate directory and click
 the _Scan_ button towards the bottom right of the panel. The process may require several minutes to
 complete, after which _Subsurface_ will show the appropriate photographs when a particular dive is opened.


[[Image_fingerprint_upgrade]]
****
*Upgrading legacy photo collections without fingerprints*
[icon="images/icons/important.png"]
[IMPORTANT]

_Subsurface_ automatically calculates fingerprints for all images that it
can access.  When manipulating images, ensure that all the images associated
with the dive log can be accessed by _Subsurface_.

_Subsurface_ automatically checks and, if necessary, updates the
fingerprints associated with a single dive if:

- The images associated with that dive are visible as thumbnails on the *Dive
  Profile*.

- If you edit anything in the *Notes* panel and save the edits by selecting
  _Apply changes_.

****

=== Logging special types of dives

This section gives examples of the versatility of _Subsurface_ as a dive
logging tool.


[[S_MulticylinderDives]]
==== Multicylinder dives

_Subsurface_ easily handles dives involving more than one
cylinder. Multi-cylinder diving usually happens (a) if a diver doesn’t have
enough gas for the complete dive in a single cylinder; (b) if a diver needs
more than one gas mixture because of the depth or the decompression needs of
the dive. For this reason multi-cylinder dives are often used by technical
divers who dive deep or long. As far as _Subsurface_ is concerned, there are
only two types of information that need to be provided:

- *Describe the cylinders used during the dive* This is performed in the *Equipment tab* of
  the *Info* panel, as xref:cylinder_definitions[described above]. Enter the cylinders one by one,
  specifying its size and pressure, as well as the gas composition within it.

- *Record the times at which the switch from one cylinder to another was done:* This is information
  tracked by some dive computers (provided the diver indicated these changes to the dive computer
  by pressing specific buttons). If the dive computer does not provide the information, the diver has to
  record these changes using a different method, e.g. writing it on a slate or by creating a bookmark on the dive
  computer.

- *Record the cylinder changes on the dive profile*: If the latter option
  was followed, the diver needs to indicate the gas change event by right-clicking at the appropriate point
  in time on the *Dive Profile* panel and indicating the cylinder to which the change was made. After
  right-clicking, follow the context menu to "Add gas change" and select the appropriate cylinder from
  those defined during the first step, above (see image below). If the
  *tank bar* button in the toolbar has been activated, the cylinder switches are also indicated in the
  tank bar (image below).

When this is complete, _Subsurface_ indicates the appropriate use of
cylinders in the dive profile.  Below is a two-cylinder dive, starting off
with EAN28, then changing cylinders to EAN50 after 26 minutes for
decompression.

image::images/multicylinder_dive.jpg["FIGURE: Multicylinder profile", align="center"]

Several dive computers perform automatic recording of cylinder pressure. In
this case no manual intervention is needed.  Older dive computers
(e.g. Uwatec Galileo, several Suunto models) handle more than one pressure
transducer on cylinders, switching from one sensor to another as the diver
switches among cylinders and providing a sequential record of cylinders
pressures during a dive. Some of the latest models (e.g. Shearwater Perdix
AI, Scubapro G2) record two or more pressure transducers concurrently and
continuously during the whole dive. In these cases _Suburface correctly
interprets the data.  There is continuous effort within the _Subsurface_
development team to add new dive computer models to those that can be
downloaded from and to represent cylinder pressures correctly. Regardless of
the type of sensor handling of dive computers, technical divers are likely
to use both automated and manual methods of cylinder pressure logging when
more than two gases are used. However, automated recording of cylinder
pressure simplifies logging of sidemount dives (where two cylinders are
used). See the
link:https://subsurface-divelog.org/documentation/supported-dive-computers/[list
of supported dive computers].

==== Plongées Sidemount

Sidemount diving is just another form of multi-cylinder diving, often with
both or all cylinders having the same gas mixture. Although it’s a popular
configuration for cave divers, sidemount diving can be done by recreational
divers who have completed the appropriate training. See the comments in the
last paragraph, above, about automated recording of cylinder
pressures. Manual logging of cylinder pressures during sidemount involves
three steps, exactly as with multi-cylinder dives above:

- *During the dive, record cylinder switch events*. Since sidemount diving normally involves two
  cylinders with air or with the same gas mixture, _Subsurface_ distinguishes between these different
  cylinders. In contrast, many dive computers that allow gas switching only distinguish between different
  _gases_ used, not among different _cylinders_ used. This means when sidemount dives are downloaded
  from these dive computers, the switching event between cylinders with the same gas is not downloaded. This may mean
  that a diver may have to keep a written log of cylinder switch times using a slate, or (if the dive computer
  has the capability) marking each cylinder switch with a bookmark that can be retrieved later. Returning
  from a dive with the times of cylinder changes is the only tedious part of logging sidemount dives.
- *Within _Subsurface_ describe the cylinders used during the dive*. The diver needs to provide the
  specifications of the different cylinders, using the *Equipment* tab of the *Info Panel* (see
  image below where two 12 litre cylinders were used).
- *Indicate cylinder change events on the _Subsurface_ dive profile*. Once the dive log has been imported
  from a dive computer into _Subsurface_, the cylinder switch events need to be shown on the dive profile.
  Cylinder changes are recorded by right-clicking at the appropriate point on the dive profile, then
  selecting _Add gas change_. A list of the appropriate cylinders is shown with the
  currently used cylinder greyed out. In the image below Tank 1 is greyed out, leaving only Tank 2
  to be selected. Select the appropriate cylinder. The cylinder change is then shown on the dive
  profile with a cylinder symbol. If the *Tank Bar* is activated using the toolbar to the left of the
  profile, then the cylinder change is also shown on the Tank Bar (see image below). After all
  the cylinder change events have been recorded on the dive profile, the correct cylinder pressures
  for both cylinders are shown on the dive profile, as in the image below.

image::images/sidemount1.jpg["FIGURE: Sidemount profile", align="center"]

[[S_sSCR_dives]]
==== Passive semi-closed circuit rebreather (pSCR) dives

[icon="images/halcyon_RB80.jpg"]
[NOTE]
Passive semi-closed rebreathers (pSCR) are a technical advance in diving
equipment that recirculates the breathing gas a diver uses, while removing
carbon dioxide from the exhaled gas. While a small amount (typically a
tenth) of the exhaled breathing gas is released into the water, a small
amount of fresh gas is released from the driving gas cylinder.  A diver
using a single cylinder of breathing gas can therefore dive for much longer
periods than using a recreational open-circuit configuration. With pSCR
equipment, a very small amount of breathing gas is released every time the
diver inhales. With active SCR (aSCR) equipment, in contrast, a small amount
of breathing gas is released continuously from the driving cylinder.

To log pSCR dives, no special procedures are required. Use the normal steps
outlined above:

- Select pSCR in the _Dive Mode_ dropdown list on the *Info* panel.

- pSCR diving often involves gas changes, requiring an additional cylinder.
  Define all the appropriate cylinders as described above and indicate the
  cylinder/gas changes as described above in the section on
  xref:S_MulticylinderDives[multicylinder dives].

If a pSCR _Dive Mode_ has been selected, the dive ceiling for that is
adjusted for the oxygen drop across the mouthpiece, which often requires
longer decompression periods. Below is a dive profile of a pSCR dive using
EAN36 as bottom gas and oxygen for decompression. Note that this dive lasted
over two hours.

image::images/pSCR_profile.jpg["FIGURE: pSCR profile", align="center"]



[[S_CCR_dives]]
==== Plongées en recycleur circuit fermé (CCR)

[icon="images/APD.jpg"]
[NOTE]
Closed system rebreathers also recirculate gas that has been
breathed. However, they use advanced technology to maintain a breathable
oxygen concentration:
a) remove carbon dioxide from the exhaled gas.
regulate the oxygen concentration to remain within safe diving limits.  The
CCR interface of _Subsurface_ is currently experimental and under active
development. Subsurface currently supports Poseidon MkVI and APD
Discovery/Evolution dive computers, as well as Shearwater dive computers
connected to CCR systems. In contrast to a conventional recreational dive
computer, a CCR system computer usually does not allow the download of a log
containing multiple dives. Rather, each dive is stored independently. This
means that _Subsurface_ cannot download a dive log directly from a CCR dive
computer, but that it imports individual CCR dive profiles in the same way
it imports dive log data from other digital databases: one dive at a
time. However, the Shearwater based CCR systems are different in this
respect and allow multi-dive downloads.

===== Importer une plongée CCR

For Shearwater CCR controllers, or independent Shearwater CCR logs, just
download the dive log as would be the case for non-CCR dives. _Subsurface_
interprets the CCR dive log correctly.  Except for Shearwater CCR dive
computers, CCR dive data are currently obtained from the proprietary
software provided when purchasing CCR dive equipment. See the section
dealing with xref:S_ImportingAlienDiveLogs[Importing dive information from
other digital sources] and
<<_appendix_b_dive_computer_specific_information_for_importing_dive_information,Appendix
B>> for more complete information. Use that software to download the dive
data into a known directory. From the main menu of _Subsurface_, select
_Import -> Import log files_ to bring up the xref:Unified_import[universal
import dialogue]. As explained in that section, the bottom right hand of the
import dialogue contains a dropdown list (labled _Filter:_) of appropriate
devices that currently include (Poseidon) MkVI or APD log viewer
files. Import for other CCR equipment is under active development. Having
selected the appropriate CCR format and the directory where the original
dive logs have been stored from the CCR dive computer, select a particular
dive log file (in the case of the MkVI it is a file with a .txt
extension). After selecting the appropriate dive log, click the _Open_
button at the bottom right hand of the universal import dialogue.  The
selected dive is imported to the _Subsurface_ dive list.

===== Displayed information for a CCR dive

_Partial pressures of gases_: The graph of oxygen partial pressure shows the
information from the oxygen sensors of the CCR equipment. In contrast to
recreational equipment (where pO~2~ values are calculated based on gas
composition and dive depth), CCR equipment provide actual measurements of
pO~2~, derived from oxygen sensors.  In this case the graph for oxygen
partial pressure should be fairly flat, reflecting the setpoint settings
during the dive. The mean pO~2~ is NOT the mean oxygen partial pressure as
given by the CCR equipment, but a value calculated by _Subsurface_ as
follows:

- For TWO O~2~ sensors the mean value of the two sensors are given.

- For THREE-sensor systems (e.g. APD), the mean value is also used. However
  differences of more than 0,1 bar in the simultaneous readings of different
  sensors are treated as false. If one of the three sensors provides false
  data, it is ignored.

- If no sensor data are available, the pO~2~ value is assumed to be equal to
  the setpoint.

The mean pO~2~ of the sensors is indicated with a green line,

The oxygen setpoint values as well as the readings from the individual
oxygen sensors can be shown. The display of additional CCR information is
turned on by checking the appropriate boxes in the _Preferences_ panel
(accessible by selecting xref:S_CCR_options[_File -> Preferences ->
Profile_]). This part of the _Preferences_ panel is shown in the image
below, representing two checkboxes that modify the display of pO~2~ when the
appropriate toolbar button on the Dive Profile has been checked.

image::images/CCR_preferences_f20.jpg["FIGURE: CCR preferences panel", align="center"]

Checking any of these boxes allows the display of additional oxygen-related
information whenever the pO~2~ toolbar button on the _Profile_ panel is
activated.  The first checkbox allows the display of setpoint
information. This is a red line superimposed on the green oxygen partial
pressure graph and allows a comparison of the mean measured oxygen partial
pressure and the setpoint values, as shown below.

image::images/CCR_setpoint_f20.jpg["FIGURE: CCR setpoint and pO~2~ graph", align="center"]

The second checkbox allows the display of the data from each individual
oxygen sensor of the CCR equipment. The data for each sensor is colour-coded
as follows:

- Sensor 1: grey
- Sensor 2: blue
- Sensor 3: brown

The mean oxygen pO~2~ is indicated by the green line. This allows the direct
comparison of data from each of the oxygen sensors, useful for detecting
abnormally low or erratic readings from a particular sensor.

image::images/CCR_sensor_data_f20.jpg["FIGURE: CCR sensor data graph", align="center"]

The setpoint data can be overlaid on the oxygen sensor data by activating
both of the above check boxes. Partial pressures for nitrogen (and helium,
if applicable) are shown in the usual way as for open circuit dives.

_Events_: Several events are logged, e.g. switching the mouthpiece to open
circuit.  These events are indicated by yellow triangles and, if you hover
over a triangle, a description of that event is given as the bottom line in
the xref:S_InfoBox[Information Box].

_Cylinder pressures_: Some CCR dive computers like the Poseidon MkVI record
the pressures of the oxygen and diluent cylinders. The pressures of these
two cylinders are shown as green lines overlapping the depth profile. In
addition, start and end pressures for both oxygen and diluent cylinders are
shown in the _Equipment Tab_.  Below is a dive profile for a CCR dive,
including an overlay of setpoint and oxygen sensor data, as well as the
cylinder pressure data. In this case there is agreement from the readings of
the two oxygen sensors.

image::images/CCR_dive_profile_f22.jpg["FIGURE: CCR dive profile", align="center"]

_Equipment-specific information_: Equipment-specific information gathered by
_Subsurface_ is shown in the xref:S_ExtraDataTab[Extra data tab]. This may
include setup information or metadata about the dive.

The deco ceiling calculated by Subsurface is not very accurate because the
precise pressure of nitrogen in the loop can usually not be determined from
the dive log imported from the CCR equipment. Many CCR dive computers,
however, report an internally-calculated deco ceiling that is reported in
the dive log, reflecting a more accurate assessment. The display of this
ceiling is activated by clicking the appropriate button to the left of the
dive profile:

image::images/icons/cceiling.jpg["DC ceiling icon"]

The default color of the computer-generated deco ceiling is white. This can
be set to red by checking the appropriate check box after selecting _File ->
Preferences -> Profile_.  Below is a dive profile indicating the dive
computer-generated deco ceiling:

image::images/CCR_dive_ceilingF22.jpg["FIGURE: CCR computer-generated deco ceiling", align="center"]

More equipment-specific information for downloading CCR dive logs for
Poseidon MkVI and APD equipment can be found in
xref:_appendix_b_dive_computer_specific_information_for_importing_dive_information[Appendix
B].

== Obtaining more information about dives entered into the logbook

=== Utiliser la carte des plongées pour obtenir plus d'informations sur les plongées

The Dive Map has a number of buttons useful for manipulation several aspects
of a dive. These are:

[icon="images/icons/MapViewMode.jpg"]
[NOTE]
Select this button to show the Dive Map as a satellite image or as a Google
Maps representation.

[icon="images/icons/MapViewPlus.jpg"]
[NOTE]
Zoom in. Select a smaller area of the map.

[icon="images/icons/MapViewMinus.jpg"]
[NOTE]
Zoom out. Select a larger area of the map.

image::images/MapMenu.jpg["FIGURE: Map menu", align="left"]

The "Hamburger" button on the top right-hand of the Dive Map activates the
Map menu. The items are:

* Open location in _Google Maps_. Open the location of the active dive in a
  separate Google Maps window with the dive site indicated by a Google Maps
  teardrop marker.

* Copy location to clipboard (decimal). Copy the coordinates of the active
  dive to the clipboard in decimal degrees e.g. -25.933905 30.710572

* Copy location to clipboard (sexagesimal). Copy the coordinates of the active
  dive to the clipboard in sexagecimal, e.g. 25°56'02.058"S 30°42'38.059"E

* Select visible dive locations. In the Dive List panel, highlight all the
  dive sites visible in the Dive Map. This allows easy selection of the dives
  within a particular geographical area to inspect them or to calculate
  statistics for them.

=== L'onglet *Informations* (pour une seule plongée)

L'onglet Informations donnée des informations résumées sur une plongée
sélectionnée dans la *Liste des plongées*. Les informations utiles
comprennent l'intervalle de surface avant une plongée, les profondeurs
maximale et moyenne de la plongée, le volume de gaz consommé, la
consommation équivalente à l'air (SAC) et le nombre d'unités de toxicité de
l'oxygène (OTU) atteint.

[icon="images/icons/info.jpg"]
[NOTE]
Consommation de gaz et calculs de la SAC (consommation équivalente à l'air):
_Subsurface_ calcule la SAC et la consommation de gaz et tenant compte de
l'incompressibilité du gaz, en particuliter pour des blocs à des pressions
supérieures à 200 bar, les rendant plus précises. Référez-vous à
xref:SAC_CALCULATION[l'Annexe F] pour plus d'information.

[[S_ExtraDataTab]]
=== L'onglet *Extra info* (généralement pour des plongées séparées)

Lors de l'utilisation d'un ordinateur de plongée, celui-ci transmet souvent
des données qui ne peuvent pas être facilement standardisées parce que la
nature de ces  informations diffère d'un ordinateur à l'autre. Ces données
conprennent souvent des informations de configuration, des métadonnées à
propos d'une plongée, le niveau de batterie, le temps d'interdiction de vol
(no fly) ou les gradient factor utilisés lors de la plongée. Quand cela est
possible, ces informations sont présentées dans l'onglet *Extra
Info*. Ci-dessous, vous trouverez une image affichant des données
supplémentaires pour une plongée utilisant un recycleur Poseidon.

image::images/ExtraDataTab_f20.jpg["FIGURE: Extra Data tab", align="center"]

=== L'onglet *Statistiques* (pour un groupe de plongées)

L'onglet Statistiques donne des statistiques résumées pour plusieurs
plongées, pour autant que plusieurs plongées soient sélectionnées dans la
*Liste des plongées* en utilisant les raccourcis standard Ctrl-clic ou
Maj-clic avec la souris. So une seule plongée est sélectionnée, les données
ne concernent que cette seule plongée. Cet onglet affiche le nombre de
plongées sélectionnées, la durée totale de ces plongées ainsi que les durées
minimale, maximale et moyenne parmi ces plongées, la température de l'eau et
la consommation équivalente à l'air (SAC). L'onglet affiche également la
plus petite et la plus grande profondeur atteinte pour ces plongées.

[[S_DiveProfile]]
=== Le *Profil de plongée*

image::images/Profile2.jpg["Typical dive profile", align="center"]

Parmi toutes les panneaux de _Subsurface_, le profil de plongée contient les
informations les plus détaillées concernant chaque plongée. Le profil de
plongée possède une *barre de boutons* sur el côté gauche, permettant le
contrôle de nombreuses options d'affichage. Les fonctions de ces boutons
sont décrites ci-dessous. L'objet principal du profil de plongée est le
graphique de la profondeur de la plongée en fonction du temps. En plus de la
profondeur, ce graphique affiche également les vitesses de descente et de
remontée en comparaison avec la vitesse recommandée. Cette information est
donnée en utilisant différentes couleurs:
|====================
|*Couleur*|*Vitesse de descente (m/min)*|*Vitesse de remontée (m/min)*
|Rouge|> 30|> 18
|Orange|18 - 30|9 - 18
|Jaune|9 - 18|4 - 9
|Vert clair|1.5 - 9|1.5 - 4
|Vert foncé|< 1.5|< 1.5
|=====================

Le profil permet également une lecture de la profondeur via les sommets et
planchers sur le graphique.  Ainsi les utilisateurs, peuvent voir la
profondeur du point le plus bas et d'autres sommets. La profondeur moyenne
est affichée sous la forme d'une ligne grise, indiquant la moyenne de
profondeur à un moment précis de la plongée.

[icon="images/icons/scale.jpg"]
[NOTE]
Dans certains cas, le profil de plongée ne remplit pas toute la zone du
panneau *Profil de plongée*. Cliquer sur le bouton *Ajuster l'échelle du
graphique* dans la barre d'outils sur la gauche du profil de plongée
augmente la taille du profil de plongée pour remplir la zone du panneau.

La *température de l'eau* est indiquée par une ligne bleue avec des valeurs de
température placées lors de changements significatifs.

[[S_InfoBox]]
==== La boîte *Information*
La boîte Information affiche un grand nombre d'informations concernant le
profil de plongée. Normalement, la boîte Information est située dans le coin
supérieur gauche du panneau *Profil de plongée*. Elle peut être déplacée
dans tout le panneau *Profil de plongée* en la cliquant-déplaçant avec la
souris à un endroit où elle ne masquera pas d'information importante. La
position de la boîte Information est enregistrée ré-utilisée pour les
analyses de plongée suivantes.

image::images/InfoBox2.jpg["Figure: Information Box", align="center"]

When the mouse points inside the *Dive Profile* panel, the information box
expands and shows many data items. In this situation, the data reflect the
time point along the dive profile shown by the mouse cursor (see right-hand
part of figure (*B*) above where the Information Box reflects the situation
at the position of the cursor [arrow] in that image). Moving the cursor
horizontally lets the Information Box show information for any point along
the dive profile. It gives extensive statistics about depth, gas and ceiling
characteristics of the particular dive. These include: Time period into the
dive (indicated by a @), depth, cylinder pressure (P), temperature,
ascent/descent rate, surface air consumption (SAC), oxygen partial pressure,
maximum operating depth, equivalent air depth (EAD), equivalent narcotic
depth (END), equivalent air density depth (EADD, also as gas density in
g/l), decompression requirements at that instant in time (Deco), time to
surface (TTS), the calculated ceiling, as well as of the statistics in the
Information Box, shown as four buttons on the left of the profile
panel. These are:

[icon="images/icons/MOD.jpg"]
[NOTE]
Affiche la *Profondeur maximale d'utilisation (MOD)* d'une plongée, en
fonction du mélange gazeux utilisé. La MOD dépend de la concentration en
oxygène du gaz respiré. Pour l'air (21% d'oxygène), il vaut envuron 57m si
une pO~2 maximale de 1.4 est choisie dans la section *Préférences*
(sélectionnez _Fichier -> Préférences -> Profil_ et éditez le champ _pO~2
dans le calcul de MOD_).  En plongeant sous la MOD, il y a un risque
important d'exposition aux dangers liés à la toxicité de l'oxygène.

[icon="images/icons/NDL.jpg"]
[NOTE]
Show either the *No-deco Limit (NDL)* or the *Total Time to Surface
(TTS)*. NDL is the time duration that a diver can continue with a dive,
given the present depth, that does not require decompression (that is,
before an ascent ceiling appears). Once a diver has exceeded the NDL and
decompression is required (that is, there is an ascent ceiling above the
diver) then TTS gives the number of minutes required before the diver can
surface. TTS includes ascent time as well as decompression time. Even if the
profile contains several gas switches, TTS at a specific moment during the
dive is calculated using the current gas.  TTS longer than 2 hours is not
accurately calculated and Subsurface only indicates _TTS > 2h_.

[icon="images/icons/SAC.jpg"]
[NOTE]
Show the *Surface Air Consumption (SAC)*, an indication of the
surface-normalized respiration rate of a diver. The value of SAC is less
than the real respiration rate because a diver at 10m uses breathing gas at
a rate roughly double that of the equivalent rate at the surface. SAC gives
an indication of breathing gas consumption rate independent of the depth of
the dive, so the respiratory rates of different dives can be compared. The
units for SAC is liters/min or cubic ft/min.

[icon="images/icons/EAD.jpg"]
[NOTE]
Show the *Equivalent Air Depth (EAD)* for nitrox dives as well as the
*Equivalent Narcotic Depth (END)* for trimix dives. These are important to
divers breathing gases other than air. Their values are dependent on the
composition of the breathing gas. The EAD is the depth of a hypothetical air
dive that has the same partial pressure of nitrogen as the current depth of
the nitrox dive at hand. A nitrox dive leads to the same decompression
obligation as an air dive to the depth equalling the EAD. The END is the
depth of a hypothetical air dive that has the same sum of partial pressures
of the narcotic gases nitrogen and oxygen as the current trimix dive. A
trimix diver can expect the same narcotic effect as a diver breathing air
diving at a depth equalling the END.

La figure (*B*) ci-dessous affiche une boîte d'information avec un ensemble
quasiment complet de données.


[[S_gas_pressure_graph]]
===== The Gas Pressure Bar Graph

On the left of the *Information Box* is a vertical bar graph showing the
pressures of the nitrogen (and other inert gases, e.g. helium, if
applicable) that the diver was inhaling _at a particular instant during the
dive_, shown by the position of the cursor on the *Dive Profile*. The
drawing on the left below indicates the meaning of the different parts of
the Gas Pressure Bar Graph.

image::images/GasPressureBarGraph.jpg["FIGURE:Gas Pressure bar Graph", align="center"]

- The light green area indicates the gas pressure, with the top margin of the
  light green area showing the total gas pressure of ALL gases inhaled by the
  diver and measured from the bottom of the graph to the top of the light
  green area. This pressure has a _relative_ value in the graph and does not
  indicate absolute pressure.

- The horizontal black line underneath the light green margin indicates the
  equilibrium pressure of the INERT gases inhaled by the diver, usually
  nitrogen. In the case of trimix, it is the pressures of nitrogen and helium
  combined. In this example, the user is diving with EAN32, so the equilibrium
  inert gas pressure is 68% of the distance from the bottom of the graph to
  the total gas pressure value.

- The dark green area at the bottom of the graph represents the pressures of
  inert gas in each of the 16 tissue compartments, following the Bühlmann
  algorithm, with fast tissues on the left hand side.

- The top black horizontal line indicates the inert gas pressure limit
  determined by the gradient factor that applies to the depth of the diver at
  the particular point on the *Dive Profile*. The gradient factor shown is an
  interpolation between the GFLow and GFHigh values specified in the _Profile_
  tab of the *Preferences Panel* of _Subsurface_.

- The bottom margin of the red area in the graph indicates the Bühlman-derived
  M-value. That is the pressure value of inert gases at which bubble formation
  is expected to be severe, resulting in a significant risk of decompression
  sickness.

These five values are shown on the left in the image above. The way the Gas
Pressure Bar Graph changes during a dive can be seen on the right hand side
of the above figure for a diver using EAN32.

- Graph *A* indicates the start of a dive with the diver at the surface. The
  pressures in all the tissue compartments are still at the surface
  equilibrium pressure because no diving has taken place.

- Graph *B* indicates the situation after a descent to 30 meters. Few of the
  tissue compartments have had time to respond to the descent, so their gas
  pressures are far below the equilibrium gas pressure.

- Graph *C* represents the pressures after 30 minutes at 30 m. The fast
  compartments have attained equilibrium (i.e. they have reached the height of
  the black line indicating the equilibrium pressure). The slower compartments
  (towards the right) have not reached equilibrium and are in the process of
  slowly increasing in pressure.

- Graph *D* shows the pressures after ascent to a depth of 4.5 meters. Since
  during ascent the total inhaled gas pressure has decreased strongly from 4
  bar to 1.45 bar, the pressures in the different tissue compartments now
  exceed that of the total gas pressure and approach the gradient factor value
  (i.e.  the top black horizontal line). Further ascent will result in
  exceeding the gradient factor value (GFHigh), endangering the diver.

- Graph *E* indicates the situation after remaining at 4.5 meters for 10
  minutes. The fast compartments have decreased in pressure. As expected, the
  pressures in the slow compartments have not changed much.  The pressures in
  the fast compartments do not approach the GFHigh value any more and the
  diver is safer than in the situation indicated in graph *D*.

==== Événements rapportés par l'ordinateur durant la plongée
Many dive computers record events during a dive. For instance, most dive
computers report alarms relating to high partial pressures of oxygen, to
rapid ascents or the exceeding of no-deco limits (NDL).  On the other hand,
other events are classified as warnings and, for instance, occur when the
remaining gas in a cylinder falls below a predetermined limit, a deep stop
needs to be performed or the need to change gas during multicylinder
dives. Some dive computers also report notifications, e.g. when a safety
stop is initiated or terminated or when a predetermined amount of OTUs have
been incurred.  The alarms, warnings and notifications differs from one dive
computer to another: some dive computers do not report any of the above
events, while others provide an extensive log of events. The reporting of
events is therefore a function of the dive computer used. In addition,
_Subsurface_ does not always have the ability to detect all the events
reported by a specific dive computer.

Events are indicated by symbols on the dive profile. Notifications are shown
as a white, round symbol with a letter _i_; warnings are indicated by a
yellow triangle and alarms by a red triangle. By moving the cursor over a
symbol, the explanation is given in the bottom-most line of the _Information
Box_ (see image below, where the cursor is positioned over the alarm that
was reported).

image::images/profile_symbols.jpg["FIGURE: Profile notification symbols", align="center"]

Some dive computers report _bookmarks_ that the diver has set during the
dive. These are indicated as a small red flag on the profile and are
discussed more fully in the section on <<S_Bookmarks,_inserting
bookmarks_>>.

==== La barre d'outils du profil

The dive profile can include graphs of the *partial pressures* of O~2~,
N~2~, and He during the dive (see figure above) as well as a calculated and
dive computer reported deco ceilings (only visible for deep, long, or
repetitive dives).  Partial pressures of oxygen are indicated in green,
nitrogen in black, and helium in dark red. These partial pressure graphs are
shown below the profile data.

[icon="images/icons/O2.jpg"]
[NOTE]
Affiche la pression partielle d'*oxygène* durant la plongée. Ceci est
affiché sous les graphiques de profondeur et de température de l'eau.

[icon="images/icons/N2.jpg"]
[NOTE]
Affiche la pression partielle d'*azote* durant la plongée.

[icon="images/icons/He.jpg"]
[NOTE]
Affiche la pression partielle d'*hélium* durant la plongée. Ceci n'est
important que pour les plongeurs qui utilisent du Trimix, du Triox
(Helitrox) ou d'autres mélanges gazeux similaires.

The *air consumption* graph displays the tank pressure and its change during
the dive. The air consumption takes depth into account so that even when
manually entering the start and end pressures the graph, is not a straight
line.  Like the depth graph, the slope of the tank pressure provides
information about the momentary SAC rate (Surface Air Consumption) when
using an air integrated dive computer.  Here the color coding is not
relative to some absolute values but relative to the mean normalized air
consumption during the dive. So areas in red or orange indicate times of
increased normalized air consumption while dark green reflects times when
the diver was using less gas than average.

When in planner mode, the SAC is set to be constant during the bottom part
of the dive as well during decompression. Therefore, when planning a dive,
the color is a representation of the breathing gas density.

[icon="images/icons/Heartbutton.png"]
[NOTE]
Cliquer sur le bouton Communter le rythme cardique permet d'afficher
l'information de rythme cardiaque pendant la plongée si l'ordinateur de
plongée est jumelé avec un détecteur de rythme cardique.

It is possible to *zoom* into the profile graph. This is done either by
using the scroll wheel / scroll gesture of the mouse or trackpad. By default
_Subsurface_ always shows a profile area large enough for at least 30
minutes and 30m (100ft) – this way short or shallow dives are easily
recognizable; something free divers won’t care about.

image::images/MeasuringBar.png["FIGURE: Measuring Bar", align="center"]

[icon="images/icons/ruler.jpg"]
[NOTE]
Measurements of *depth or time differences* can be achieved by using the
*ruler button* on the left of the dive profile panel.  The measurement is
done by dragging the red dots to the two points on the dive profile that you
wish to measure. Information is then given in the horizontal white area
underneath the two red dots.

[icon="images/icons/ShowPhotos.png"]
[NOTE]
Les photos qui ont été ajoutées à une plongée peuvent être affichées sur le
profil en sélectionnant le bouton *Communer l'affichage des images*. La
position d'une photo sur le profil indique le moment exact où la photo a été
prise. Si le bouton n'est pas actif, les photos sont masquées.


The profile can also include the dive computer reported *ceiling* (more
precisely, the deepest deco stop that the dive computer calculated for each
particular moment in time) as a red overlay on the dive profile. Ascent
ceilings occur when a direct ascent to the surface increases the risk of a
diver suffering from decompression sickness (DCS) and it is necessary to
either ascend slower or to perform decompression stop(s) before ascending to
the surface. Not all dive computers record this information and make it
available for download; for example none of the Suunto dive computers make
these data available to divelog software. _Subsurface_ also calculates
ceilings independently, shown as a green overlay on the dive profile.
Because of the differences in algorithms used and amount of data available
(and other factors taken into consideration at the time of the calculation)
it’s unlikely that ceilings from dive computers and from _Subsurface_ are
the same, even if the same algorithm and _gradient factors_ (see below) are
used.  It’s also quite common that _Subsurface_ calculates a ceiling for
non-decompression dives when the dive computer stayed in non-deco mode
during the whole dive (represented by the [green]#dark green# section in the
profile at the beginning of this section). This is because _Subsurface’s_
calculations describe the deco obligation at each moment during a dive,
while dive computers usually take the upcoming ascent into account. During
the ascent some excess nitrogen (and possibly helium) are already breathed
off so even though the diver technically encountered a ceiling at depth, the
dive still does not require a specific deco stop. This feature lets dive
computers offer longer non-stop bottom times.

[icon="images/icons/cceiling.jpg"]
[NOTE]
Si l'ordinateur de plongée calcule une palier et le rend disponible à
_Subsurface_ durant le chargement des plongées, il peut être affiché sous la
forme d'une zone rouge en cochant le bouton "Commuter le plafond rapporté
par l'ordinateur de plongée" dans le panneau Profil.

[icon="images/icons/ceiling1.jpg"]
[NOTE]
Si le bouton *Communter le plafond calculé* du panneau Profil est cliqué, un
plafond, calculé par _Subsurface_ est affiché en vert s'il existe pour une
plongée donnée (*A* dans l'image ci-dessous). Ceci peut être modifié de deux
façons:

[icon="images/icons/ceiling2.jpg"]
[NOTE]
Si, en outre, le bouton *Commuter l'affichage de tous les tissus* est
cliqué, le plafond est affiché pour les compartiments de tissus selon le
modèle Bühlmann (*B* dans l'image ci-dessous).

[icon="images/icons/ceiling3.jpg"]
[NOTE]
===============================================================================================================
Si, en plus le bouton *Commuter le plafond calculé avec des incréments de
3m* est cliqué, le plafond est affiché avec des incréments de 3m (*C* dans
l'image ci-dessous).

image::images/Ceilings2.jpg["Figure: Ceiling with 3m resolution", align="center"]

Gradient Factor settings strongly affect the calculated ceilings and their
depths. For more information about Gradient factors, see the section on
xref:GradientFactors_Ref[Gradient Factor Preference settings]. The currently
used gradient factors (e.g. GF 35/75) are shown above the depth profile if
the appropriate toolbar buttons are activated. N.B.: The indicated gradient
factors are NOT the gradient factors in use by the dive computer, but those
used by Subsurface to calculate deco obligations during the dive. For more
information external to this manual see:

 *** http://www.tek-dive.com/portal/upload/M-Values.pdf[Understanding M-values by Erik Baker, _Immersed_ Vol. 3, No. 3.]

 *** link:http://www.rebreatherworld.com/general-and-new-to-rebreather-articles/5037-gradient-factors-for-dummies.html[Gradient factors for dummies, by Kevin Watts]
===============================================================================================================



[icon="images/icons/ShowCylindersButton.jpg"]
[NOTE]
By selecting this icon, the different cylinders used during a dive can be
represented as a colored bar at the bottom of the *Dive Profile*. In general
oxygen is represented by a green bar, nitrogen a yellow bar and helium a red
bar. The image below shows a dive which first uses a trimix cylinder (red
and green), followed by a switch to a nitrox cylinder (yellow and green)
after 23 minutes. Cylinders with air are shown as a light blue bar.

image::images/ShowCylinders_f20.jpg["Figure: Cylinder use graph", align="center"]



[icon="images/icons/heatmap.png"]
[NOTE]
====================================================================================
Display the tissue heat-map. The heat map summarises, for the duration of
the dive, the inert gas tissue pressures for each of the 16 tissue
compartments of the Bühlmann model. Blue colours mean low gas pressures in a
tissue compartment and thus on-gassing, green to red means excess gas in the
tissue and thus off-gassing. Fast to slow tissues are indicated from top to
bottom. The figure below explains in greater detail how the heat map can be
interpreted.

image::images/Heatmap.jpg["Figure: Inert gas tissue pressure heat-map", align="center"]

Image *A* on the left shows the xref:S_gas_pressure_graph[Gas Pressure
Graph] in the *Information box*, representing a snapshot of inert gas
pressures at a particular point in time during the dive. The inert gas
pressures of 16 tissue compartments are shown as dark green vertical bars
with the quick tissue compartments on the left and the slow tissue
compartments on the right. Refer to the section on the
xref:S_gas_pressure_graph[Gas Pressure Graph] for more details on the
different elements of this graph.

Image *B* shows a gradient of unique colours, spanning the whole range of
inert gas pressures.  It is possible to map the height of each of the dark
green vertical bars of *A* to a colour in *B*. For instance, the fastest
(leftmost) dark green verical bar in *A* has a height corresponding to the
medium green part of *B*. The height of this bar can therefore be summarised
using a medium green colour. Similarly, the highest dark green bar in *A* is
as high as the yellow part of *B*. The 14 remaining tissue pressure bars in
*A* can also be translated to colours. The colours represent three ranges of
tissue inert gas pressure:

 -  The bottom range in *B* (marked _On-gassing_) includes colours from light
    blue to black, representing tissue gas pressures below the equilibrium
    pressure of inert gas (bottom horizontal line in *A*). The measurement unit
    is the % of inert gas pressure, relative to the equilibrium inert gas
    pressure. In this range on-gassing of inert gas takes place because the
    inert gas pressure in the tissue compartment is lower than in the
    surrounding environment. Black areas in the heat map indicate that a tissue
    compartment has reached the equilibrium inert gas pressure, i.e. the inert
    gas pressure in the tissue compartment equals that of the water in which the
    diver is. The equilibrium pressure changes according to depth.

 -  The central range in *B* includes the colours from black to light green,
    when the inert gas pressure of a tissue compartment is higher than the
    equilibrium pressure but less than the ambient pressure.  In this zone
    decompression is not very efficient because the gradient of inert gas
    pressure from tissue to the environment is relatively small and indicated by
    dark green areas of the heat map.

 -  The top range in *B* (marked _Off-gassing_) includes colours from light
    green to red and white, repesenting tissue gas pressures above that of the
    total ambient pressure (top of light green area of *A*). The measurement
    unit is the % of inert gas pressure above ambient pressure, relative to the
    Bühlmann M-value gradient (bottom of red area in *A*). These tissue
    pressures are normally reached while ascending to a shallower depth.  Below
    a value of 100%, this range indicates efficient off-gassing of inert gas
    from the tissue compartment into the environment. Usually, efficient
    off-gassing is indicated by light green, yellow or orange colours.  Above
    100% (red to white in *B*) the M-value gradient is exceeded and the
    probability of decompression sickness increases markedly.

Image *C* shows the colour mapping of each of the vertical bars in *A*, the
fast tissues (on the left in *A*) depicted at the top and the slow tissue
compartments at the bottom of *C*. The highest vertical bar in *A* (vertical
bar 3rd from the left) is presented as the yellow rectangle 3rd from the top
in *C*. The 16 vertical bars in *A* are now presented as a vertical column
of 16 coloured rectangles, representing a snapshot of tissue compartment gas
pressures at a particular instant during the dive.

Image *D* is a compilation of similar colour mappings of 16 tissue
compartments during a 10-minute period of a dive, the colours representing
the inert gas loading of a tissue compartment at a point in time during the
dive. Faster tissues are shown at the top and slower tissues at the bottom,
with time forming the horizontal axis of the graph. The column of rectangles
in *C* can be found on the horizontal axis between 9 and 10 minutes.

The colours of the heat map are not affected by the gradient factor
settings.  This is because the heat map indicates tissue pressures relative
to the Bühlmann M-value gradient, and not relative to any specific gradient
factor. For more information external to this manual see:

http://www.tek-dive.com/portal/upload/M-Values.pdf[Understanding M-values by
Erik Baker, _Immersed_ Vol. 3, No. 3.]

Since the colours of the heat map are not affected by the gradient
factor(s), the heat map is also applicable when using the VPM-B
decompression model.

The image below compares the profiles and heat maps for two planned
decompression dives to 60m: the first using the Bühlmann decompression
model, the second using the VPM-B decompression model.  Both profiles have
the same total decompression time, but the VPM-B model requires deeper stops
early in the acent phase.

In both profiles, the inert gas pressures in the faster tissues rise much
more rapidly than the slower tissues during the descent and bottom phase,
with the colors transitioning from light blue through blue and purple to
black.  Similarly, the inert gas pressure in the fast tissues reduces more
rapidly than the slow tissues at each decompression stop, with colors
transitioning from red, orange and yellow to green and black.

The comparison of the two profiles and heatmaps shows that by including deep
stops, the oversaturation gradient in the faster tissues early in ascent
phase is reduced.  However, on-gassing of slower tissues continues during
the deep stops, which leads to greater oversaturation gradient in slower
tissues at the end of the dive.

image::images/tissueHeatmap.jpg["Figure: Inert gas tissue pressure heat-map", align="center"]
===================================================================================

==== Le menu contextuel du Profil de plongée

The context menu for the Dive Profile is accessed by right-clicking while
the mouse cursor is over the Dive Profile panel. The menu allows creating
Bookmarks, Gas Change Event markers, or manual CCR set-point changes other
than the ones that might have been imported from a Dive Computer. Markers
are placed against the depth profile line, with the time of the event
determined by the mouse cursor when the right mouse button was clicked to
bring up the menu. Gas Change events involve a selection of which gas is
being switched TO. The list of choices is based on the available gases
defined in the *Equipment* Tab. Setpoint change events open a dialog letting
you choose the next setpoint value. As in the planner, a setpoint value of
zero shows the diver is breathing from an open circuit system while any
non-zero value shows the use of a closed circuit rebreather (CCR).  By
right-clicking while over an existing marker a menu appears, adding options
to allow deletion of the marker, or to allow all markers of that type to be
hidden. Hidden events can be restored to view by selecting Unhide all events
from the context menu.

== Organiser le carnet de plongée (manipuler des groupes de plongées)

[[S_DiveListContextMenu]]
=== Le menu contextuel de la Liste des plongées

Several actions on either a single dive, or a group of dives, can be
performed using the Dive List Context Menu.  It is found by selecting either
a single dive or a group of dives and then right-clicking.

image::images/ContextMenu.jpg["Figure: Context Menu", align="center"]

Le menu contextuel est utilisé pour de nombreuses fonctions décrites
ci-dessous.

[[S_Divelist_columns]]
==== Personnaliser les colonnes affichées dans le panneau *Liste des plongées*

image::images/DiveListOptions.jpg["Example: Dive list info options", align="center"]

The default information in the *Dive List* includes, for each dive,
Dive_number, Date, Rating, Dive_depth, Dive_duration and Dive_location. This
information can be controlled and changed by right-clicking on the header
bar of the *Dive List*, bringing up a list of columns that can be shown in
the dive list (see above). Check an items to be included in the *Dive
List*.  The list is immediately updated. Preferences for information shown
in the *Dive List* are saved and used when _Subsurface_ is re-opened.

[[S_Photos_divelist]]

By selecting the _Photos_ checkbox in the dropdown list, an icon is shown
indicating whether any photos are associated with a particular dive. There
are three icons:

[icon="images/icons/duringPhoto.png"]
[NOTE]
Cette plongée contient des photos prises durant la plongée, généralement
prises avec un appareil ou caméra submersible.

[icon="images/icons/outsidePhoto.png"]
[NOTE]
This dive has photographs taken immediately before or immediately after the
dive. This is useful for finding photos of dive teams or boats just
before/after the dive, whales or other surface animals seen just before or
after the dive, or of landscapes as seen from the boat.

[icon="images/icons/inAndOutPhoto.png"]
[NOTE]
This dive has photographs taken both during the dive and immdiately before
or after the dive.

[[S_Renumber]]
=== Renuméroter les plongées

Dives are normally numbered incrementally from non-recent dives (low
sequence numbers) to recent dives (higher sequence numbers).  Numbering of
dives is not always consistent. For instance, when non-recent dives are
added, correct numbering does not automatically follow on because of the
dives that are more recent in date/time than the newly-added dive with an
older date/time. This requires renumbering the dives.  Do this by selecting
(from the Main Menu) _Log -> Renumber_. Provide the lowest sequence number
to be used.  This results in new sequence numbers (based on date/time)  for
all the dives in the *Dive List* panel.

Renumber a few selected dives in the dive list by selecting only the dives
that need renumbering. Right-click on the selected list and use the Dive
List Context Menu to perform the renumbering. A popup window appears letting
the user specify the starting number for the process.

[[S_Group]]
=== Grouper des plongées en voyages et manipuler les voyages

For regular divers, the dive list can rapidly become very long. _Subsurface_
can group dives into _trips_. It does this by grouping dives that have
date/times not separated by more than two days and creating a single heading
for each diving trip represented in the dive log. Below is an ungrouped dive
list (*A*, on the left) as well as the corresponding grouped dive list of
five dive trips (*B*, on the right):

image::images/Group2.jpg["Figure: Grouping dives", align="center"]

Grouping into trips allows a rapid way of accessing individual dives without
having to scan a long lists of dives. To group the dives in a dive list,
(from the Main Menu) select _Log -> Auto group_. The *Dive List* panel now
shows only the titles for the trips.

==== Éditer le titre et l'information associée à un voyage déterminé

Normally, in the dive list, minimal information is included in the trip
title.  More information about a trip can be added by selecting its trip
title bar from the *Dive List*. This shows a *Trip Notes* tab in the *Notes*
panel. Here you can add or edit information about the date/time, the trip
location and any other general comments about the trip as a whole (e.g. the
dive company that was used, the general weather and surface conditions
during the trip, etc.).  After entering this information, select *Save* from
the buttons at the top right of the *Trip Notes* tab. The trip title in the
*Dive List* panel should now reflect the edited information.

==== Visualiser les plongées d'un voyage déterminé

Once the dives have been grouped into trips, you can expand one or more
trips by clicking the expansion button [+/-] on the left of each trip
title. This expands the selected trip, revealing individual dives during the
trip.

==== Fusionner des plongées venant des voyages différents en un seul voyage

After selecting a trip title, the context menu allows the merging of trips
by either merging the selected trip with the trip below or with the trip
above. (Merge trip with trip below; Merge trip with trip above)

==== Diviser un voyage en plusieurs voyages
If a trip includes, for example, ten dives, you can split this trip into two
trips (trip 1: top four dives; trip 2: bottom six dives) by selecting and
right-clicking the top four dives. The resulting context menu lets the user
create a new trip by choosing the option *Create new trip above*. The top
four dives are then grouped into a separate trip. The figures below show the
selection and context menu on the left (A) and the completed action on the
right (B):

image::images/SplitDive3a.jpg["FIGURE: Split a trip into 2 trips", align="center"]

=== Manipuler des plongées uniques

==== Effacer une plongée du carnet de plongée

Dives can be permanently deleted from the dive log by selecting and
right-clicking them to bring up the context menu, then selecting *Delete
dive(s)*. Typically this would apply to a case where a user wishes to delete
workshop calibration dives of the dive computer or dives of extremely short
duration.

==== Unlink a dive from a trip

You can unlink dives from the trip to which they belong. To do this, select
and right-click the relevant dives to bring up the context menu. Then select
the option *Remove dive(s)  from trip*. The dive(s) now appear immediately
above or below the trip to which they belonged, depending on the date and
time of the unlinked dive.

==== Add a dive to the trip immediately above

Selected dives can be moved from the trip to which they belong and placed
within a separate trip. To do this, select and right-click the dive(s) to
bring up the context menu, and then select *Create new trip above*.

==== Décaler l'heure de début d'une ou plusieurs plongées
Sometimes it’s necessary to adjust the start time of a dive. This may apply
to situations where dives are done in different time zones or when the dive
computer has a wrong time. To do this, select and right-click the dive(s) to
be adjusted. This brings up the context menu on which the *Shift times*
option should be selected. You must then specify the time (in hours and
minutes) by which the dives should be adjusted and click on the option of
whether the time adjustment should be earlier or later.

==== Fusionner plusieurs plongées en une seule

Sometimes a dive is briefly interrupted, for example, if a diver returns to
the surface for a few minutes, resulting in two or more dives being recorded
by the dive computer and appearing as different dives in the *Dive List*
panel.  Merge these dives onto a single dive by selecting the appropriate
dives, right-clicking them to bring up the context menu and then selecting
*Merge selected dives*. It may be necessary to edit the dive information in
the *Notes* panel to reflect events or conditions that apply to the merged
dive. The figure below shows the depth profile of two dives that were
merged:

image::images/MergedDive.png["Example: Merged dive", align="center"]

==== Diviser les plongées sélectionnées

On some occasions, a diver reaches the surface and immediately dives
again. However, it may happen that the dive computer does not register a new
dive, but continues the previous dive due to the brief surface interval. In
this case it is possible to split a dive so that the two dives are shown as
independent dives on the *Dive List*.  If this operation is performed,
_Subsurface_ scans the selected dive(s) and splits the dive at points during
the dive where the depth is less than a metre.

==== Load image(s) from file(s)
This topic is discussed in the section: xref:S_LoadImage[Adding photographs
to dives].

==== Load image from web
This topic is discussed in the section: xref:S_LoadImage[Adding photographs
to dives].

==== Annuler les manipuations sur les plongées

Important actions on dives or trips, described above, can be undone or
redone.  This includes: _delete dives_, _merge dives_, _split selected
dives_, _renumber dives_ and _shift dive times_.  To do this after
performing any of these actions, from the *Main Menu* select _Edit_. This
brings up the possibility to _Undo_ or _Redo_ an action.


[[S_Filter]]
=== Filtrer la liste des plongées

The dives in the *Dive List* panel can be filtered, selecting only some of
the dives based on their attributes, e.g. dive tags, dive site, divemaster,
buddy or protective clothing. For instance, filtering lets you list the deep
dives at a particular dive site, or otherwise the cave dives with a
particular buddy.

To open the filter, select _Log -> Filter divelist_ from the main menu. This
opens the _Filter Panel_ at the top of the _Subsurface_ window. Three icons
are located at the top right hand of the filter panel (see image below). The
_Filter Panel_ can be reset (i.e. all current filters cleared) by selecting
the *yellow angled arrow*. The _Filter Panel_ may also be minimized by
selecting the *green up-arrow*. When minimized, only these three icons are
shown.  The panel can be maximized by clicking the same icon that minimized
it. The filter may also be reset and closed by selecting the *red button*
with the white cross.

image::images/Filterpanel.jpg["Figure: Filter panel", align="center"]

Four filter criteria may be used to filter the dive list: dive tags, person
(buddy / divemaster), dive site and dive suit.  Each of these is represented
by a check list with check boxes. Above each check list is a second-level
filter tool, allowing the listing of only some attributes within that check
list. For instance, typing "_ca_" in the filter text box above the tags
check list, results in the list being reduced to "_cave_" and
"_cavern_". Filtering the check list helps to rapidly find search terms for
filtering the dive list.

To activate filtering of the dive list, check at least one check box in one
of the four check lists. The dive list is then shortened to include only the
dives that pertain to the criteria specified in the check lists.  The four
check lists work as a filter with _AND_ operators. Subsurface filters
therefore for _cave_ as a tag AND _Joe Smith_ as a buddy. But the filters
within a category are inclusive - filtering for _cave_ and _boat_ shows
those dives that have either one OR both of these tags.

[[S_ExportLog]]
== Export le carnet de plongée ou des parties de celui-ci

Il y a deux façons d'exporter des informations de plongée depuis Subsurface:

- Exporter les informations de plongée vers _Facebook_

- xref:S_Export_other[Exporter des informations de plongée vers d'autres
  destinations ou formats]

[[S_Facebook]]
=== Export des informations de plongée vers _Facebook_

L'export des plongées vers _Facebook_ est géré différemment des autres types
d'export car une connexion vers _Facebook_ est nécessaire, nécessitant un
identifiant et un mot de passe. À partir du menu principal, sélectionnez
_Partager sur -> Connecter à -> Facebook_ (image *A* ci-dessous). Un écran
de connexion s'affiche (image *B* ci dessous). Entrez l'identifiant et le
mot de passe _Facebook_. Depuis la fenêtre _Subsurface_, il est facile de
vérifier si _Subsurface_ a une connection valide vers _Facebook_ : Depuis le
"Menu principal", sélectionnez _Partager sur_ (image *A*
ci-dessous). Normalement, l'option _Facebook_ est grisée. Mais si une
connection vers _Facebook_ existe, cette option est active (c'est à dire
écrit en noir et sélectionnable).

Once logged into to _Facebook_ , a panel is shown with a message: "_To
disconnect Subsurface from your Facebook account, use the 'Share on' menu
entry_." Close this message panel.

image::images/facebook1.jpg["Figure: Facebook login", align="center"]

Une fois qu'une connexion à _Facebook_ est établie, transférer un profil de
plongée vers _Facebook_ est facile. Dans le panneau *Liste des plongées* de
_Subsurface_, sélectionnez la plongée à transférer. Ensuite, à partir du
*menu principal*, sélectionnez _Partager sur -> Facebook_. Une fenêtre
s'affiche, pour déterminer quelles informations seront transférées avec le
profil de plongée (image *A* ci-dessous). Pour transférer un profil de
plongée vers _Facebook_, le nom d'un album _Facebook_ doit être fourni. Les
cases à cocher sur la partie gauche permettent de sélectionner des
informations supplémentaires à transférer avec le profil de plongée. Ces
informations sont affichées dans le champs de texte sur la partie droite du
panneau. (image *A* ci dessous). Personnalisez le message qui sera envoyé
avec le profil de plongée en modifiant les informations. Une fois les
informations supplémentaires ajoutées et vérifiées, sélectionner le bouton
_OK_ qui effectue le transfert vers _Facebook_. Après le transfert, une
fenêtre de confirmation apparait ,indiquant le succès du transfert.

À la fois l'album créé et la publication sur votre ligne temporelle seront
marquées comme privés. Pour que vos amis puissent la voir, connectez-vous à
_Facebook_ depuis un navigateur ou l'application Facebook et modifiez les
permissions.

image::images/facebook2.jpg["Figure: Facebook data submission", align="center"]

If required, then close the _Facebook_ connection by selecting, from the
*Main Menu*, _Share on -> Disconnect from -> Facebook_ (image *B* above).

[[S_Export_other]]
=== Exporter des informations de plongée vers d'autres destinations ou formats
For non-_Facebook exports_, the export function can be found by selecting
_File -> Export_, which brings up the Export dialog. This dialog always
gives two options: save ALL dives, or save only the dives selected in *Dive
List* panel of _Subsurface_. Click the appropriate radio button (see images
below).

image::images/Export_f20.jpg["Figure: Export dialog", align="center"]

Un carnet de plongée ou une partie de celui-ci peut être enregistré dans
différents formats:

* Format _Subsurface XML_. C'est le format utilisé nativement par
  _Subsurface_.

* Universal Dive Data Format (_UDDF_). Refer to _http://uddf.org_ for more
  information.  UDDF is a generic format that enables communication among many
  dive computers and computer programs.

* _Divelogs.de_, an Internet-based dive log repository. In order to upload to
  _Divelogs.de_, you need a user-ID as well as a password for
  _Divelogs.de_. Log into _http://en.divelogs.de_ and subscribe to this
  service to upload dive log data from _Subsurface_.

* _DiveShare_ is also a dive log repository on the Internet focusing on
  recreational dives. To upload dives, you need a user ID, so registration
  with _http://scubadiveshare.com_ is required.

* _CSV dive details_, that includes the most critical information of the dive
  profile. Included information of a dive is: dive number, date, time, buddy,
  duration, depth, temperature and pressure: in short, most of the information
  that recreational divers enter into handwritten log books.

* _CSV dive profile_, that includes a large amount of detail for each dive,
  including the depth profile, temperature and pressure information of each
  dive.

* _HTML_ format, in which the dive(s) are stored in HTML files, readable with
  an Internet browser. Most modern web browsers are supported, but JavaScript
  must be enabled. The HTML export cannot be changed or edited.  It contains
  most of the information recorded in the dive log. However, it does not show
  the calculated values in the *Dive Profile* panel, e.g. dive ceiling,
  calculated cylinder pressure, gas pressures and MOD. The HTML export
  contains a search option to search the dive log. HTML export is specified on
  the second tab of the Export dialog (image *B* above). A typical use of this
  option is to export all your dives to a smartphone or a tablet where it
  would serve as a portable record of dives, useful for dive companies wishing
  to verify the dive history of a diver, and doing away with the need to carry
  an original logbook when doing dives with dive companies.

* _Worldmap_ format, an HTML file with a world map upon which each dive and
  some information about it are indicated. This map is not editable. If you
  select any of the dive sites on the map, a summary of the dive is available
  in text, as shown in the image below.

image::images/mapview_f20.jpg["Figure: HTML Map export view", align="center"]

* _TeX_ format, a file for printing using the TeX typesetting software. Choose
  a filename with a '.tex' extension. You will also need a template file, that
  can be obtained from
  link:http://www.atdotde.de/%7erobert/subsurfacetemplate/[http://www.atdotde.de/~robert/subsurfacetemplate/]
  in the same directory as the '.tex' file. The file can then be processed
  with plain TeX (not LaTeX), for example by running 'pdftex filename.tex' on
  the command line.

image::images/texexample.png["Figure: Export to TeX", align="center"]


* _Image depths_, which creates a text file that contains the file names of
  all photos or images attached to any of the selected dives in the _Dive
  List_, together with the depth underwater where of each of those photos was
  taken.

* _General Settings_, under the HTML tab, provides the following options:

** Subsurface Numbers: if this option is checked, the dive(s) are exported with the
   numbers associated with them in Subsurface, Otherwise the dive(s) will be numbered
   starting from 1.
** Export Yearly Statistics: if this option is checked, a yearly statistics table will
   be attached to the HTML exports.
** Export List only: a list of dives only (date, time, depth, duration) will be exported
   and the detailed dive information, e.g. dive profile, will not be available.

* Under _Style Options_ some style-related options are available like font
  size and theme.

Export to other formats can be done through third party facilities, for
instance _www.divelogs.de_.

[[S_Cloud_access]]
== Keeping a _Subsurface_ dive log in the Cloud

For each diver, dive log information is highly important. Not only is it a
record of diving activities for your pleasure, but it’s important
information required for admission to training courses or sometimes even
diving sites. The security of the dive log is critical. To have a dive log
that is resistant to failure of a home computer hard drive, loss or theft of
equipment, the Cloud is an obvious solution. This also has the added benefit
that you can access your dive log from anywhere in the world. For this
reason, facilities such as _divelogs.de_ and _Diving Log_ offer to store
dive log information on the Internet.

_Subsurface_ includes access to a transparently integrated cloud storage
back end that is available to all Subsurface users. Storing and retrieving a
dive log from the cloud is no more difficult than accessing the dives on the
local hard disk.  The only requirement is that you should first register as
a user on the cloud.  To use _Subsurface cloud storage_ , follow these
steps:

=== Create a cloud storage account

** Open the *Network Preferences* by selecting _File_ -> _Preferences_ -> _Network_.
** In the section headed _Subsurface cloud storage_, enter an email address that
   _Subsurface_ can use for user registration.
** Enter a novel password that _Subsurface_ will use to store the
  dive log in the cloud.
** Click _Apply_ to send the above email address and password to the
  (remote) cloud server. The server responds by sending a verification PIN to
  the above email address (This is the *only* occasion that _Subsurface_ uses the
  email address provided above). The *Network Preferences* dialog now has a new PIN text
   box, not visible previously.
** Enter the PIN in the corresponding text box in the *Network Preferences* dialog
(this field is only visible while the server is waiting for email
address confirmation)
** Click _Apply_ again. The _Subsurface cloud storage_ account
will be marked as verified and the _Subsurface cloud storage_ service is initialised for use.

=== Using _Subsurface cloud storage_

** Once the cloud storage has been initialized, two new items appear in the
   _File_ menu of the main menu system: _Open cloud storage_ and _Save to cloud storage_.
These options let you load and save data to the _Subsurface
cloud storage_ server.
** In the _Defaults Preferences_ tab, you can select to use the _Subsurface cloud
storage_ data as the default data file by checking the box marked _Cloud storage default file_.
 This means the data from
the _Subsurface cloud storage_ is loaded when _Subsurface_ starts and saved there when _Subsurface_ closes.

** _Subsurface_ keeps a local copy of the data and the cloud facility remains fully
functional even if used while disconnected to the Internet. _Subsurface_ simply synchronizes the
data with the cloud server the next time the program is used while the computer is
connected to the Internet.

[[S_Cloud_storage]]
=== Web access to _Subsurface cloud storage_

One of the nice side benefits of using _Subsurface cloud storage_ is that
you can also access your dive data from any web browser. Simply open
https://cloud.subsurface-divelog.org[_https://cloud.subsurface-divelog.org_],
log in with the same email and password, and you can see an HTML export of
the last dive data that was synced to _Subsurface cloud storage_. The dive
information shown is only the contents of the recorded dive logs, NOT the
calculated values shown in the *Profile* panel, including some cylinder
pressures, deco ceilings and O~2~/He/N~2~ partial pressures.

=== Other cloud services

If you prefer not to use the integrated cloud storage of dive logs (and
don't need the web access), it’s simple to store dive logs in the cloud
using several of the existing facilities on the Internet.  For instance
https://www.dropbox.com/[_Dropbox_] offers a free application that allows
files on the Dropbox servers to be seen as a local folder on a desktop
computer.

image::images/Cloud.jpg["FIGURE: Dropbox folder", align="center"]

The _Dropbox_ program creates a copy of the _Dropbox_ Internet Cloud content
on your desktop computer. When the computer is connected to the Internet,
the Internet content is automatically updated. Therefore both the _Open_ and
_Save_ of dive logs are done using the local copy of the dive log in the
local _Dropbox_ folder, so there's no need for a direct internet
connection. If the local copy is modified, e.g. by adding a dive, the remote
copy in the _Dropbox_ server in the Cloud will be automatically updated
whenever Internet access is available.


[[S_user_space]]
== Several _Subsurface_ users on one desktop computer
A frequent need is for two or more persons to use _Subsurface_ on the same
desktop computer. For instance members of a household may use the same
computer or one family member may perform dive uploads for other family
members/friends. There are two approaches for doing this.

*A)* If the different users of a desktop computer do not log onto the desktop/laptop under different user names
  then the simplest way is for each person to use her/his own divelog file within Subsurface. In this case John
  would work with the _Subsurface_ file _johns-divelog_ and Joan would use _joans-divelog_. Select
  the appropriate dive log by selecting, from the *Main Menu*, _File -> Open logbook_ and then select your own
  dive log file from the list of files lower down in the menu. However, a problem arises if the users
  prefer different settings for _Subsurface_. For instance, one diver may prefer to see the dive ceiling in the
  *Profile Panel* and photos icons in the *Dive List*, while the other may not have these preferences. In addition,
  the cloud connection is normally unique for each _Subsurface_ installation and if more than one user wishes to save
  dive data on the cloud, it is inconvenient to open the *Preferences* and change the user-ID data every time
  the cloud is accessed. To solve these problems, launch _Subsurface_ with a _--user=<user name>_ command-line option.
  John can then activate _Subsurface_ with this command-line instruction:

	subsurface --user=John

while Joan can launch _Subsurface_ using:

	subsurface --user=Joan

In this case, each user's preferences, settings and cloud access information are stored separately, allowing
  each diver to interact with _Subsurface_ in her/his preferred way and with individual cloud access. The above
  process can be made user-friendly by creating a link/shortcut with a desktop icon that executes the above
  command-line instruction. Use of the _--user=_ option therefore enables each user to create, maintain and
  backup a separate dive log within a personalised user interface. This way, when each diver launches _Subsurface_,
  it opens with the correct dive log as well as the appropriate display and backup preferences, and each diver
  can access their own divelog on a mobile device using https://subsurface-divelog.org/documentation/subsurface-mobile-user-manual[_Subsurface-Mobile_].

*B)* On the other hand, if the users log onto the same computer using different userIDs and passwords (i.e. users each
have a separate user space), _Subsurface_ is available independently to each user and every diver automatically has a separate
user profile and settings, including unique cloud and _Subsurface-Mobile_ access.

[[S_PrintDivelog]]
== Imprimer un carnet de plongée

_Subsurface_ provides a simple and flexible way to print a whole dive log or only a few selected dives.
  Pre-installed templates or a custom written template can be used to choose where the data are fitted into the page.

Certains choix doivent être fait avant l'impression:

- Should the whole dive log be printed or only part of it? If only part is
  required, select the required dives from the *Dive List* panel.
- If the dive profiles are printed, what gas partial pressure information
  should be shown? Select the appropriate toggle-buttons on the button bar to
  the left of the *Dive Profile* panel.

If _File -> Print_ is selected from the Main menu, the dialogue below (image
*A*) appears. Three specifications are needed to get the desired information
and page layout:

image::images/Print1_f22.jpg["FIGURE: Print dialogue", align="center"]

1. Under _Print type_ select one of two options:

- _Dive list print_: Print dives from the *Dive List* panel with profiles and
  other information.
- _Statistics print_: Print yearly statistics of the dives.

2. Under _Print options_ select:

- Printing only the dives selected from the dive list before activating the
  print dialogue by checking the box _Print only selected dives_. If this
  check box is *not* checked ALL dives in the *Dive List* panel are printed.
- Printing in color, done by checking the box with _Print in color_. If this
  check box is not checked, printing is in black and white.

Under _Template_ select a template to be used as the page layout. There are
several choices.  (see image *B*, above).

- _Table_: This prints a summary table of all dives selected (see below).

image::images/Print_summarylist_f22.jpg["FIGURE: Print summary table", align="center"]

- _Flow layout_: Print the text associated with each dive without printing the
  dive profiles
     of each dive (see below):

image::images/Print_flow_layout_f22.jpg["FIGURE: Print flow layout", align="center"]

- _One Dive_: Print one dive per page, also showing the dive profile (see
  below)

image::images/print2_f22.jpg["FIGURE: Print one dive / page", align="center"]


- _Two Dives_: Print two dives per page, also showing the dive profiles.
- _Six Dives_: Print six dives per page, also showing the dive profiles.

You can _Preview_ the printed page by selecting the _Preview_ button on the
dialogue (see image *A* at the start of this section). After preview, you
can change the options in the print dialogue, so the layout fits personal
taste.

Next, select the _Print_ button (see image *A* at the start of this
section). This activates the regular print dialogue used by the operating
system, letting you choose a printer and set its properties (see image
below):

image::images/Print_print_f22.jpg["FIGURE: Print dialog", align="center"]

Set the print resolution of the printer to an appropriate value by changing
the printer _Properties_. Finally, select the _Print_ button to print the
dives.  Below is a (rather small) example of the output for one particular
page.

image::images/Printpreview.jpg["FIGURE: Print preview page", align="center"]

=== Créer un modèle d'impression personnalisé (avancé)

Writing a custom template is an effective way to produce highly customized
printouts. Subsurface uses HTML templates to render printing. You can create
a template, export a new template, import an existing template and delete an
existing template by using the appropriate buttons under the _Template_
dropdown list in the print dialogue. See <<S_APPENDIX_E,APPENDIX E>> for
information on how to write or modify a template.

[[S_Configure]]
== Configurer un ordinateur de plongée

_Subsurface_ vous permet de configurer un ordinateur de
plongée. Actuellement, les familles d'ordinateurs supportés sont
Heinrichs-Weikamp (OSTC 2/2N/2C, OSTC 3, Sport) et Suunto Vyper (Stinger,
Mosquito, D3, Vyper, Vytec, Cobra, Gekko et Zoop). De nombreux paramètres de
ces ordinateurs de plongée peuvent être lues et modifiées. Pour commencer,
assurez vous que les pilotes pour votre ordinateur de plongée sont installés
(également nécessaire pour télécharger les plongées) et que le nom de
périphérique de l'ordinateur de plongée est connu. Voir
<<_appendix_a_operating_system_specific_information_for_importing_dive_information_from_a_dive_computer,
ANNEXE A>> pour plus d'informations sur la manière de procéder.

Une fois que l'ordinateur de plongée est connecté à _Subsurface_,
sélectionner _Fichier -> Configurer l'ordinateur de plongée_, à partir du
menu principal. Sélectionner le nom du périphérique (ou le point de montage)
dans la liste déroulante, en haut du panneau de configuration et
sélectionner le bon modèle d'ordinateur de plongée à partir du panneau à
gauche (voir l'image ci-dessous).

image::images/Configure_dc_f20.jpg["FIGURE: Configure dive computer", align="center"]

En utilisant les boutons appropriés du panneau de configuration, les actions
suivantes peuvent être effectuées :

 - *Récupérer les détails disponibles*. Cela charge la configuration existante à partir de l'ordinateur de plongée
   dans _Subsurface_, en l'affichant dans le panneau de configuration.
 - *Enregistrer les modifications sur le périphérique*. Cela change la configuration de l'ordinateur
   de plongée pour correspondre aux informations affichées dans le panneau de configuration.
 - *Sauvegarder*. Cela enregistre la configuration dans un fichier. _Subsurface_ demande
   l'emplacement et le nom du fichier pour enregistrer les informations.
 - *Restaurer une sauvegarde*. Cela charge les informations à partir d'un fichier de sauvegarde et l'affiche
   dans le panneau de configuration.
 - *Mettre à jour le firmware*. Si un nouveau firmware est disponible pour l'ordinateur de plongée,
   il sera chargé dans l'ordinateur de plongée.


[[S_Preferences]]
== Setting user _Preferences_ for _Subsurface_

There are several user-definable settings within _Subsurface_, found by
selecting _File -> Preferences_, mostly affecting the way in which
_Subsurface_ shows dive information to the user. The settings are in six
panels: _General_, _Units_, _Profile_, _Language_, _Network_, and
_Georeference_, all of which operate on the same principles: specified
settings can be applied to the display of the dive log by selecting
_Apply_. At this stage, any new settings only apply to the present session
and are not saved. In order to apply new settings permanently, select the
_Save_ button. If you do not wish to apply the new preferences, select
_Cancel_.

=== General

There are several headings in the *General* panel:

image::images/Pref1_f23.jpg["FIGURE: Preferences general page", align="center"]

  ** *Lists and tables*: Specify the font type and font size of the
     *Dive Table* panel: decreasing the font size allows one to see more dives on a screen.

  ** *Dives*: For the _Default Dive Log File_ specify the directory and
     file name of your
     electronic dive log book. This is a file with filename extension of either _.xml_ or _.ssrf_. When
     launched, _Subsurface_ will automatically load the specified dive log book. There are three options:
     - _No default file_: When checked, _Subsurface_ does not automatically load a dive log at startup.
     - _Local default file_: When checked, _Subsurface_ automatically loads a dive log from the local hard disk.
     - _Cloud storage default file_: When checked, _Subsurface automatically loads the dive log from the cloud
       device that was initialized using the *Preferences* _Network_ tab (see below).

  ** *Display invalid*:  Dives can be marked as invalid (when a user wishes to hide
     dives that he/she doesn't consider valid dives, e.g. pool dives, but still want to
     keep them in the dive log). This controls whether those dives are displayed in
     the dive list.

  ** *Default cylinder*: From the dropdown list, select the default cylinder to be used in
     the *Equipment* tab of the *Notes* panel.

  ** *Animations*: Some actions in showing the dive profile are performed using
     animations. For instance, the axis values for depth and time change from dive to
     dive. When viewing a different dive, these changes in axis characteristics do not
     happen instantaneously, but are animated. The _Speed_ of animations can be controlled
     by setting this slider
     with faster animation speed to the left, and a 0 value representing no animation
     at all.

  ** *Clear all settings*: As indicated in the button below this heading, all settings are
     cleared and set to default values.

=== Units
image::images/Pref2_f23.jpg["FIGURE: Preferences Units page", align="center"]

Choose between metric and imperial units of depth, pressure, volume,
temperature and mass. By selecting the Metric or Imperial radio button at
the top, you can specify that all units are in the chosen measurement
system.  Alternatively, if you select the *Personalize* radio button, units
can be selected independently, with some in the metric system and others in
imperial.

Regardless of the above settings, dive time measurements can be either in
seconds or minutes.  Choose the appropriate option. GPS coordinates can be
represented either as traditional coordinates (degrees, minutes, seconds) or
as decimal degrees Choose the appropriate option.

=== Profil
Ce panneau comporte trois sections:

[[S_CCR_options]]
image::images/Pref4_f23.jpg["FIGURE: Preferences Graph page", align="center"]

[[S_GradientFactors]]
*Gas pressure display setup*. Even though nitrogen and helium pressures are also included here, these items mainly pertain to oxygen management:
** _Thresholds_: _Subsurface_ can display graphs of the nitrogen, oxygen and the helium
   partial pressures during
   the dive, activated using the toolbar on the left of the *Dive Profile*
   panel. For each of these graphs, specify a threshold value. If any of the graphs go
   above the specified threshold, the graph is
   highlighted in red, indicating the particular partial pressure threshold has been exceeded.
   The pO~2~ threshold is probably the most important one and a value of 1.6 is commonly used.
** _pO~2~ in calculating MOD_ is used for calculating the maximum operative depth for a particular
   nitrox or trimix gas mixture. A value of 1.4 is commonly used.

** CCR Options: These options determine oxygen management for CCR dives:

*** _Dive planner default setpoint_: Specify the O~2~ setpoint for a
    CCR dive plan. This determines the pO~2~  maintained
    during a particular dive. Setpoint changes during the dive can be added via the
    profile context menu.

*** _CCR: Show setpoints when viewing pO~2~:_ With this checkbox activated, the pO~2~
    graph on the dive profile has an overlay in red which indicates the CCR setpoint
    values. See the section on xref:S_CCR_dives[Closed Circuit Rebreather dives].

*** _CCR: Show individual O~2~ sensor values when viewing pO~2~:_ Show the pO~2~
    values associated with each of the individual oxygen sensors of a CCR system.
    See the section on xref:S_CCR_dives[Closed Circuit Rebreather dives].

* *Ceiling display setup*. These settings mostly deal with nitrogen and helium management
   by determining how the decompression ceiling (ascent ceiling) is calculated and displayed:

** _Draw dive computer reported ceiling red_: This checkbox does exactly what it says. By default
   the computer reported ceiling is shown in white.
   Not all dive computers report ceiling values. If the dive computer does report it, it may differ
   from the ceilings calculated by _Subsurface_ because of the different algorithms and
   gradient factors, as well as the dynamic way a
   dive computer calculates ceilings during a dive.

** _Algorithm for calculating ceiling_. Choose between the Bühlmann Z1H-L16
   decompression model and the VPM-B model:
*** _VPM-B_: Provide a conservatism level for calculating the VPM-B ceiling. Values between 0
    (least conservative) and 4 (most conservative) are valid.

[[GradientFactors_Ref]]

*** Bühlmann: Set the _gradient factors_ (GFLow and GFHigh) for calculcating the deco ceiling following
   the ZH-L16 algorithm. GF_Low is the gradient factor at depth and GF_High is used at the surface.
   At intermediate depths gradient factors between GF_Low and GF_High are used.
   Gradient factors add conservatism to nitrogen and helium exposure during a dive, in a
   similar way that many dive computers have a conservatism setting. The lower
   the value of a gradient factor, the more conservative the calculations are with
   respect to inert gas loading and the deeper the ceilings are. Gradient
   factors of 20/60 are considered conservative and values of 70/90 are considered
   harsh.
   In addition decide whether to check the _GFLow at max. depth_ box. If checked, GF_Low is used for the
   deepest dive depth and linearly increased up to the GF_High value at the surface. If unchecked,
   GF_Low is used between the deepest dive depth and the first deco stop, after which the
   gradient factor linearly increases up to the GF_High value at the surface. For more information see:

 *** http://www.tek-dive.com/portal/upload/M-Values.pdf[Understanding M-values by Erik Baker, _Immersed_ Vol. 3, No. 3.]

 *** link:http://www.rebreatherworld.com/general-and-new-to-rebreather-articles/5037-gradient-factors-for-dummies.html[Gradient factors for dummies, by Kevin Watts]

 **  _pSCR options_. These preferences determine how passive semi-closed circuit (pSCR) dives
    are planned and how the pSCR deco ceiling is calculated:

 *** _Metabolic rate:_ this is the
    volume of oxygen used by a diver during a minute. Set this value for pSCR dive planning
    and decompression calculations.

 *** _pSCR ratio:_ The dilution ratio (or dump ratio) is the ratio of gas released to the
    environment to that of the gas recirculated to the diver. A 1:10 ratio is commonly used.

* *Misc*

** _Show unused cylinders in Equipment Tab_: This checkbox allows display of information about unused cylinders when viewing the
*Equipment Tab*. If this box is not checked, and if any cylinders entered using the *Equipment Tab* are not used (e.g. there
was no gas switch to such a cylinder), then these cylinders are omitted from that list.
**  _Show mean depth_: If this box is checked, the *Dive Profile* panel contains a grey line that shows
    the mean depth of the dive, up to any time instant during the dive. Normally this is a u-shaped line indicating the deepest mean depth just before
   ascent.


=== Langue
Choisissez une langue que _Subsurface_ utilisera.

image::images/Pref3_f23.jpg["FIGURE: Preferences Language page", align="center"]

Check the _System Default_ language i.e. the language of the underlying
operating system if this is appropriate. This is the default setting in
_Subsurface_.  To change it, uncheck this checkbox and pick a language /
country combination from the list of locations. The _Filter_ text box to
list similar languages. For instance there are several system variants of
English or French. *This particular preference requires a restart of
_Subsurface_ to take effect*.

Dans cette section, spécifiez également les formats de date et d'heure pour
l'affiche des détails de plongée.

=== Réseau
This panel facilitates communication between _Subsurface_ and data sources
on the Internet.  This is important, for instance, when _Subsurface_ needs
to communicate with web services such as Cloud storage, the
<<S_Companion,_Subsurface Companion app_>> or when you want to communicate
through a proxy.


image::images/Pref5_f23.jpg["FIGURE: Preferences Network page", align="center"]

This dialogue has three sections:

** _Proxy_:
If a proxy server is used for Internet access, the type of proxy needs to be selected from the dropdown list,
after which the IP address of the host and the appropriate port number should
be provided. If the proxy server uses authentication, the appropriate userID and
password are required so that _Subsurface_ can automatically pass
through the proxy server to access the Internet. This information is usually obtained
from your ISP.

** _Subsurface cloud storage_: To store your dive log in the cloud, a valid email address
   and password are required. This lets _Subsurface_ email security information
   regarding cloud storage to you, and to set up cloud storage appropriately.
   Two additional options are given:
   - _Sync to cloud in the background_: This option allows saving of dive information to the cloud storage
   while you do other things within _Subsurface_.
   - _Save password locally_: This allows local storage of the cloud storage password. Note that this
   information is saved in raw text form, not encoded in any way.

** _Subsurface web service_: When you subscribe to the <<S_Companion,Subsurface web service>>, a very
     long and hard-to-remember userID is issued. This is the place to save that userID. By
     checking the option _Save User ID locally?_, you ensure a local copy of that userID is saved.

=== Géoréférencement

_Subsurface_ provides a geo-lookup service (that is, given the coordinates
of a dive site) derived from a click on the *Dive Map panel* at the bottom
right of the _Subsurface_ window, or from a GPS instrument or from the
_Subsurface_ Companion app). A search on the Internet is done to find the
name of the closest known location. This function only works if _Subsurface_
has an Internet connection. The preference of the dive site name can be
configured, e.g. _Country/State/City_ or _City/State/Country_ (see image
below).

image::images/Pref7_f23.jpg["FIGURE: Georeference panel", align="center"]

[[S_DivePlanner]]
== Le planificateur de plongée de _Subsurface_
Dive planning is an advanced feature of _Subsurface_, accessed by selecting
_Log -> Plan Dive_ from the main menu. It allows calculation of inert gas
load during a dive by using the Bühlmann ZH-L16 algorithm with the addition
of gradient factors as implemented by Erik Baker, or using the VPM-B model.

****
[icon="images/icons/warning2.png"]
[WARNING]

Le planificateur de plongée de _Subsurface_ EST EN PHASE EXPÉRIMENTALE et
suppose que l'utilisateur est déjà familier avec l'interface utilisateur de
_Subsurface_. Il est utilisé explicitement aux conditions suivantes :

- L'utilisateur est bien informé au sujet de la planification de plongée et a
  la formation nécessaire pour faire une planification de plongée.
- L'utilisateur planifie des plongées dans les limites de sa certification.
- La planification de plongée se base sur les caractéristiques d'une _personne
  normale_ et ne peut compenser les caractéristiques physiologiques, l'état de
  santé, l'historique personnel et les caractéristiques du mode de vie.
- La sécurité d'une planification de plongée dépend en grande partie de la
  façon dont le planificateur est utilisé.
- L'utilisateur est familier avec l'interface de _Subsurface_.
- Un utilisateur qui n'est pas absolument certain d'un des prérequis ci-dessus
  ne devrait pas utiliser cette fonction.
****

=== L'écran du planificateur de plongée _Subsurface_

Like the _Subsurface_ dive log, the planner screen is divided into several
sections (see image below). The *setup* parameters for a dive are entered
into the sections on the left hand and bottom side of the screen.  They are:
Available Gases, Rates, Planning, Gas Options and Notes.

At the top right hand is a green *design panel* on which the profile of the
dive can be manipulated directly by dragging and clicking as explained
below. This feature makes the _Subsurface_ dive planner unique in ease of
use.

At the bottom right is a text panel with a heading of _Dive Plan
Details_. This is where the details of the dive plan are provided in a way
that can easily be copied to other software. This is also where any warning
messages about the dive plan are printed.

image::images/PlannerWindow1.jpg["FIGURE: Dive planner startup window", align="center"]


=== Plongées en circuit ouvert

-  Towards the center bottom of the planner (circled in blue in the image
   above) is a dropbox with three options. Select the appropriate one of these:
 ** Circuit ouvert (option par défaut)
 ** CCR
 ** pSCR

- Choisissez l'option Circuit ouvert.
- In the top left-hand area of the planning screen, be sure the constant dive
  parameters are appropriate. These are: Start date and time of the intended
  dive, Atmospheric Pressure and Altitude above sea level of the dive
  site. The atmospheric pressure can also be entered as an altitude in meters,
  assuming a sea-level atmospheric pressure of 1.013 bar.

- In the table labelled _Available Gases_, add the information of the
  cylinders to be used as well as the gas composition within that
  cylinder. This is done in a similar way as for
  <<cylinder_definitions,providing cylinder data for dive logs>>. Choose the
  cylinder type by double clicking the cylinder type and using the dropdown
  list, then specify the start pressure of this cylinder. By leaving the
  oxygen concentration (O~2~%) field empty, the cylinder is assumed to contain
  air. Otherwise enter the oxygen and/or helium concentration in the boxes
  provided in this dialogue. Add additional cylinders by using the "+" icon to
  the top right-hand of the dialogue.

- Le tableau _Gaz disponibles_ inclut trois champs de profondeur de gaz,
  nommés:
 ** Deco switch at: the switch depth for deco gases. Unless overridden by the user, this will be
    automatically calculated based on the Deco pO~2~ preference (default 1.6 bar)
 ** Bot. MOD: the gas Maximum Operating Depth (MOD) if it is used as a bottom mix. Automatically
    calculated based on the Bottom pO~2~ preference (default 1.4 bar). Editing this field will modify the
    O~2~% according to the depth set. Set to ''*'' to calculate the best O~2~% for the dive maximum depth.
 ** MND: the gas Maximum Narcotic Depth (MND). Automatically calculated based on the Best Mix END
    preference (default 30m / 98 ft). Editing this field will modify the He% according to the depth set.
    Set to ''*'' to calculate the best He% for the dive maximum depth.

- Le profil d'une plongée planifiée peut être créé de deux façons:
 *  Drag the waypoints (the small white circles) on the existing dive profile to
    represent the dive. Additional waypoints can be created by double-clicking
    the existing dive profile. Waypoints can be deleted by right-clicking a
    particular waypoint and selecting the _delete_ item from the resulting
    context menu.
 *  The most efficient way to create a dive profile is to enter the appropriate
    values into the table marked _Dive planner points_. The first line of the
    table represents the duration and the final depth of the descent from the
    surface. Subsequent segments describe the bottom phase of the dive.  The _CC
    setpoint_ column is only relevant for closed circuit divers.  The ascent is
    usually not specified because this is what the planner is supposed to
    calculate.  Add additional segments to the profile by selecting the "+" icon
    at the top right hand of the table. Segments entered into the _Dive planner
    points_ table automatically appear in the *Dive Profile* diagram.

==== Plongées loisir

Recreational mode is what comes closest to planning a dive based on the non-decompression limit (NDL).
It computes the maximum time a diver can stay at the current depth without needing mandatory decompression
stops and without using more than the existing gas (minus a reserve). The planner automatically takes
into account the nitrogen load incurred in previous dives. But conventional dive tables are also used in a
way that can take into account previous dives. Why use a dive planner for recreational dives? Using
recreational dive tables, the maximum depth of a dive is taken into account. But few dives are
done at a constant depth corresponding to the maximum depth (i.e. a "square" dive profile). This means
dive tables overestimate the nitrogen load incurred during previous dives. The _Subsurface_
dive planner calculates nitrogen load according to the real dive profiles of all uploaded previous dives,
in a similar way as dive computers calculate nitrogen load during a dive. This means that the diver gets 'credit,'
in terms of nitrogen load, for not remaining at maximum depth during
previous dives, so a longer subsequent dive can be planned.
 For the planner to work it's crucial to upload all previous dives
onto _Subsurface_ before doing dive planning.
To plan a dive, the appropriate settings need to be defined.

Ensure the date and time is set to that of the intended dive. This allows
calculation of the nitrogen load incurred during previous dives.

- Immediately under the heading _Planning_ are two checkboxes _Recreational_
  and _Safety Stop_.  Check these two boxes.

- Then define the cylinder size, the gas mixture (air or % oxygen) and the
  working cylinder pressure in the top left-hand section of the planner under
  _Available gases_.

- The planner calculates whether the specified cylinder contains enough
  air/gas to complete the planned dive. In order for this to be accurate,
  under _Gas options_, specify an appropriate surface air consumption (SAC)
  rate for _Bottom SAC_. Suitable values are between 15 l/min and 30 l/min,
  with novice divers or difficult dives requiring SAC rates closer to 30l/min.

- Define the amount of gas the cylinder must have at the end of the bottom
  section of the dive just before ascent. A value of 50 bar is often used. The
  reason for this reserve gas is to provide for the possible need to bring a
  buddy to the surface using gas sharing. How much gas is used in sharing
  depends on the depth of the ascent. This can be difficult to estimate, so
  most agencies assume a fixed amount of gas, or actually of pressure e.g. 40
  or 50 bar or 25% or 33% (rule of thirds). But _Subsurface_ can do better
  because it knows about the ascent and that is why we add the amount of gas
  during the ascent (i.e. the "deco gas“).  Subsurface still uses a fixed
  pressure "reserve" but that's supposed to be for the additional gas used
  when there's a problem and your pulse rate goes up when you start to buddy
  breathe. This reserve amount is user configurable.

- Define the depth of the dive by dragging the waypoints (white dots) on the
  dive profile or (even better) defining the appropriate depths using the
  table under _Dive planner points_ as desribed under the previous heading. If
  this is a multilevel dive, set the appropriate dive depths to represent the
  dive plan by adding waypoints to the dive profile or by adding appropriate
  dive planner points to the _Dive Planner Points_ table. _Subsurface_ will
  automatically extend the bottom section of the dive to the maximum duration
  within the no-decompression limits (NDL).

- La vitesse de remontée peut être modifiée. Les vitesses de remontée par
  défaut sont celles qui sont considérées comme sûres pour les plongées
  loisir.

The dive profile in the planner shows the maximum dive time within no-deco
limits using the Bühlmann ZH-L16 algorithm and the gas and depth settings
specified as described above. The _Subsurface_ planner allows rapid
assessment of dive duration as a function of dive depth, given the nitrogen
load incurred during previous dives. The dive plan includes estimates of the
amount of air/gas used, depending on the cylinder settings specified under
_Available gases_. If the initial cylinder pressure is set to 0, the dive
duration shown is the true no-deco limit (NDL) without taking into account
gas used during the dive. If the surface above the dive profile is RED it
means that recreational dive limits are exceeded and either the dive
duration or the dive depth needs to be reduced.

Below is an image of a dive plan for a recreational dive at 30
meters. Although the no-deco limit (NDL) is 23 minutes, the duration of the
dive is limited by the amount of air in the cylinder.

image::images/Planner_OC_rec.jpg["FIGURE: A recreational dive plan: setup", align="center"]

==== Plongées en circuit ouvert non loisir, incluant une décompression

Non-recreational dive planning involves exceeding the no-deco limits and/or
using multiple breathing gases.  These dives are planned in three stages:

*a) Nitrogen management*: This is done by specifying the rates for descent and ascent,
as well as the deco model (GFLow, GFHigh or Conservatism level) under the headings _Rates_ and _Planning_
to the bottom left of the planning screen. Two deco models are supported the Bühlmann model and the VPM-B
model. Select one of the two models. When selecting the Bühlmann model, the gradient factors (GFHigh and GFLow
need to be specified. Initially, the GFHigh and GFLow values in the _Preferences_
panel of _Subsurface_ is used. If these are changed within the planner (see _Gas Options_ within
the planner), the new values are
used without changing the original values in the _Preferences_.
Gradient Factor settings strongly affect the calculated ceilings and their depths.
A very low GFLow value brings on decompression stops early during the dive.
 ** For more information about Gradient factors, see the section on xref:S_GradientFactors[Gradient Factor Preference settings].

If the VPM-B model is selected, the Conservatism_level needs to be specified
on a scale of 0 (least conservative) to 4 (most conservative).  This model
tends to give deco stops at deeper levels than the Bühlmann model and often
results in slightly shorter dive durations than the Bühlmann model, albeit
at the cost of higher tissue compartment pressures in the slow tissues.
When selecting one of these models, keep in mind they are NOT exact
physiological models but only mathematical models that appear to work in
practice.

Please note as well that there is an intrinsic assumption of the VPM-B model
that off-gassing only happens during the ascent phase of the dive (which is
the part controlled by the planner). Thus it is possible to get misleading
results if you manually enter waypoints well in the decompression phase of
your dive. This is particularly relevant when editing a dive read from disk
in the planner since that will have waypoints up to the surface. Thus for
those dives, first delete all waypoints during the ascent phase. This is
most easily done by holding the Ctrl- or Command-key while clicking on the
trash can icon next to the first ascent waypoint in the table on the left
hand side.

Pour plus d'information en dehors de ce manuel, voir:

 * link:http://www.tek-dive.com/portal/upload/M-Values.pdf[Understanding
   M-values by Erik Baker, _Immersed_ Vol. 3, No. 3.]
 * link:http://www.rebreatherworld.com/general-and-new-to-rebreather-articles/5037-gradient-factors-for-dummies.html[Gradient
   factors for dummies, by Kevin Watts]
link:https://www.amazon.com/Deco-Divers-Decompression-Theory-Physiology/dp/1905492073/ref=sr_1_1?s=books&ie=UTF8&qid=1403932320&sr=1-1&keywords=deco+for+divers[_Deco
for Divers_, by Mark Powell (2008). Aquapress] Southend-on-Sea, UK. ISBN 10:
1-905492-07-3.  Un excellent livre non technique qui traite à la fois des
modèles de décompression Bühlmann et VPM-B.

The ascent rate is critical for nitrogen off-gassing at the end of the dive
and is specified for several depth ranges, using the mean depth as a
yardstick. The mean depth of the dive plan is shown by a light grey line on
the dive profile. Ascent rates at deeper levels are often in the range of
8-12 m/min, while ascent rates near the surface are often in the range of
4-9 m/min. The descent rate is also specified. If the option _Drop to first
depth_ is activated, the descent phase of the planned dive will be at the
maximal descent rate specified in the _Rates_ section of the dive setup.

*b) Oxygen management*: In the *Gas Options* part of the dive specification, the maximum partial
pressure for oxygen needs to be specified for the
bottom part of the dive (_bottom po2_) as well as for the decompression part of the dive (_deco po2_).
Commonly used values are 1.4 bar for the bottom part of the dive and 1.6 bar for any decompression
stages. Normally, a partial pressure of 1.6 bar is not exceeded. The depth at which switching to a gas
takes place can be edited in the
_Available Gases_ dialog. Normally, the planner decides on switching to a new gas when, during
ascent, the partial pressure of the new gas has decreased to 1.6 bar.

*c) Gas management*: With open-circuit dives this is a primary
consideration. Divers need to keep within the limits of the amount of
gas within the dive
cylinder(s), allowing for an appropriate margin for a safe return to the surface, possibly
sharing with a buddy. Under the _Gas Options_ heading, specify the best (but conservative) estimate
of your surface-equivalent air consumption (SAC, also termed RMV) in
liters/min (for the time being, only SI units are supported). Specify the SAC during the
bottom part of the dive (_bottom SAC_) as well as during the decompression or safety stops of the
dive (_deco SAC_). Values of 15-30 l/min are common. For good gas management, a guess
is not sufficient and you needs to
monitor gas consumption on a regular basis, dependent on different dive conditions and/or equipment.
The planner calculates the total volume of gas used during the dive and issues a warning
if you exceeds the total amount of gas available. Good practice demands that divers not dive to
the limit of the gas supply but that an appropriate reserve is kept
for unforeseen circumstances.
For technical diving, this reserve can be up to 66% of the total available gas.
In addition to calculating the total gas consumption for every cylinder the planner provides one way
of calculating the recommended volume of bottom gas which is needed for safe asscent to the
first deco gas change depth or the surface. This procedure is called the "minimum gas" or "rock bottom"
consideration and it is used by various (but not all)
technical diving organisations. See the text below for a detailed explanation.

Now you can start the detailed time-depth planning of the dive. _Subsurface_
offers an unique graphical interface for doing planning. The mechanics are
similar to hand-entering a dive profile in the dive log part of
_Subsurface_. Upon activating the planner, a default dive of depth 15 m for
20 min is offered in the blue design surface in the top right hand part of
the planner window. The white dots (waypoints) on the profile can be dragged
with a mouse. Create more waypoints by double-clicking on the profile line
and ensuring the profile reflects the intended dive. Drag the waypoints to
represent the depth and duration of the dive. It is NOT necessary to specify
the ascent part of the dive since the planner calculates this, based on the
existing settings.  If any of the management limits (for nitrogen, oxygen or
gas) are exceeded, the surface above the dive profile changes from BLUE to
RED.

Each waypoint on the dive profile creates a _Dive Planner Point_ in the
table on the left of the dive planner panel. Ensure the _Used Gas_ value in
each row of that table corresponds to one of the gas mixtures specified in
the _Available Gases_ table.  Add new waypoints until the main features of
the dive have been completed, e.g. the bottom time segment and deep stops
(if these are implemented). In most cases _Subsurface_ computes additional
way points in order to fulfill decompression requirements for that dive. A
waypoint can also be moved by selecting it and by using the arrow keys.  The
waypoints listed in the _Dive Planner Points_ dialogue can be edited by hand
in order to get a precise presentation of the dive plan. In fact, it is
sometimes more easy to create the whole dive profile by editing the _Dive
Planner Points_ dialog.

Show any changes in gas cylinder used by indicating gas changes as explained
in the section <<S_CreateProfile,hand-creating a dive profile>>. These
changes should reflect the cylinders and gas compositions defined in the
table with _Available Gases_.  If two or more gases are used, automatic gas
switches will be planned during the ascent to the surface.

Cylinders used for the plan need to be entered in the table of _Available
gases_. In the column _Type_ select the appropriate cylinder size by using
the dropdown list that appears when double-clicking a cell in this
column. By default, a large number of sizes are listed, and a new cylinder
size can be created by typing this into the text box. The cylinder size,
start pressure and default switch depths are initialised
automatically. Specify the gas composition (e.g. helium and oxygen
content). A non-zero value in the "CC setpoint" column of the table of dive
planner points indicates a valid setpoint for oxygen partial pressure and
that the segment is dived using a closed circuit rebreather (CCR). If the
last manually entered segment is a CCR segment, the decompression phase is
computed assuming the diver uses a CCR with the specified set-point. If the
last segment (however short) is on open circuit (OC, indicated by a zero
set-point) the decompression is computed in OC mode and the planner only
considers gas changes in OC mode.

Enter dive profile segments in the _Dive planner points_ table by providing
a time duration for a segment as well as its final depth. If more than one
cylinder is used during the dive, ensure that the appropriate cylinder is
selected for each segment of the dive plan by double-clicking the cell and
selecting the appropriate cylinder from the dropdown list in the _Used gas_
column.  If required, insert a row in the _Dive planner points_ table by
adding a new line and then setting the _Run time_ value appropriately. In
image A below, a segment (using an EAN50 cylinder) has been added and you
wish to use this gas during the very start of the dive (the other gas is not
breathable at the surface).  Upon pressing Enter on the keyboard, that
segment is moved to the top of that table and the plan is adjusted
automatically to take into account this new segment of the dive plan (image
B below).

image::images/planner1.jpg["FIGURE: Planning a dive: segments", align="center"]

Ci-dessous, vous trouverez un exemple d'une planification de plongée
utilisant du Tx20/30 et l'algorithme Bühlmann, suivie d'une remontée
utilisant du EAN50 et utilisant les réglages décrits ci-dessous.

image::images/Planner_OC_deco.jpg["FIGURE: Planning a dive: setup", align="center"]

Once the above steps have been completed, save by clicking the _Save_ button
towards the top middle of the planner. The saved dive plan will appear in
the *Dive List* panel of _Subsurface_.

*Les détails du plan de plongée*

On the bottom right of the dive planner, under _Dive Plan Details_, the
details of the dive plan are provided. These may be modified by checking any
of the options under the _Notes_ section of the dive planner, immediately to
the left of the _Dive Plan Details_. If a _Verbatim dive plan_ is requested,
a detailed sentence-level explanation of the dive plan is given. If any of
the management specifications have been exceeded during the planning, a
warning message is printed underneath the dive plan information.

If the option _Display segment duration_ is checked, then the duration of
each depth level is indicated in the _Dive Plan Details_. This duration
INCLUDES the transition time to get to that level. However, if the _Display
transition in deco_ option is checked, the transitions are shown separately
from the segment durations at a particular level.

The planner has a check box _Display plan variations_. By checking this box,
the planner provides information about a dive that is a little deeper or
slightly longer than the planned dive. This can be found near the top of the
_Dive plan details_ where the dive duration is indicated. Checking this
option creates a lot of additional computation, to such a degree that the
planner is slower than otherwise. The information is typically given as:

    Runtime: 53min + 0:52/m + 4:21/min

This indicates:

 * Calculated dive duration is 53 min.
 * For each extra meter in depth during the bottom phase of the dive, the
   duration increases by 52 seconds.
 * For each extra minute of bottom time, the duration increases by 4 min 21
   sec. Thus, if the bottom time is two minutes longer than planned, the dive
   duration will be (2+2*4min 21 sec) = 10 minutes 42 sec longer and would
   probably require that each deco stop is 10:42/53:00 = 20% longer than
   planned. These calculations are only applicable for small deviations from
   the dive plan, not for larger deviations.

* Minimum gas requirements*

The planner also estimates the *minimum gas* pressure required for safe
ascent after an event that causes the dive to be aborted. The calculation
assumes that in worst case an out of gas (OoG)  situation could occur at the
end of the planned bottom time at maximum depth. This OoG event forces the
buddy team the share the gas of one diver and to stay at maximum depth for
an additional number of minutes.  At the same moment the combined SAC of
both divers is increased by a estimated factor compared to the SAC factor of
a single diver under normal conditions.  The result of the minimum gas
calculation for the bottom gas is printed to the planner output. No
automatic checks are performed based on this result.  The feature only gives
valid results for simple, rectengular shaped single level dive profiles. For
multi level dives one would need to check every leg of the profile
independently.

There are two selector boxes on the left of the _Dive plan details_:

 * *SAC factor*. This is your estimate of the degree to which your SAC increases if a critical problem arises underwater,
   e.g. gas sharing or entanglement. Realistic values range from 2 to 5, reflecting the gas use of two divers sharing
   a single gas cylinder after an OoG situation.
 * *Problem solving time*. This is your estimate of how long you would take to solve the problem before starting the ascent
   to terminate the dive. The default value is 2 minutes.

Using the above information, the planner then estimates what the minimum
botom gas cylinder pressure needs to be for a safe ascent. This information
is given near the bottom of the _Dive plan details_, following the
calculation of bottom gas used during the dive if it exactly follows the
plan. the minimum gas is typically given as:

  Minimum gas (based on 2.0xSAC/+1min@81m): 2130 l/90bar/Δ:+80bar

This indicates:

 * Within parentheses, the *SAC factor* and *Problem solving time* specified.
 * The number of liters of back gas required for a safe ascent (2130 litres in
   the example above)
 * The number of bars of back gas required for a safe ascent (90 bars in the
   example above).
 * The delta-value: number of bars of back gas available at the end of the
   bottom section of the dive, _over and above_ the minimum gas requirement (80
   bars in the above example). A positive delta reflects a safe plan; a
   negative delta indicates insufficient gas for a safe ascent.

****
[icon="images/icons/warning2.png"]
[WARNING]
The *plan variations* and *minimum gas* estimates are only guidelines for a
diver performing dive planning, intended to enhance the safety of executing
a particular dive plan. They are NOT precise and should NOT be relied upon
as the only safety features in dive planning. Interpret these estimates
within the framework of your formal training to perform dive planning.
****

=== Planning pSCR dives

To plan a dive using a passive semi-closed rebreather (pSCR), select _pSCR_ rather than
_Open circuit_ in the dropdown list.
The parameters of the pSCR dive can be set by selecting  _File ->   Preferences ->   Profile_
from the main menu, where the gas consumption calculation takes into account the pSCR dump
ratio (default 1:10) as well as the metabolic rate. The calculation also takes the oxygen drop
accross the mouthpiece of the rebreather into account. If the
pO~2~ drops below what is considered safe, a warning appears in the _Dive plan
details_. A typical pSCR cylinder setup is very similar to an open circuit dive;
one or more drive cilinders, possibly with different bottom and decompression
gasses, including gas switches during the dive like in open circuit diving.
Therefore, the setup of the _Available gases_ and the _Dive planner points_ tables
are very similar to that of a open circuit dive plan, described above. However, no oxygen setpoints
are specified for pSCR dives. Below is a dive plan for a pSCR dive. The dive is comparable
to that of the CCR dive below, but note the longer ascent duration due to the lower oxygen
in the loop due to the oxygen drop across the mouthpiece of the pSCR equipment.

image::images/Planner_pSCR.jpg["FIGURE: Planning a pSCR dive: setup", align="center"]


=== Planifier des plongées CCR (recycleur)

To plan a dive using a closed circuit rebreather, select the _CCR_ option in
the dropdown list, circled in blue in the image below.

*Available gases*: In the _Available gases_ table, enter the cylinder information for the
diluent cylinder and for any bail-out cylinders. Do NOT enter the information for the oxygen
cylinder since it is implied when the _CCR_ dropdown selection is made.

*Entering setpoints*: Specify a default setpoint in the Preferences tab, by selecting _File ->  Preferences ->  Profile_ from
the main menu. All user-entered segments in the _Dive planner points_ table
use the default setpoint value. Then, different setpoints can be specified for dive segments
in the _Dive planner points_ table. A zero setpoint
means the diver bails out to open circuit mode for that segment. Decompression is always calculated
using the setpoint of the last manually entered segment. So, to plan a bail out ascent for a
CCR dive, add a one-minute dive segment to the end with a setpoint value of 0. The decompression
algorithm does not switch deco-gases automatically while in CCR mode (i.e. when a positive setpoint is specified) but
this is calculated for bail out ascents.

The dive profile for a CCR dive may look something like the image below.

image::images/Planner_CCR.jpg["FIGURE: Planning a CCR dive: setup", align="center"]

Note that, in the _Dive plan details_, the gas consumption for a CCR segment
is not calculated, so gas consumptions of 0 liters are the norm.

[[S_Replan]]
=== Modifier une planification existante

Normally, when a dive plan has been saved, it is accessible from the *Dive
List*, like any other dive log. Within the *Dive List* there is no way to
change a saved dive plan.  To change a dive plan, select it on the *Dive
List*. Then, in the main menu, select _Log -> Re-plan dive_. This will open
the selected dive plan within the dive planner, allowing changes to be made
and saved as usual.

In addition, there is the option "Save new". This keeps the original planned
dive and adds a (possibly modified, - earlier dives are now taken into
account -) copy to the dive list. If that copy is saved with the same start
time as the original, the two dives are considered two versions of the same
dive and do not influence other each during decompression calculation (see
next section).

=== Planifier des plongées successives

Repetitive dives can easily be planned if the dates and start times of the
repetitive dive set are specified appropriately in the top left-hand _Start
Time_ field. _Subsurface_ calculates the gas loading figures and the affect
of the first dive is evaluated on later dives.

If you have just completed a long/deep dive and are planning another dive,
then highlight, in the *Dive List*, the dive that has just been logged then
activate the planner. Depending on the start time of the planned dive, the
planner takes into account the gas loading during the completed dive and
plans accordingly.

If only a few standard configurations are used (e.g. in GUE), then a
template dive can be created conforming to one of the configurations. If you
want to plan a dive using this configuration, highlight the template dive in
the *Dive List* and activate the planner: the planner takes into account the
configuration in the highlighted dive.

=== Imprimer un plan de plongée

Selecting the _Print_ button in the planner allows printing of the _Dive
Plan Details_ for wet notes. You can also cut and paste the _Dive Plan
Details_ to include in a text file or word processing document.

However, after the plan has been saved, it is represented in a way very
similar to a dive log and the gas calculations cannot be accessed in the
same way as during the planning process. The only way to print the dive plan
is to use the _File -> Print_ function on the main menu in the same way as
for dive logs or by copy and paste to a word processor.

[[S_MergeDivePlan]]
=== Enregistrer une plongée avec sa planification

In the section dealing with <<S_MultipleDiveComputers, dives using more than
one dive computer>> we discussed the way in which multiple profiles for a
single dive can be viewed using the left-arrow and right-arrow keyboard
keys. A similar method can be used for saving a dive plan with the profile
of the actual dive, once this has been uploaded into _Subsurface_.  In order
to do this:

- Do the dive planning and save the final plan in the _Dive List_.
- Après la plongée, télécharger les données depuis l'ordinateur de plongée.
- Change the date and time of the _dive plan_ to coincide with that of the
  real-life dive from the _dive computer_.
- In the _Dive List_, highlight the dive plan as well as the data for the real
  dive and merge the two dives, making use of the Dive List Context Menu
  (available by righ-clicking a dive).

The text version of the dive plan is appended to the Notes in the _Notes
Tab_. With this merged dive highlighted in the _Dive List_, switch between
the planned profile and the real-life profile using the
righ-arrow/left-arrow keyboard keys.

== Lancer _Subsurface_ depuis la ligne de commande
_Subsurface_ can be launched from the command-line to set some specialised
settings or as part of an script-based automated process for manipulating a
dive log. The format for launching _Subsurface_ from the command-line is:

	subsurface [options] [logfile ...] [--import logfile ...]

Ces options incluent:
|====================
|*Command-line option*|*Description*
|--help|Print a summary of the command-line options
| -h|Print a summary of the command-line options
|--import logfile ...|A file name before this option is treated as an existing dive log, everything after is imported into the existing dive log
|--verbose|Print debug information while running _Subsurface_
| -v|Print debug information while running _Subsurface_
| -v -v| Print even more debug information while running _Subsurface_
|--version|Prints the current version of _Subsurface_
|--survey|Opens the xref:S_UserSurvey[user survey] immediately after starting _Subsurface_
|--user=<username>|Choose the xref:S_user_space[configuration space] of user <username>
|--cloud-timeout=<duration>|Set the timeout for cloud connection (0 < duration < 60). This enables longer timeouts for slow Internet connections
|--win32console|Create a dedicated console if needed (Windows only). Add this option before everything else
|--win32log|Write the program output to subsurface.log (Windows only). Add option before everything else
|====================

== Description des éléments du menu principal de Subsurface

Cette section décrit les fonctions et les opérations des éléments du menu
principal de Subsurface. Plusieurs éléments ci-dessous sont des liens vers
des sections de ce manuel traitant des opérations relatives.

=== Fichier
- <<S_NewLogbook,_Nouveau carnet de plongée_>> - Fermer le carnet de plongée
  actuellement ouvert et supprime toutes les informations de plongées.
- _Ouvrir un carnet de plongée_ - Ouvre une fenêtre pour sélectionner le
  carnet de plongée à ouvrir.
- _Sauvegarder_ - Enregistrer le carnet de plongée actuellement ouvert.
- _Enregsitrer sous_ - Enregistrer le carnet actuel sous un nom différent.
- _Open cloud storage_ - Open the dive log previously saved in
  <<S_Cloud_storage,_Cloud storage_>>.
- _Save to cloud storage_ - Save the current dive log to
  <<S_Cloud_storage,_Cloud storage_>>.
- _Take cloud storage online_ -
  ******************************************************
- _Fermer_ - Fermer le carnet de plongée actuellement ouvert.
- <<S_ExportLog,_Exporter_>> - Exporter le carnet de plongée actuellement
  ouvert (ou les plongées sélectionnées dans le carnet) vers un des nombreux
  formats.
- <<S_PrintDivelog,_Imprimer_>> - Imprimer le carnet de plongée actuellement
  ouvert.
- <<S_Preferences,_Préférences_>> - Définir les  préférences de _Subsurface_.
- <<S_FindMovedImages, _Find moved images_>> - If photos taken during dives
  have been moved to
      a different disk or directory, locate them and link them to the appropriate
      dives.
- <<S_Configure,_Configurer l'ordinateur de plongée_>> - Modifier la
  configuration d'un ordinateur de plongée.
- _Quitter_ - Quitter _Subsurface_.


=== Édition
- The Edit option allows one to undo or redo an action, e.g. deleting dives.

=== Importer
- <<S_ImportDiveComputer,_Importer depuis un l'ordinateur de plongée_>> -
  Importer des informations de plongées à partir de l'ordinateur de plongée.
- <<Unified_import,_Importer des fichiers de log_>> - Importer des
  informations de plongées à partir d'un fichier d'un format compatible avec
  _Subsurface_.
- <<S_Companion,_Importer les données GPS depis le service web Subsurface_>> -
  Charge les coordonnées GPS à partir de l'application mobile _Subsurface_
  (téléphones et tablettes).
- <<S_ImportingDivelogsDe,_Importer depuis Divelogs.de_>> - Importer des
  informations de plongées à partir de _www.Divelogs.de_.

=== Journal (log)
- <<S_EnterData,_Ajouter une plongée_>> -  Ajouter manuellement une nouvelle
  plongée au panneau de la *liste des plongées*.
- _Edit dive_ - Edit a dive where the profile was entered by hand and not from
  a dive computer.
- <<S_DivePlanner,_Planifier une plongée_>> - Planifier des plongées.
- <<S_Replan,_Modifier la plongée dans le planificateur_>> - Modifier une
  plongée planifiée qui a été enregistrée dans la *liste des plongées*.
- <<S_CopyComponents,_Copier les composants de la plongée_>> - Copier les
  informations de plusieurs champs d'un journal de plongée vers le
  presse-papier.
- _Coller les composants de la plongée_  - Colle, dans les plongées
  sélectionnées dans la *liste des plongées*, les informations copiées au
  préalable avec l'option _Copier les composants de la plongée_.
- <<S_Renumber,_Renuméroter_>> - Renuméroter les plongées sélectionnées dans
  le panneau de la *liste des plongées*.
- <<S_Group,_Grouper automatiquement_>> - Grouper les plongées du panneau de
  *liste des plongées* dans des voyages de plongées.
- <<S_DeviceNames,_Editer les noms des ordinateurs de plongée_>> - Modifier
  les noms des ordinateurs de plongée pour coordonner vos journaux (logs).
- <<S_Filter,_Filtrer la liste des plongées_>> - Sélectionner seulement
  certaines plongées, à partir de tags ou de critères de plongées.

=== Vue
- <<S_ViewPanels,_Tout_>> - Affiche les quatre panneaux principaux de
  _Subsurface_ simultanément.
- <<S_ViewPanels,_Liste des plongées_>> - Affiche uniquement le panneau de la
  *liste des plongées*.
- <<S_ViewPanels,_Profil_>> - Affiche uniquement le panneau du *profil de la
  plongée*.
- <<S_ViewPanels,_Info_>> - Affiche uniquement le panneau des *notes*.
- <<S_ViewPanels,_Globe_>> - Affiche uniquement le panneau de la *carte
  mondiale*.
- _Statistiques annuelles_  - Affiche par année le résumé des statistiques des
  plongées effectuées.
- _Prev DC_ - Switch to data from previous dive computer, if a single dive was
  logged from more than one.  See the sections on
  <<S_MultipleDiveComputers,using multiple dive computers for the same dive>>
  and <<S_MergeDivePlan, Saving an uploaded dive with its dive plan>>.
- _Ordinateur suivant_  - Passer à l'ordinateur de plongée suivant.
- _Plein écran_  - Passer en mode plein écran.

=== Share on
- <<S_Facebook,_Facebook_>> - Partager la plongée sélectionnée sur votre
  Facebook.

=== Aide
- _À propos de Subsurface_  - Affiche un panneau avec le numéro de version de
  _Subsurface_ ainsi que les informations de licence.
- _Vérifier les mises à jour_  - Vérifier si une nouvelle version de
  Subsurface est disponible sur le https://subsurface-divelog.org/[site web de
  _Subsurface_ ].
- <<S_UserSurvey,_Sondge utilisateur_>> - Aider à rendre _Subsurface_ encore
  meilleur en répondant à notre sondage utilisateur ou en répondant à un autre
  sondage, si vos habitudes de plongées ont changées.
- _Manuel utilisateur_  - Ouvre une fenêtre affichant ce manuel utilisateur.



== ANNEXE A : informations spécifiques au système d'exploitation utilisé pour importer les informations de plongées depuis un ordinateur de plongée.

=== Assurez-vous que les pilotes (drivers) nécessaires sont installés
[icon="images/icons/drivers.jpg"]
[NOTE]
Le système d'exploitation de l'ordinateur nécessite les bons pilotes pour
communiquer avec l'ordinateur de plongée de la façon utilisée par
l'ordinateur de plongée (Bluetooth, USB, infra-rouge).

	* Sous Linux, les utilisateurs doivent avoir le bon module noyau de chargé. La
	  plupart des distributions Linux le font automatiquement, de telle sorte que
	  l'utilisateur n'ait rien à faire de particulier. Cependant, certains
	  protocoles de communication nécessitent des pilotes additionnels, plus
	  particulièrement pour certaines technologies telles que l'infra-rouge.

	* Sous Windows, le bon pilote devrait être téléchargé automatiquement la
	  première fois que l'utilisateur branche son ordinateur de plongée sur le
	  port USB de son ordinateur de bureau.

Sous Mac, les utilisateurs peuvent parfois avoir besoin d'installer
manuellement le bon pilote. Par exemple, pour le Mares Puck ou n'importe
quel autre ordinateur de plongée utilisant une interface USB-série basé sur
le composant Silicon Labs CP2101 ou similaire, le bon pilote est disponible
sous _Mac_OSX_VCP_Driver.zip_ sur le
https://www.silabs.com/support/pages/document-library.aspx?p=Interface&f=USB%20Bridges&pn=CP2101[dépôt
de documents et logiciels Silicon Labs].

[[S_HowFindDeviceName]]
=== Comment trouver le nom du périphérique branché sur USB et paramétrer les permissions en écriture
[icon="images/icons/usb.jpg"]
[NOTE]
Lors de la connexion d'un ordinateur de plongée en utilisant l'USB,
_Subsurface_ proposera généralement soit une liste déroulante avec le bon
nom (ou le point de montage pour un Uemis Zurich) ou la liste sera
désactivée si aucun nom de périphérique n'est nécessaire. Dans les rares cas
où cela ne fonctionnerait pas, voici quelques méthodes pour trouver le nom
de votre périphérique ;

.Sur Windows :

Essayez simplement COM1, COM2, etc. La liste déroulante devrait contenir
tous les périphériques COM connectés.

.Sur MacOS :

La liste déroulante devrait contenir tous les ordinateurs de plongée
connectés.

.Sur Linux :

Il existe un moyen sûr de trouver le port :

 - Déconnecter le cable USB de l'ordinateur de plongée
 - Ouvrir un terminal
 - Taper la commande 'dmesg' et appuyer sur la touche Entrer
 - Connecter le cable USB de l'ordinateur de plongée
 - Taper la commande 'dmesg' et appuyer sur la touche Entrer

Un message similaire à celui-ci devrait apparaitre :

	usb 2-1.1: new full speed USB device number 14 using ehci_hcd
	usbcore: registered new interface driver usbserial
	USB Serial support registered for generic
	usbcore: registered new interface driver usbserial_generic
	usbserial: USB Serial Driver core
	USB Serial support registered for FTDI USB Serial Device
	ftdi_sio 2-1.1:1.0: FTDI USB Serial Device converter detected
	usb 2-1.1: Detected FT232BM
	usb 2-1.1: Number of endpoints 2
	usb 2-1.1: Endpoint 1 MaxPacketSize 64
	usb 2-1.1: Endpoint 2 MaxPacketSize 64
	usb 2-1.1: Setting MaxPacketSize 64
	usb 2-1.1: FTDI USB Serial Device converter now attached to ttyUSB3
	usbcore: registered new interface driver ftdi_sio
	ftdi_sio: v1.6.0:USB FTDI Serial Converters Driver

La troisième ligne en partant du bas montre que l'adaptateur FTDI USB est
détecté et connecté sur +ttyUSB3+. Cette information peut à présent être
utilisée pour les paramètres d'importation en tant que +/dev/ttyUSB3+ pour
que Subsurface utilise le bon port USB.

S'assurer que l'utilisateur possède les droits d'écriture sur le port série
USB :

Sur les systèmes similaires à Unix, les ports USB ne peuvent être accédés
que par des utilisateurs membres d'un groupe spécial qui peut être +dialout+
ou +uucp+. Cela peut être vérifié en listant les permissions associées au
périphérique, par exemple via +ls - l /dev/ttyUSB0+. Notez que le numéro
dans le nom de fichier dépend du nombre de périphériques USB que vous avez
branchés et peut être ajusté au besoin.Si vous n'êtes pas root, vous n'êtes
peut-être pas membre de ce groupe et ne pouvez donc pas utiliser le port
USB. Admettons que votre nom d'utilisateur soit 'johnB'.

En tant que root, tapez : usermod -a -G dialout johnB+ (utilisateurs
d'Ubuntu : +sudo usermod -a -G dialout johnB+)  Cela ajoute johnB au groupe
+dialout+.
Tapez : +id johnB+     Cela liste tous les groupes auquel johnB appartient et
vérifiez que 
l'appartenance au groupe est bien effectif. Le groupe +dialout+ devrait 
être listé
parmi les différents IDs.
Sous certaines circonstances, les modifications ne prennent effet qu'après une déconnexion
puis reconnexion sur l'ordinateur (sous Ubuntu, par exemple).

Avec le bon nom de périphérique (par exemple +dev/ttyUSB3+) et avec un accès
en écriture au port USB, l'ordinateur de plongée devrait se connecter et
vous devriez pouvoir importer vos plongées.


[[S_HowFindBluetoothDeviceName]]
=== Manually setting up Bluetooth enabled devices
[icon="images/icons/bluetooth.jpg"]
[NOTE]
For dive computers communicating through Bluetooth like the Heinrichs
Weikamp Frog or the Shearwater Predator, Petrel and Nerd there is a
different procedure to get the device’s name to communicate with
_Subsurface_. Follow these steps:

 * *For the dive computer, after enabling Bluetooth, be sure it is in Upload mode.*

For Bluetooth pairing of the dive computer, refer to the manufacturer's user
guide. When using a Shearwater Predator/Petrel/Nerd, select _Dive Log ->
Upload Log_ and wait for the _Wait PC_ message.

 * *Jumeler l'ordinateur utilisant _Subsurface_ avec l'ordinateur de plongée.*

==== Sur Windows :

Bluetooth is most likely already enabled. For pairing with the dive computer
choose _Control Panel -> Bluetooth Devices -> Add Wireless Device_.  This
should bring up a dialog showing your dive computer (which should be in
Bluetooth mode) and allowing pairing. Right click on it and choose
_Properties-> COM Ports_ to identify the port used for your dive
computer. If there are several ports listed, use the one saying "Outgoing"
instead of "Incoming".

For downloading to _Subsurface_, the _Subsurface_ drop-down list should
contain this COM port already. If not, enter it manually.

Note: If there are issues afterwards when downloading from the dive computer
using other software, remove the existing pairing with the dive computer.

==== Sur MacOS :

Click on the Bluetooth symbol in the menu bar and select _Set up Bluetooth
Device..._. The dive computer should then show up in the list of
devices. Select it and go through the pairing process. This step should only
be needed once for initial setup.

Once the pairing is complete, the correct device is shown in the 'Device or
Mount Point' drop-down in the _Subsurface_ *Import* dialog.

==== Sur Linux
Be sure Bluetooth is enabled on the _Subsurface_ computer.  On most common
distributions this should be true out of the box and pairing should be
straightforward. For instance, Gnome3 shows a Bluetooth icon on the right of
the toolbar at the top of the screen.  Users have reported difficulties with
some Bluetooth controllers.  If you have an onboard controller, try that
first.  It is simplest if you remove any USB Bluetooth dongles.  If you have
a USB dongle that came with your dive computer, try that before any others.

Setting up a connection to download dives from your Bluetooth-enabled
device, such as the _Shearwater Petrel_, is not yet an automated process and
will generally require the command prompt.  It is essentially a three step
process.

 - Activez le contrôleur Bluetooth et jumelez votre ordinateur de plongée
 - Establish an RFCOMM connection
 - Download the dives with Subsurface

Ensure the dive computer is in upload mode. On the _Shearwater Petrel_,
_Petrel 2_ and _Nerd_ cycle through the menu, select 'Dive Log', then
'Upload Log'.  The display will read 'Initializing', then 'Wait PC 3:00' and
will countdown.  Once the connection is established, the display reads 'Wait
CMD ...' and the countdown continues. When downloading the dive from
Subsurface, the display reads 'Sending' then 'Sent Dive'.

To establish the connection, establish root access through +sudo+ or +su+.
The correct permission is required to download the dives in the computer. On
most Linux systems this means becoming a member of the dialout group (This
is identical as for many dive computers using a Linux USB port, described in
the previous section). On the command terminal, enter:

+sudo usermod -a -G dialout username+

Then log out and log in for the change to take effect.

===== Enabling the Bluetooth controller and pairing your dive computer

Attempt to set up the Bluetooth controller and pair your dive computer using
the graphical environment of the operating system. After setting the dive
computer to upload mode, click the Bluetooth icon in the system tray and
select 'Add new device'. The dive computer should appear. If asked for a
password, enter 0000.  Write down or copy the MAC address of your dive
computer - this needed later and should be in the form 	00:11:22:33:44:55.

If the graphical method doesn't work, pair the device from the command
line. Open a terminal and use +hciconfig+ to check the Bluetooth controller
status.

	$ hciconfig
	hci0:	Type: BR/EDR  Bus: USB
		BD Address: 01:23:45:67:89:AB  ACL MTU: 310:10  SCO MTU: 64:8
		*DOWN*
		RX bytes:504 acl:0 sco:0 events:22 errors:0
		TX bytes:92 acl:0 sco:0 commands:21 errors:0

This indicates a Bluetooth controller with MAC address 01:23:45:67:89:AB,
connected as hci0.  Its status is 'DOWN', i.e. not powered.  Additional
controllers will appear as hci1, etc.  If there is not a Bluetooth dongle
plugged in upon booting the computer, hci0 is probably the onboard.  Now
power on the controller and enable authentication:

	sudo hciconfig hci0 up auth+  (enter password when prompted)
	hciconfig
	hci0:  Type: BR/EDR  Bus: USB
		BD Address: 01:23:45:67:89:AB  ACL MTU: 310:10  SCO MTU: 64:8
		*UP RUNNING PSCAN AUTH*
		RX bytes:1026 acl:0 sco:0 events:47 errors:0
		TX bytes:449 acl:0 sco:0 commands:46 errors:0

Check that the status now includes +'UP', 'RUNNING' AND 'AUTH'+.

If there are multiple controllers running, it's easiest to turn off the
unused controller(s). For example, for +hci1+:

	sudo hciconfig hci1 down

Next step is to 'trust' and 'pair' the dive computer. On distros with Bluez
5, such as Fedora 22, you can use a tool called +blutootctl+, which will
bring up its own command prompt.

	bluetoothctl
	[NEW] Controller 01:23:45:67:89:AB localhost.localdomain [default]
	[bluetooth]# agent on
	Agent registered
	[bluetooth]# default-agent
	Default agent request successful
	[bluetooth]# scan on                        <----now set your dive computer to upload mode
	Discovery started
	[CHG] Controller 01:23:45:67:89:AB Discovering: yes
	[NEW] Device 00:11:22:33:44:55 Petrel
	[bluetooth]# trust 00:11:22:33:44:55        <----you can use the tab key to autocomplete the MAC address
	[CHG] Device 00:11:22:33:44:55 Trusted: yes
	Changing 00:11:22:33:44:55 trust succeeded
	[bluetooth]# pair 00:11:22:33:44:55
	Attempting to pair with 00:11:22:33:44:55
	[CHG] Device 00:11:22:33:44:55 Connected: yes
	[CHG] Device 00:11:22:33:44:55 UUIDs: 00001101-0000-1000-8000-0089abc12345
	[CHG] Device 00:11:22:33:44:55 Paired: yes
	Pairing successful
	[CHG] Device 00:11:22:33:44:55 Connected: no

If asked for a password, enter 0000. It's ok if the last line says
'Connected: no'. The important part is the line above, +Pairing successful+.

If the system has Bluez version 4 (e.g. Ubuntu 12.04 through to 15.04),
there is probably not a +bluetoothctl+, but a script called
+bluez-simple-agent+ or just +simple-agent+.

	hcitool -i hci0 scanning
	Scanning ...
		00:11:22:33:44:55       Petrel
		bluez-simple-agent hci0 00:11:22:33:44:55

Once the dive computer is paired, set up the RFCOMM connection.

===== Establishing the RFCOMM connection

The command to establish an RFCOMM connection is:

+sudo rfcomm -i <controller> connect <dev> <bdaddr> [channel]+

- +<controller>+ is the Bluetooth controller, +hci0+.
- +<dev>+ is the RFCOMM device file, +rfcomm0+
- +<bdaddr>+ is the dive computer's MAC address, +00:11:22:33:44:55+
- +[channel]+ is the dive computer's Bluetooth channel we need to connect to.

If you omit it, channel 1 is assumed.  Based on a limited number of user
reports, the appropriate channel for the dive computer is probably:

- _Shearwater Petrel 1_: channel 1
- _Shearwater Petrel 2_: channel 5
- _Shearwater Nerd_: channel 5
- _Heinrichs-Weikamp OSTC Sport_: channel 1

E.g. to connect a _Shearwater Petrel 2_, set the dive computer to upload
mode and enter:

	sudo rfcomm -i hci0 connect rfcomm0 00:11:22:33:44:55 5 (enter a password, probably 0000, when prompted)

This gives the response:

	Connected /dev/rfcomm0 to 00:11:22:33:44:55 on channel 5
	Press CTRL-C for hangup

To connect a _Shearwater Petrel 1+ or + HW OSTC Sport+, set the dive
computer to upload mode and enter:

	sudo rfcomm -i hci0 connect rfcomm0 00:11:22:33:44:55   (enter a password, probably 0000, when prompted)
	Connected /dev/rfcomm0 to 00:11:22:33:44:55 on channel 1
	Press CTRL-C for hangup

If the specific channel the dive computer needs is not known, or the channel
in the list above doesn't work, the command +sdptool records+ should help
determine the appropriate channel. The output below is for a _Shearwater
Petrel 2_.

	sdptool -i hci0 records 00:11:22:33:44:55
	Service Name: Serial Port
	Service RecHandle: 0x10000
	Service Class ID List:
		"Serial Port" (0x1101)
		Protocol Descriptor List:
		"L2CAP" (0x0100)
		"RFCOMM" (0x0003)
		Channel: 5

For a Bluetooth dive computer not in the list above, or if the channel
listed is not correct, please let the Subsurface developers know on the user
forum or the developer mailing list _subsurface@subsurface-divelog.org_.

===== Download the dives with Subsurface
After establishing the RFCOMM connection and while the dive computer's
upload mode countdown is still running, go to_Subsurface_, select
_Import->Import from dive computer_ and enter appropriate Vendor
(e.g. _Shearwater_), Dive Computer (_Petrel_), Device or Mount Point
(_/dev/rfcomm0_) and click _Download_.




[[_appendix_b_dive_computer_specific_information_for_importing_dive_information]]

== APPENDIX B: Dive Computer specific information for importing dive data.

[[S_ImportUemis]]
=== Importing from Uemis Zurich

[icon="images/icons/iumis.jpg"]
[NOTE]
_Subsurface_ downloads the information stored on the SDA (the built-in file
system of the Uemis) including information about dive spots and
equipment. Buddy information is not yet downloadable.  Things are very
similar to a normal USB-connected dive computer (the Uemis is one of those
that recharge when connected to the USB port).  The main difference is that
you don’t enter a device name, but instead the location where the UEMISSDA
file system is mounted once connected to the dive computer. On Windows this
is a drive letter ( often 'E:' or 'F:'), on a Mac this is
'/Volumes/UEMISSDA' and on Linux systems this differs depending on the
distribution. On Fedora it usually is
'/var/run/media/<your_username>/UEMISSDA'. In all cases _Subsurface_ should
suggest the correct location in the drop down list.

After selecting the above device name, download the dives from the Uemis
Zurich. One technical issue with the Uemis Zurich download implementation
(this is a Uemis firmware limitation, not a _Subsurface_ issue) is that you
cannot download more than about 40-50 dives without running out of memory on
the SDA. This will usually only happen the very first time you download
dives from the Uemis Zurich.  Normally when downloading at the end of a day
or even after a dive trip, the capacity is sufficient. If _Subsurface_
displays an error that the dive computer ran out of space, the solution is
straightforward.  Disconnect the SDA, turn it off and on again, and
reconnect it. You can now retry (or start a new download session) and the
download will continue where it stopped previously. You may have to do this
more than once, depending on how many dives are stored on the dive computer.

[[S_ImportingGalileo]]
=== Importing from Uwatec Galileo

[icon="images/icons/Galileo.jpg"]
[NOTE]
The Uwatec Galileo dive computers use infra red (IrDA) communication between
the dive computer and Subsurface. The Uwatec hardware uses a USB dongle
based on the serial infra-red (SIR) protocol and the MSC7780 IrDA controller
manufactured by MosChip and marketed by Scubapro and some electronics
companies.  Under Linux, the kernel already provides for communication using
the IrDA protocol. However, the user additionally needs to load a driver for
the IrDA interface with the dive computer. The easiest way is to load the
*irda-tools* package from the
http://irda.sourceforge.net/docs/startirda.html[Linux IrDA Project].  After
the installation of the irda-tools, the *root user* can specify a device
name from the console as follows: +irattach irda0+

After executing this command, Subsurface will recognize the Galileo dive
computer and download dive information.

Under Windows, a similar situation exists. Drivers for the MCS7780 are
available from some Internet web sites e.g.
http://www.drivers-download.com/Drv/MosChip/MCS7780/[www.drivers-download.com].
Windows-based IrDA drivers for the Uwatec can also be downloaded from the
ScubaPro web site, with drivers located on the download page for the
ScubaPro SmartTrak software.

Pour les ordinateurs Apple Mac, la connexion IrDA via l'interface MCS7780
n'est plus disponible depuis OSX 10.6 ou supérieur.

[[S_ImportingDR5]]
=== Importing from Heinrichs Weikamp DR5

[icon="images/icons/HW_DR5.jpg"]
[NOTE]
When mounted as a USB drive the Heinrichs Weikamp DR5 saves a single UDDF
file for every dive.  Mark all the dives you'd like to import or open.
Note: The DR5 does not seem to store gradient factors nor deco information,
so for _Subsurface_ it is not possible to display them. Adjust the gradient
factors in the _Profile Settings_ in _Subsurface_ to generate a deco overlay
in the _Subsurface_ *Dive Profile* panel but please note that the deco
calculated by _Subsurface_ will most likely differ from the one displayed on
the DR5.


[[S_ImportingXDeep]]
=== Importing from xDEEP BLACK

[icon="images/icons/HW_xdeepblack.jpg"]
[NOTE]
Each dive has to be individually saved as UDDF file using "Export UDDF"
option in BLACK's logbook menu.  When mounted as a USB drive UDDF files are
available in LOGBOOK directory.  Note: The xDEEP BLACK saves NDL time but
does not seem to store gradient factors nor deco information, so for
_Subsurface_ it is not possible to display them. Adjust the gradient factors
in the _Profile Settings_ in _Subsurface_ to generate a deco overlay in the
_Subsurface_ *Dive Profile* panel but please note that the deco calculated
by _Subsurface_ will most likely differ from the one displayed on the xDEEP
BLACK.


=== Importing from Shearwater Predator/Petrel/Nerd using Bluetooth

[icon="images/icons/predator.jpg"]
[NOTE]
Specific instructions for downloading dives using Bluetooth are given in the
section above, <<S_Bluetooth,_Connecting Subsurface to a Bluetooth-enabled
dive computer_>>.

[[S_PoseidonMkVI]]
=== Importing from Poseidon MkVI Discovery

[icon="images/MkVI.jpeg"]
[NOTE]
Download of dive logs from the MkVI is performed using a custom
communications adapter and the _Poseidon PC Configuration Software_,
obtained when purchasing the MKVI equipment. The latter is a Windows
application allowing configuration of equipment and storage of dive
logs. Communication between dive computer and desktop computer utilizes the
IrDA infra-red protocol. Only data for one dive can be downloaded at a time,
in three files:

- Setup configuration for the dive and key dive parameters (file with a .txt
  extension)
- Dive log details (file with a .csv extension)
- Redbook format dive log (file with .cvsr extension). This is a compressed
  version of the dive log using a proprietary format.

_Subsurface_ accesses the .txt and the .csv files to get dive log
information.


=== Importing from APD Inspiration/Evolution CCR

[icon="images/APDComputer.jpg"]
[NOTE]
The dive logs of an APD Inspiration or similar CCR dive computer are
downloaded using a communications adapter and _AP Communicator_, obtained
when purchasing the equipment. The dive logs can be viewed using the _AP Log
Viewer_, within Windows or Mac/OS. However, APD logs can be viewed and
managed from within _Subsurface_ (together with dives using many other types
of dive computer). The APD inspiration dive logs are imported into
_Subsurface_ as follows:

- Download the dive using _AP Communicator_.
- Open a dive within the _AP Log Viewer_.
- Select the tab at the top of the screen, entitled "_Data_".
- With the raw dive log data show on the screen, click on "_Copy to
  Clipboard_".
- Open a text editor, e.g. Notepad (Windows) or TextWrangler (Mac).
- Copy the contents of the clipboard into the text editor and save the text
  file with a filename extension of _.apd_.
- Within _Subsurface_, select _Import -> Import log files_ to open the
  xref:Unified_import[universal import dialogue].
- In the dropdown list towards the bottom right of the dialogue (labeled
  'Filter:'), select "APD log viewer".
On the list of file names select the _.apd_ file  created. An import
dialogue opens showing the default settings for the data in the
_.apd_ file. If changes are required,
  do this as for xref:S_ImportingCSVDives[CSV imports].

image::images/APD_CSVimportF22.jpg["Figure: APD log viewer import", align="center"]

- The top left hand dropdown box in the import panel lets you select the APD
  dive computer for which the dive log needs to be imported. The default it is
  DC1, _i.e._ the first of the two dive computers the APD uses. It is possible
  to sequentially import the data for both dive computers by first importing
  CD1 and then DC2.(*Hint*: The logs for the two dive computers are viewed by
  selecting _View -> Next DC_ from the Main Menu after the uploading has been
  completed)
- Click the _Ok_ button at the bottom of the import panel.

The APD dive log will appear within _Subsurface_. The dive computer-
generated ceiling provided by the Inspiration can be viewed by selecting the
appropriate button on the left of the *Dive Profile*. Cylinder pressure data
are not logged by the APD equipment but can be manually entered in the
_Equipment_ Tab.

== APPENDIX C: Exporting Dive log information from external dive log software.

The import of dive log data from external dive log software is mostly
performed using the dialogue found by selecting _Import_ from the Main Menu,
then clicking on _Import Log Files_. This is a single-step process, more
information about which can be found xref:Unified_import[here.] However, in
some cases, a two-step process may be required:

1. Export the foreign dive log data to format that is accessible from
  _Subsurface_.
2. Import the accessible dive log data into _Subsurface_.

This appendix provides some information about approaches to export dive log
data from foreign dive log software. The procedures below mostly apply to
Linux and/or Windows.

[[S_ImportingDivesSuunto]]
=== Exporting from *Suunto Divemanager (DM3, DM4 or DM5)*
[icon="images/icons/suuntologo.jpg"]
[NOTE]
DiveManager is a Windows application for Suunto dive computers.  Divemanager
3 (DM3) is an older version of the Suunto software. More recent Suunto dive
computers use Divemanager version 4 or 5 (DM4 or DM5). The different
versions of Divemanager use different methods and different file naming
conventions to export dive log data.

*Divemanager 3 (DM3):*

1. Start 'Suunto Divemanager 3' and log in with the name containing the logs
2. Do not start the import wizard to import dives from the dive computer.
3. In the navigation tree on the left side of the program-window, select the
   appropriate dives.
4. Within the list of dives, select the dives you would like to import later:
	* To select certain dives: hold 'ctrl' and click the dive
	* To select all dives: Select the first dive, hold down shift and select the
	  last dive
5. With the dives marked, use the program menu _File -> Export_
6. The export pop-up will show. Within this pop-up, there is one field called
   'Export Path'.
	* Click the browse button next to the field Export Path
		** A file-manager like window pops up
		** Navigate to the directory for storing the
   Divelog.SDE file
		** Optionally change the name of the file for saving
		** Click 'Save'
	* Back in the Export pop-up, press the button 'Export'
7. The dives are now exported to the file Divelog.SDE.

*Divemanager 4 (DM4) and Divemanager 5 (DM5):*

DM4 and DM5 use identical mechanisms for exporting dive logs.  To export a
divelog from Divemanager you need to locate the DM4/DM5 database where the
dives are stored. You can either look for the original database or make a
backup of the dives. Both methods are described here.

Locating the Suunto DM4 (or DM5) database:

1. Start Suunto DM4/DM5
2. Select 'Help -> About'
3. Click 'Copy' after text 'Copy log folder path to clipboard'
4. Ouvrir l'explorateur Windows
5. Paste the address to the path box at the top of the File Explorer
6. The database is called DM4.db or DM5.db

Making a backup copy of the Suunto DM4/DM5 database:

1. Start Suunto DM4/DM5
2. Select 'File - Create backup'
3. From the file menu select the location and name for the backup, we'll use
   DM4 (or DM5) in here with the default extension .bak
4. Click 'Save'
5. The dives are now exported to the file DM4.bak (or DM5.bak)


=== Exporting from Atomic Logbook
[[Atomic_Export]]

[icon="images/icons/atomiclogo.jpg"]
[NOTE]
Atomic Logbook is Windows software by Atomic Aquatics. It allows downloading
of dive information from Cobalt and Cobalt 2 dive computers.  The divelog is
kept in a SQLite database at
C:\ProgramData\AtomicsAquatics\Cobalt-Logbook\Cobalt.db. This file can be
directly imported to Subsurface.


=== Exporting from Mares Dive Organiser V2.1
[[Mares_Export]]

[icon="images/icons/mareslogo.jpg"]
[NOTE]
Mares Dive Organizer is a Windows application. The dive log is kept as a
Microsoft SQL Compact Edition database with a '.sdf' filename extension. The
database includes all Dive Organizer-registered divers on the particular
computer and all Mares dive computers used. The safest way to get a copy of
the dive database is to export the information to another compatible format
which can then be imported into _Subsurface_.

1. Within Dive Organizer, select _Database -> Backup_ from the main menu and
   back up the database to the desk top.  This creates a zipped file
   DiveOrganizerxxxxx.dbf.
2. Rename the file to DiveOrganizerxxxxx.zip. Inside the zipped directory is a
   file _DiveOrganizer.sdf_.
3. Extract the _.sdf_ file from the zipped folder to your Desktop.
4. The password for accessing the .zip file is _mares_.

[[S_ImportingDivingLog]]
=== Exporting from *DivingLog 5.0 and 6.0*

[icon="images/icons/divingloglogo.jpg"]
[NOTE]
The best way to bring your logs from DivingLog to Subsurface is to convert
the whole database. This is because other export formats do not include all
the details, and would lack, for example, gas switches and information of
what units are used. With database import, all this information is included
and readily available.

To transfer all files from DivingLog to Subsurface:

1. In DivingLog open the 'File -> Export -> SQLite' menu
2. Select 'Settings' button
3. Set the 'RTF2Plaintext' to 'true'
4. Close the Settings dialog
5. Click 'Export' button and select the filename

Once this is done, open the saved database file with Subsurface and the
dives are automatically converted to Subsurface’s own format. Last step to
do is save the log file in Subsurface.

== ANNEXE D : Exporter un tableur vers le format CSV
[[S_Appendix_D]]

De nombreux plongeurs conservent un carnet de plongée sous forme de fichier
numérique, souvent un tableur avec différents champs et informations. Ces
données peuvent facilement être importées dans _Subsurface_ après que le
tableur a été converti en fichier CSV. Cette section explique la procedure
pour convertir un carnet de plongée enregistrée sous forme de tableur vers
un fichier CSV qui pourra ensuite être importé dans _Subsurface_. Créer un
fichier CSV est simple malgré que la procédure soit différente selon le
tableur utilisé.

Organiser les données de plongées dans le tableur pour que la première ligne
contienne le nom (ou le titre) de chaque colonne et que les informations de
chaque plongée soient contenues sur une seule ligne. _Subsurface_ supporte
de nombreux éléments (Dive #, Date, Time, Duration, Location, GPS,
Max. Depth, Mean Depth, Buddy, Notes, Weight et Tags).  Organiser les
données de plongées selon quelques règles simples :

1. Date : utiliser un des formats suivants : aaaa-mm-jj, jj.mm.aaaa, mm/jj/aaaa
2. Durée : le format est minutes:secondes.
3. Système d'unité : un seul système d'unité doit être utilisé (pas de mélange
   entre les unités impériales et métriques)
4. Étiquettes et équipiers : les valeurs doivent être séparées par des
   virgules.
5. Position GPS : utilisez les degrés décimaux, par exemple : 30.22496
   30.821798

=== _LibreOffice Calc_ et _OpenOffice Calc_

These are open source spreadsheet applications forming parts of larger open
source office suite applications. The user interaction with _LibreOffice_
and _OpenOffice_ is very similar.  In Libreoffice Calc the time format
should be set to minutes:seconds - [mm]:ss and dates should be set to one
of: yyyy-mm-dd, dd.mm.yyyy, mm/dd/yyyy. A typical dive log may look like
this:

image::images/LOffice_spreadsheetdata.jpg["FIGURE: Spreadsheet data", align="center"]

To export the data as a .CSV file from within LibreOffice click _File ->
Save As_. On the dialogue that comes up, select the _Text CSV (.csv)_ as the
file type and select the option _Edit filter settings_.

image::images/LOffice_save_as_options.jpg["FIGURE: Save as options", align="center"]

After selecting _Save_, select the appropriate field delimiter (choose _Tab_
to prevent conflicts with the comma when using this as a decimal point),
then select _OK_.

image::images/LOffice_field_options.jpg["FIGURE: Field options", align="center"]

Double check the .CSV file by opening it with a text editor, and then import
the dive data as explained on the section xref:S_ImportingCSVDives[Importing
CSV dives].

=== Microsoft _Excel_

The field delimiter (called "_list separator_" in Microsoft manuals) is not
accessible from within _Excel_ and needs to be set through the _Microsoft
Control Panel_. After changing the separator character, all software on the
Windows machine uses the new character as a separator.  You can change the
character back to the default character by following the same procedure,
outlined below.

- In Microsoft Windows, click the *Start* button, then select _Control Panel_
  from the list on the right-hand side.
- Open the _Regional and Language Options_ dialog box.
- Do the following: ** In Windows 7, click the _Formats_ tab, and then click
  _Customize this format_.
- Type a new separator in the _List separator_ box. To use a TAB-delimited
  file, type the word TAB in the box.
- Click _OK_ twice.

Below is an image of the _Control Panel_:

image::images/Win_SaveCSV2.jpg["FIGURE: Win List separator", align="center"]

To export the dive log in CSV format:

With the dive log opened in _Excel_, select the round Windows button at the
top left, then _Save As_.

image::images/Win_SaveCSV1.jpg["FIGURE: Excel save as option", align="center"]

Click on the left-hand part of the _Save as_ option, NOT on the arrow on the
right-hand. This brings up a dialogue for saving the spreadsheet in an
alternative format. From the dropdown list at the bottom of the dialogue,
marked _Save as Type:_, select _CSV(Comma delimited) (*.CSV)_. Be sure the
appropriate folder has been selected to save the CSV file into.

image::images/Win_SaveCSV3.jpg["FIGURE: Excel save CSV dialogue", align="center"]

Select the _Save_ button. The CSV-formatted file is saved into the folder
that was selected. You can double check the .CSV file by opening it with a
text editor, then import the dive data as explained on the section
xref:S_ImportingCSVDives[Importing CSV dives].
[[S_APPENDIX_E]]
== ANNEXE E : Créer un modèle d'impression personnalisé

_Subsurface_ has a way to create or modify templates for printing dive logs
to produce customized printouts of them. Templates written in HTML, as well
as a simple Grantlee instruction set, are rendered to the print device by
_Subsurface_.

Templates are accessed using the print dialogue (see image *B* below).

image::images/Print1_f22.jpg["FIGURE: Print dialogue", align="center"]

The buttons under the _Template_ dropdown box lets you _Edit_, _Delete_,
_Import_ and _Export_ templates (see image *A* above). New or modified
templates are stored as HTML files in the same directory as the dive log
being processed. In order to create or modify a template, select one of the
templates from the template dropdown list in the print dialogue (see image
*B* above). Choose an existing template that resembles the final desired
printout. Then select _Edit_.

The Edit Panel has three tabs:

image::images/Template1_f22.jpg["FIGURE: template edit dialogue", align="center"]

1) The _Style_ tab (image *A* above) controls the font, line spacing and color
   template used for printing the dive log.  The style attributes are
   editable. Choose one of the four color palettes used for color printing.

2) The _Colors_ tab (image *B* above) allows editing the colors used for
   printing the dive log. The colors are highly customizable: the _Edit_
   buttons in the _Colors_ tab allows choosing arbitrary colors for different
   components of the dive log printout.

3) The _Template_ tab of the Edit Panel (see image below) allows creating a
   template using HTML as well as a few Grantlee programming
   primitives. Grantlee can create and format HTML code in a highly simple but
   efficient way (see below). The HTML of the template can be edited and
   saved. The saved template is stored in the same directory as the dive being
   processed. By default, a _Custom_ template is a skeleton with no specific
   print instructions. The information printed needs to be specified and
   formatted in the template by replacing the section marked with: "<!--
   Template must be filled -->". Writing HTML code with Grantlee instructions
   allows unlimited freedom in determining what is printed and in which way it
   should be rendered.

image::images/Template2_f22.jpg["FIGURE:Template tab", align="center"]

You can adapt any of the existing templates and save it to the dive log
directory. The standard templates (e.g. One dive, Six dives, Table) can be
modified in this way. After completing the edits, use the _Export_ button in
the print dialogue to save the new template using a new template name.

To write a custom template, the following elements must exist so the
template will be correctly handled and rendered.

=== Main dive loop
_Subsurface_ exports a dive list called (*dives*) to the _Grantlee_ back
end. It is possible to iterate over the list as follows:
.template.html
....
	{% for dive in dives %}
		<h1> {{ dive.number }} </h1>
	{% endfor %}
....

.output.html
....
	<h1> 1 </h1>
	<h1> 2 </h1>
	<h1> 3 </h1>
....

Additional information about _Grantlee_ can be found
http://www.grantlee.org/apidox/for_themers.html[here]

=== Grantlee exported variables
Only a subset of the dive data is exported:
|====================
|*Name*|*Description*
|number| (*int*) dive number
|id| (*int*) unique dive ID, should be used to fetch the dive profile
|date| (*string*) date of the dive
|time| (*string*) time of the dive
|location| (*string*) location of the dive
|duration| (*string*) duration of the dive
|depth| (*string*) depth of the dive
|divemaster| (*string*) divemaster for the dive
|buddy| (*string*) buddy for the dive
|airTemp| (*string*) air temperature of the dive
|waterTemp| (*string*) water temperature of the dive
|notes| (*string*) dive notes
|rating| (*int*) dive rating which ranges from 0 to 5
|sac| (*string*) SAC value for the dive
|tags| (*string*) list of dive tags for the dive
|gas| (*string*) list of gases used in the dive
|suit| (*string*) the suit used for the dive
|cylinders| (*string*) complete information of all used cylinders
|cylinder0-7| (*string*) information about a specific cylinder
|weights| (*string*) complete information of all used weight systems
|weight0-5| (*string*) information about a specific weight system
|maxcns| (*string*) maxCNS value for the dive
|otu| (*string*) OTU value for the dive
|sumWeight| (*string*) the summed weight of all used weight systems
|startPressure| (*string*) the start pressure
|endPressure| (*string*) the end pressure
|firstGas| (*string*) first used gas
|=====================

_Subsurface_ also exports *template_options* data. This data must be used as
_CSS_ values to provide a dynamically editable template. The exported data
is shown in the following table:
|====================
|*Name*|*Description*
|font| (*string*) font family
|borderwidth| (*int*) border-width value dynamically calculated as 0.1% of the page width with minimum value of 1px
|font_size| (*double*) size of fonts in vw, ranges between 1.0 and 2.0
|line_spacing| (*double*) distance between text lines, ranges between 1.0 and 3.0
|color1| (*string*) background color
|color2| (*string*) primary table cell color
|color3| (*string*) secondary table cell color
|color4| (*string*) primary text color
|color5| (*string*) secondary text color
|color6| (*string*) border colors
|=====================

.template.html
....
	border-width: {{ template_options.borderwidth }}px;
....

.output.html
....
	border-width: 3px;
....

Another variable that _Subsurface_ exports is *print_options*. This variable
contains a single member:
|=====================
|*Name*|*Description*
|grayscale | Use _CSS_ filters to convert the page into grayscale (should be added to body style to enable printing grayscale prints)
|=====================


.template.html
....
	body {
		{{ print_options.grayscale }};
	}
....

.output.html
....
	body {
		-webkit-filter: grayscale(100%);
	}
....

=== Defined CSS selectors
As the dive profile is placed after rendering, _Subsurface_ uses special
_CSS_ selectors to search in the HTML output. The _CSS_ selectors in the
following table should be added.

|====================
|*Selector*|*Type*|*Description*
|dive_{{ dive.id }} | id | is used to fetch the relevant dive profile
|diveProfile | class | each dive that will contain a dive profile should have this class selector in addition to the dive_{{ dive.id }} id selector
|dontbreak | class | prevents the dive with this class from being divided into two pages. This can be used
in flow layout templates only (when data-numberofdives = 0)
|=====================

IMPORTANT: Rendering dive profiles is not supported for flow layout templates (when
data-numberofdives = 0).

=== Special attributes

There are two ways of rendering- either rendering a specific number of dives
in each page or make _Subsurface_ try to fit as many dives as possible into
one page (_flow_ rendering).

The *data-numberofdives* data attribute is added to the body tag to set the
rendering mode.

- render 6 dives per page:

....
	<body data-numberofdives = 6>
....

- render as much dives as possible:

....
	<body data-numberofdives = 0>
....

IMPORTANT: All CSS units should be in relative lengths only, to support printing on any
page size.

== ANNEXE F: FAQs.
[[S_APPENDIX_F]]
=== Subsurface appears to miscalculate gas consumption and SAC
[[SAC_CALCULATION]]
'Question': I dived with a 12.2 l tank, starting with 220 bar and ending
with 100 bar, and I calculate a different SAC compared what _Subsurface_
calculates. Is _Subsurface_ miscalculating?

'Answer': Not really. What happens is that _Subsurface_ actually calculates
gas consumption differently - and better - than you expect.  In particular,
it takes the incompressibility of the gas into account.  Traditionally, gas
consumption and SAC should be: +consumption = tank size x (start pressure -
end pressure)+

and that's true for an ideal gas, and it's what you get taught in dive
theory.  But an "ideal gas" doesn't actually exist, and real gases actually
don't compress linearly with pressure. Also, you are missing the fact that
one atmosphere of pressure isn't actually one bar.  So the *real*
calculation is:

+consumption = (amount_of_air_at_beginning - amount_of_air_at_end)+

where the amount of air is *not* just "tank size times pressure in bar".
It's a combination of: "take compressibility into account" (which is a
fairly small issue under 220 bar - you'll see more differences when you do
high-pressure tanks with 300bar) and "convert bar to atm" (which is the
majority of your discrepancy).  Remember: one ATM is ~1.013 bar, so without
the compressibility, your gas use is:

+12.2*((220-100)/1.013)+

which is about 1445, not 1464. So there was 19 l too much in your simple
calculation that ignored the difference between 1 bar and one ATM.  The
compressibility does show up above 200 bar, and takes that 1445 down about
eight litres more, so you really did use only about 1437 l of air at surface
pressure.

So be happy: your SAC really is better than your calculations indicated.  Or
be sad: your cylinder contains less air than you thought it did.  And as
mentioned, the "contains less air than you thought it did" really starts
becoming much more noticeable at high pressure. A 400 bar really does not
contain twice as much air as a 200 bar one. At lower pressures, air acts
pretty much like an ideal gas.

=== Some dive profiles have time discrepancies with the recorded samples from my dive computer...

_Subsurface_ ends up ignoring surface time for many things (average depth,
divetime, SAC, etc).  'Question': Why do dive durations in my dive computer
differ from that given by _Subsurface_?

'Answer': For example, if you end up doing a weight check (deep enough to
trigger the "dive started")  but then come back up and wait five minutes for
your buddies, your dive computer may say that your dive is 50 minutes long -
because you have fifty minutes worth of samples - but subsurface will say
it's 45 minutes - because you were actually diving for 45 minutes.  It's
even more noticeable if you do things like divemastering the initial OW
dives, when you may stay in the water for a long time, but spend most of it
at the surface. And then you don't want that to count as some kind of long
dive”.

=== Some dive profiles are missing from the download

[[DC_HISTORY]]
'Question': I cannot download all my dives, only the most recent ones, even
though my dive computer's manual states that it records history of e.g. 999
dives? 'Answer': Dive history is different than the dive profiles on the
log.  The history only keeps track of the total number of dives and total
amount of time spent below surface. The logs, on the other hand, store the
dive profile, but they have a limited amount of memory to do so. The exact
amount of dive profiles that can be stored on the device depends on sample
interval and duration of the dives. Once the memory is full the oldest dives
get overwritten with new dives. Thus we are only able to download the last
13, 30 or 199 dives.

If you have downloaded your dives to different dive logging software before
they were overwritten, there is a good chance that Subsurface can import
these. However, if the logs are only on your dive computer, they cannot be
salvaged after being overwritten by new dives.
